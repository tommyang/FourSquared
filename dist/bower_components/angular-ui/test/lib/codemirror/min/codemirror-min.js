window.CodeMirror=function(){"use strict";function e(i,o){if(!(this instanceof e))return new e(i,o);this.options=o=o||{};for(var s in sn)!o.hasOwnProperty(s)&&sn.hasOwnProperty(s)&&(o[s]=sn[s]);f(o);var u=this.display=t(i);u.wrapper.CodeMirror=this,a(this),o.autofocus&&!Xr&&te(this),this.view=r(new It([new zt([Ct("",null,X(u))])])),this.nextOpId=0,n(this),l(this),o.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),this.setValue(o.value||""),Dr&&setTimeout(hr(ee,this,!0),20),this.view.history=Xt(),ne(this);var c;try{c=document.activeElement==u.input}catch(h){}c||o.autofocus&&!Xr?setTimeout(hr(ye,this),20):be(this),j(this,function(){for(var e in ln)ln.propertyIsEnumerable(e)&&ln[e](this,o[e],an);for(var t=0;t<hn.length;++t)hn[t](this)})()}function t(e){var t={},r=t.input=vr("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none;");Er?r.style.width="1000px":r.setAttribute("wrap","off"),r.setAttribute("autocorrect","off"),r.setAttribute("autocapitalize","off"),t.inputDiv=vr("div",[r],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),t.scrollbarH=vr("div",[vr("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),t.scrollbarV=vr("div",[vr("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),t.scrollbarFiller=vr("div",null,"CodeMirror-scrollbar-filler"),t.lineDiv=vr("div"),t.selectionDiv=vr("div",null,null,"position: relative; z-index: 1"),t.cursor=vr("div"," ","CodeMirror-cursor"),t.otherCursor=vr("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"),t.measure=vr("div",null,"CodeMirror-measure"),t.lineSpace=vr("div",[t.measure,t.selectionDiv,t.lineDiv,t.cursor,t.otherCursor],null,"position: relative; outline: none"),t.mover=vr("div",[vr("div",[t.lineSpace],"CodeMirror-lines")],null,"position: relative"),t.sizer=vr("div",[t.mover],"CodeMirror-sizer"),t.heightForcer=vr("div"," ",null,"position: absolute; height: "+wn+"px"),t.gutters=vr("div",null,"CodeMirror-gutters"),t.lineGutter=null;var n=vr("div",[t.sizer,t.heightForcer,t.gutters],null,"position: relative; min-height: 100%");return t.scroller=vr("div",[n],"CodeMirror-scroll"),t.scroller.setAttribute("tabIndex","-1"),t.wrapper=vr("div",[t.inputDiv,t.scrollbarH,t.scrollbarV,t.scrollbarFiller,t.scroller],"CodeMirror"),Or&&(t.gutters.style.zIndex=-1,t.scroller.style.paddingRight=0),e.appendChild?e.appendChild(t.wrapper):e(t.wrapper),Gr&&(r.style.width="0px"),Er||(t.scroller.draggable=!0),Br?(t.inputDiv.style.height="1px",t.inputDiv.style.position="absolute"):Or&&(t.scrollbarH.style.minWidth=t.scrollbarV.style.minWidth="18px"),t.viewOffset=t.showingFrom=t.showingTo=t.lastSizeC=0,t.lineNumWidth=t.lineNumInnerWidth=t.lineNumChars=null,t.prevInput="",t.alignWidgets=!1,t.pollingFast=!1,t.poll=new or,t.draggingText=!1,t.cachedCharWidth=t.cachedTextHeight=null,t.measureLineCache=[],t.measureLineCachePos=0,t.inaccurateSelection=!1,t.pasteIncoming=!1,t.wheelDX=t.wheelDY=t.wheelStartX=t.wheelStartY=null,t}function r(e){var t={line:0,ch:0};return{doc:e,frontier:0,highlight:new or,sel:{from:t,to:t,head:t,anchor:t,shift:!1,extend:!1},scrollTop:0,scrollLeft:0,overwrite:!1,focused:!1,maxLine:Ft(e,0),maxLineLength:0,maxLineChanged:!1,suppressEdits:!1,goalColumn:null,cantEdit:!1,keyMaps:[],overlays:[],modeGen:0}}function n(t){var r=t.view.doc;t.view.mode=e.getMode(t.options,t.options.mode),r.iter(0,r.size,function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),t.view.frontier=0,A(t,100),t.view.modeGen++,t.curOp&&Z(t,0,r.size)}function i(e){var t=e.view.doc,r=X(e.display);if(e.options.lineWrapping){e.display.wrapper.className+=" CodeMirror-wrap";var n=e.display.scroller.clientWidth/Y(e.display)-3;t.iter(0,t.size,function(e){if(0!=e.height){var t=Math.ceil(e.text.length/n)||1;1!=t&&Rt(e,t*r)}}),e.display.sizer.style.minWidth=""}else e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-wrap",""),c(e.view),t.iter(0,t.size,function(e){0!=e.height&&Rt(e,r)});Z(e,0,t.size),R(e),setTimeout(function(){h(e.display,e.view.doc.height)},100)}function o(e){var t=pn[e.options.keyMap].style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(t?" cm-keymap-"+t:"")}function l(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),R(e)}function s(e){a(e),w(e,!0)}function a(e){var t=e.display.gutters,r=e.options.gutters;gr(t);for(var n=0;n<r.length;++n){var i=r[n],o=t.appendChild(vr("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=n?"":"none"}function u(e,t){if(0==t.height)return 0;for(var r=t.text.length,n,i=t;n=ut(i);){var o=n.find();i=Ft(e,o.from.line),r+=o.from.ch-o.to.ch}for(i=t;n=ct(i);){var o=n.find();r-=i.text.length-o.from.ch,i=Ft(e,o.to.line),r+=i.text.length-o.to.ch}return r}function c(e){e.maxLine=Ft(e.doc,0),e.maxLineLength=u(e.doc,e.maxLine),e.maxLineChanged=!0,e.doc.iter(1,e.doc.size,function(t){var r=u(e.doc,t);r>e.maxLineLength&&(e.maxLineLength=r,e.maxLine=t)})}function f(e){for(var t=!1,r=0;r<e.gutters.length;++r)"CodeMirror-linenumbers"==e.gutters[r]&&(e.lineNumbers?t=!0:e.gutters.splice(r--,1));!t&&e.lineNumbers&&e.gutters.push("CodeMirror-linenumbers")}function h(e,t){var r=t+2*H(e);e.sizer.style.minHeight=e.heightForcer.style.top=r+"px";var n=Math.max(r,e.scroller.scrollHeight),i=e.scroller.scrollWidth>e.scroller.clientWidth,o=n>e.scroller.clientHeight;o?(e.scrollbarV.style.display="block",e.scrollbarV.style.bottom=i?yr(e.measure)+"px":"0",e.scrollbarV.firstChild.style.height=n-e.scroller.clientHeight+e.scrollbarV.clientHeight+"px"):e.scrollbarV.style.display="",i?(e.scrollbarH.style.display="block",e.scrollbarH.style.right=o?yr(e.measure)+"px":"0",e.scrollbarH.firstChild.style.width=e.scroller.scrollWidth-e.scroller.clientWidth+e.scrollbarH.clientWidth+"px"):e.scrollbarH.style.display="",i&&o?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=e.scrollbarFiller.style.width=yr(e.measure)+"px"):e.scrollbarFiller.style.display="",Pr&&0===yr(e.measure)&&(e.scrollbarV.style.minWidth=e.scrollbarH.style.minHeight=Vr?"18px":"12px")}function d(e,t,r){var n=e.scroller.scrollTop,i=e.wrapper.clientHeight;"number"==typeof r?n=r:r&&(n=r.top,i=r.bottom-r.top),n=Math.floor(n-H(e));var o=Math.ceil(n+i);return{from:Vt(t,n),to:Vt(t,o)}}function p(e){var t=e.display;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=m(t)-t.scroller.scrollLeft+e.view.scrollLeft,n=t.gutters.offsetWidth,i=r+"px",o=t.lineDiv.firstChild;o;o=o.nextSibling)if(o.alignable)for(var l=0,s=o.alignable;l<s.length;++l)s[l].style.left=i;e.options.fixedGutter&&(t.gutters.style.left=r+n+"px")}}function v(e){if(!e.options.lineNumbers)return!1;var t=e.view.doc,r=g(e.options,t.size-1),n=e.display;if(r.length!=n.lineNumChars){var i=n.measure.appendChild(vr("div",[vr("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,l=i.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-l),n.lineNumWidth=n.lineNumInnerWidth+l,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",!0}return!1}function g(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function m(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function w(e,t,r){var n=e.display.showingFrom,i=e.display.showingTo,o=y(e,t,r);return o&&(nr(e,e,"update",e),(e.display.showingFrom!=n||e.display.showingTo!=i)&&nr(e,e,"viewportChange",e,e.display.showingFrom,e.display.showingTo)),k(e),h(e.display,e.view.doc.height),o}function y(e,t,r){var n=e.display,i=e.view.doc;if(!n.wrapper.clientWidth)return void(n.showingFrom=n.showingTo=n.viewOffset=0);var o=d(n,i,r);if(!(t!==!0&&0==t.length&&o.from>n.showingFrom&&o.to<n.showingTo)){t&&v(e)&&(t=!0);var l=n.sizer.style.marginLeft=n.gutters.offsetWidth+"px";if(n.scrollbarH.style.left=e.options.fixedGutter?l:"0",t!==!0&&$r)for(var s=0;s<t.length;++s)for(var a=t[s],u;u=ut(Ft(i,a.from));){var c=u.find().from.line;a.diff&&(a.diff-=a.from-c),a.from=c}var f=t===!0?0:1/0;if(e.options.lineNumbers&&t&&t!==!0)for(var s=0;s<t.length;++s)if(t[s].diff){f=t[s].from;break}var c=Math.max(o.from-e.options.viewportMargin,0),h=Math.min(i.size,o.to+e.options.viewportMargin);if(n.showingFrom<c&&c-n.showingFrom<20&&(c=n.showingFrom),n.showingTo>h&&n.showingTo-h<20&&(h=Math.min(i.size,n.showingTo)),$r)for(c=Bt(ft(i,Ft(i,c)));h<i.size&&ht(Ft(i,h));)++h;for(var p=t===!0?[]:b([{from:n.showingFrom,to:n.showingTo}],t),g=0,s=0;s<p.length;++s){var m=p[s];m.from<c&&(m.from=c),m.to>h&&(m.to=h),m.from>=m.to?p.splice(s--,1):g+=m.to-m.from}if(g!=h-c||c!=n.showingFrom||h!=n.showingTo){p.sort(function(e,t){return e.from-t.from});var w=document.activeElement;.7*(h-c)>g&&(n.lineDiv.style.display="none"),C(e,c,h,p,f),n.lineDiv.style.display="",document.activeElement!=w&&w.offsetHeight&&w.focus();var x=c!=n.showingFrom||h!=n.showingTo||n.lastSizeC!=n.wrapper.clientHeight;x&&(n.lastSizeC=n.wrapper.clientHeight),n.showingFrom=c,n.showingTo=h,A(e,100);for(var L=n.lineDiv.offsetTop,S=n.lineDiv.firstChild,k;S;S=S.nextSibling)if(S.lineObj){if(Or){var M=S.offsetTop+S.offsetHeight;k=M-L,L=M}else{var T=S.getBoundingClientRect();k=T.bottom-T.top}var N=S.lineObj.height-k;if(2>k&&(k=X(n)),N>.001||-.001>N){Rt(S.lineObj,k);var W=S.lineObj.widgets;if(W)for(var s=0;s<W.length;++s)W[s].height=W[s].node.offsetHeight}}return n.viewOffset=Kt(e,Ft(i,c)),n.mover.style.top=n.viewOffset+"px",d(n,i,r).to>=h&&y(e,[],r),!0}}}function b(e,t){for(var r=0,n=t.length||0;n>r;++r){for(var i=t[r],o=[],l=i.diff||0,s=0,a=e.length;a>s;++s){var u=e[s];i.to<=u.from&&i.diff?o.push({from:u.from+l,to:u.to+l}):i.to<=u.from||i.from>=u.to?o.push(u):(i.from>u.from&&o.push({from:u.from,to:i.from}),i.to<u.to&&o.push({from:i.to+l,to:u.to+l}))}e=o}return e}function x(e){for(var t=e.display,r={},n={},i=t.gutters.firstChild,o=0;i;i=i.nextSibling,++o)r[e.options.gutters[o]]=i.offsetLeft,n[e.options.gutters[o]]=i.offsetWidth;return{fixedPos:m(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function C(e,t,r,n,i){function o(t){var r=t.nextSibling;return Er&&Yr&&e.display.currentWheelTarget==t?(t.style.display="none",t.lineObj=null):t.parentNode.removeChild(t),r}var l=x(e),s=e.display,a=e.options.lineNumbers;n.length||Er&&e.display.currentWheelTarget||gr(s.lineDiv);var u=s.lineDiv,c=u.firstChild,f=n.shift(),h=t;for(e.view.doc.iter(t,r,function(t){if(f&&f.to==h&&(f=n.shift()),ht(t)){if(0!=t.height&&Rt(t,0),t.widgets&&c.previousSibling)for(var r=0;r<t.widgets.length;++r)if(t.widgets[r].showIfHidden){var s=c.previousSibling;if("pre"==s.nodeType){var d=vr("div",null,null,"position: relative");s.parentNode.replaceChild(d,s),d.appendChild(s),s=d}s.appendChild(S(t.widgets[r],s,l))}}else if(f&&f.from<=h&&f.to>h){for(;c.lineObj!=t;)c=o(c);a&&h>=i&&c.lineNumber&&wr(c.lineNumber,g(e.options,h)),c=c.nextSibling}else{var p=L(e,t,h,l);u.insertBefore(p,c),p.lineObj=t}++h});c;)c=o(c)}function L(e,t,r,n){var i=Wt(e,t),o=t.gutterMarkers,l=e.display;if(!(e.options.lineNumbers||o||t.bgClass||t.wrapClass||t.widgets&&t.widgets.length))return i;var s=vr("div",null,t.wrapClass,"position: relative");if(e.options.lineNumbers||o){var a=s.appendChild(vr("div",null,null,"position: absolute; left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px"));if(e.options.fixedGutter&&(s.alignable=[a]),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(s.lineNumber=a.appendChild(vr("div",g(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+l.lineNumInnerWidth+"px"))),o)for(var u=0;u<e.options.gutters.length;++u){var c=e.options.gutters[u],f=o.hasOwnProperty(c)&&o[c];f&&a.appendChild(vr("div",[f],"CodeMirror-gutter-elt","left: "+n.gutterLeft[c]+"px; width: "+n.gutterWidth[c]+"px"))}}if(t.bgClass&&s.appendChild(vr("div"," ",t.bgClass+" CodeMirror-linebackground")),s.appendChild(i),t.widgets)for(var h=0,d=t.widgets;h<d.length;++h){var p=d[h],v=S(p,s,n);p.above?s.insertBefore(v,e.options.lineNumbers&&0!=t.height?a:i):s.appendChild(v)}return Or&&(s.style.zIndex=2),s}function S(e,t,r){var n=vr("div",[e.node],"CodeMirror-linewidget");if(n.widget=e,e.noHScroll){(t.alignable||(t.alignable=[])).push(n);var i=r.wrapperWidth;n.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,n.style.paddingLeft=r.gutterTotalWidth+"px"),n.style.width=i+"px"}return e.coverGutter&&(n.style.zIndex=5,n.style.position="relative",e.noHScroll||(n.style.marginLeft=-r.gutterTotalWidth+"px")),n}function k(e){var t=e.display,r=Te(e.view.sel.from,e.view.sel.to);r||e.options.showCursorWhenSelecting?M(e):t.cursor.style.display=t.otherCursor.style.display="none",r?t.selectionDiv.style.display="none":T(e);var n=V(e,e.view.sel.head,"div"),i=t.wrapper.getBoundingClientRect(),o=t.lineDiv.getBoundingClientRect();t.inputDiv.style.top=Math.max(0,Math.min(t.wrapper.clientHeight-10,n.top+o.top-i.top))+"px",t.inputDiv.style.left=Math.max(0,Math.min(t.wrapper.clientWidth-10,n.left+o.left-i.left))+"px"}function M(e){var t=e.display,r=V(e,e.view.sel.head,"div");t.cursor.style.left=r.left+"px",t.cursor.style.top=r.top+"px",t.cursor.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",t.cursor.style.display="",r.other?(t.otherCursor.style.display="",t.otherCursor.style.left=r.other.left+"px",t.otherCursor.style.top=r.other.top+"px",t.otherCursor.style.height=.85*(r.other.bottom-r.other.top)+"px"):t.otherCursor.style.display="none"}function T(e){function t(e,t,r,n){0>t&&(t=0),l.appendChild(vr("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==r?s-e:r)+"px; height: "+(n-t)+"px"))}function r(r,n,o,l){function u(t){return P(e,{line:r,ch:t},"div",c)}var c=Ft(i,r),f=c.text.length,h=l?1/0:-(1/0);return xr(Gt(c),n||0,null==o?f:o,function(e,r,i){var c=u("rtl"==i?r-1:e),d=u("rtl"==i?e:r-1),p=c.left,v=d.right;d.top-c.top>3&&(t(p,c.top,null,c.bottom),p=a,c.bottom<d.top&&t(p,c.bottom,null,d.top)),null==o&&r==f&&(v=s),null==n&&0==e&&(p=a),h=l?Math.min(d.top,h):Math.max(d.bottom,h),a+1>p&&(p=a),t(p,d.top,v-p,d.bottom)}),h}var n=e.display,i=e.view.doc,o=e.view.sel,l=document.createDocumentFragment(),s=n.lineSpace.offsetWidth,a=E(e.display);if(o.from.line==o.to.line)r(o.from.line,o.from.ch,o.to.ch);else{for(var u=Ft(i,o.from.line),c=u,f,h=[o.from.line,o.from.ch],d;f=ct(c);){var p=f.find();if(h.push(p.from.ch,p.to.line,p.to.ch),p.to.line==o.to.line){h.push(o.to.ch),d=!0;break}c=Ft(i,p.to.line)}if(d)for(var v=0;v<h.length;v+=3)r(h[v],h[v+1],h[v+2]);else{var g,m,w=Ft(i,o.to.line);g=o.from.ch?r(o.from.line,o.from.ch,null,!1):Kt(e,u)-n.viewOffset,m=o.to.ch?r(o.to.line,ut(w)?null:0,o.to.ch,!0):Kt(e,w)-n.viewOffset,m>g&&t(a,g,null,m)}}mr(n.selectionDiv,l),n.selectionDiv.style.display=""}function N(e){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursor.style.visibility=t.otherCursor.style.visibility="",t.blinker=setInterval(function(){t.cursor.offsetHeight&&(t.cursor.style.visibility=t.otherCursor.style.visibility=(r=!r)?"":"hidden")},e.options.cursorBlinkRate)}function A(e,t){e.view.mode.startState&&e.view.frontier<e.display.showingTo&&e.view.highlight.set(t,hr(W,e))}function W(e){var t=e.view,r=t.doc;if(!(t.frontier>=e.display.showingTo)){var n=+new Date+e.options.workTime,i=_e(t.mode,O(e,t.frontier)),o=[],l;r.iter(t.frontier,Math.min(r.size,e.display.showingTo+500),function(r){if(t.frontier>=e.display.showingFrom){var s=r.styles;r.styles=Mt(e,r,i);for(var a=!s||s.length!=r.styles.length,u=0;!a&&u<s.length;++u)a=s[u]!=r.styles[u];a&&(l&&l.end==t.frontier?l.end++:o.push(l={start:t.frontier,end:t.frontier+1})),r.stateAfter=_e(t.mode,i)}else Nt(e,r,i),r.stateAfter=t.frontier%5==0?_e(t.mode,i):null;return++t.frontier,+new Date>n?(A(e,e.options.workDelay),!0):void 0}),o.length&&j(e,function(){for(var e=0;e<o.length;++e)Z(this,o[e].start,o[e].end)})()}}function D(e,t){for(var r,n,i=e.view.doc,o=t,l=t-100;o>l;--o){if(0==o)return 0;var s=Ft(i,o-1);if(s.stateAfter)return o;var a=lr(s.text,null,e.options.tabSize);(null==n||r>a)&&(n=o-1,r=a)}return n}function O(e,t){var r=e.view;if(!r.mode.startState)return!0;var n=D(e,t),i=n&&Ft(r.doc,n-1).stateAfter;return i=i?_e(r.mode,i):je(r.mode),r.doc.iter(n,t,function(o){Nt(e,o,i);var l=n==t-1||n%5==0||n>=r.showingFrom&&n<r.showingTo;o.stateAfter=l?_e(r.mode,i):null,++n}),i}function H(e){return e.lineSpace.offsetTop}function E(e){var t=mr(e.measure,vr("pre")).appendChild(vr("span","x"));return t.offsetLeft}function z(e,t,r,n){var i=-1;n=n||I(e,t);for(var o=r;;o+=i){var l=n[o];if(l)break;0>i&&0==o&&(i=1)}return{left:r>o?l.right:l.left,right:o>r?l.left:l.right,top:l.top,bottom:l.bottom}}function I(e,t){for(var r=e.display,n=e.display.measureLineCache,i=0;i<n.length;++i){var o=n[i];if(o.text==t.text&&o.markedSpans==t.markedSpans&&r.scroller.clientWidth==o.width)return o.measure}var l=F(e,t),o={text:t.text,width:r.scroller.clientWidth,markedSpans:t.markedSpans,measure:l};return 16==n.length?n[++r.measureLineCachePos%16]=o:n.push(o),l}function F(e,t){var r=e.display,n=fr(t.text.length),i=Wt(e,t,n);if(Dr&&!Or&&!e.options.lineWrapping&&i.childNodes.length>100){for(var o=document.createDocumentFragment(),l=10,s=i.childNodes.length,a=0,u=Math.ceil(s/l);u>a;++a){for(var c=vr("div",null,null,"display: inline-block"),f=0;l>f&&s;++f)c.appendChild(i.firstChild),--s;o.appendChild(c)}i.appendChild(o)}mr(r.measure,i);for(var h=r.lineDiv.getBoundingClientRect(),d=[],p=fr(t.text.length),v=i.offsetHeight,a=0,g;a<n.length;++a)if(g=n[a]){for(var m=g.getBoundingClientRect(),w=Math.max(0,m.top-h.top),y=Math.min(m.bottom-h.top,v),f=0;f<d.length;f+=2){var b=d[f],x=d[f+1];if(!(b>y||w>x)&&(w>=b&&x>=y||b>=w&&y>=x||Math.min(y,x)-Math.max(w,b)>=y-w>>1)){d[f]=Math.min(w,b),d[f+1]=Math.max(y,x);break}}f==d.length&&d.push(w,y),p[a]={left:m.left-h.left,right:m.right-h.left,top:f}}for(var a=0,g;a<p.length;++a)if(g=p[a]){var C=g.top;g.top=d[C],g.bottom=d[C+1]}return p}function R(e){e.display.measureLineCache.length=e.display.measureLineCachePos=0,e.display.cachedCharWidth=e.display.cachedTextHeight=null,e.view.maxLineChanged=!0}function B(e,t,r,n){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var o=bt(t.widgets[i]);r.top+=o,r.bottom+=o}if("line"==n)return r;n||(n="local");var l=Kt(e,t);if("local"!=n&&(l-=e.display.viewOffset),"page"==n){var s=e.display.lineSpace.getBoundingClientRect();l+=s.top+(window.pageYOffset||(document.documentElement||document.body).scrollTop);var a=s.left+(window.pageXOffset||(document.documentElement||document.body).scrollLeft);r.left+=a,r.right+=a}return r.top+=l,r.bottom+=l,r}function P(e,t,r,n){return n||(n=Ft(e.view.doc,t.line)),B(e,n,z(e,n,t.ch),r)}function V(e,t,r,n,i){function o(t,o){var l=z(e,n,t,i);return o?l.left=l.right:l.right=l.left,B(e,n,l,r)}n=n||Ft(e.view.doc,t.line),i||(i=I(e,n));var l=Gt(n),s=t.ch;if(!l)return o(s);for(var a,u,c=l[0].level,f=0;f<l.length;++f){var h=l[f],d=h.level%2,p,v;if(h.from<s&&h.to>s)return o(s,d);var g=d?h.to:h.from,m=d?h.from:h.to;if(g==s)v=f&&h.level<(p=l[f-1]).level?o(p.level%2?p.from:p.to-1,!0):o(d&&h.from!=h.to?s-1:s),d==c?a=v:u=v;else if(m==s){var p=f<l.length-1&&l[f+1];if(!d&&p&&p.from==p.to)continue;v=p&&h.level<p.level?o(p.level%2?p.to-1:p.from):o(d?s:s-1,!0),d==c?a=v:u=v}}return c&&!s&&(u=o(l[0].to-1)),a?(u&&(a.other=u),a):u}function K(e,t,r){var n=e.view.doc;if(r+=e.display.viewOffset,0>r)return{line:0,ch:0,outside:!0};var i=Vt(n,r);if(i>=n.size)return{line:n.size-1,ch:Ft(n,n.size-1).text.length};for(0>t&&(t=0);;){var o=Ft(n,i),l=G(e,o,i,t,r),s=ct(o),a=s&&s.find();if(!(s&&l.ch>=a.from.ch))return l;i=a.to.line}}function G(e,t,r,n,i){function o(n){var i=V(e,{line:r,ch:n},"line",t,u);return s=!0,l>i.bottom?Math.max(0,i.left-a):l<i.top?i.left+a:(s=!1,i.left)}var l=i-Kt(e,t),s=!1,a=e.display.wrapper.clientWidth,u=I(e,t),c=Gt(t),f=t.text.length,h=Sr(t),d=kr(t),p=E(e.display),v=o(d);if(n>v)return{line:r,ch:d,outside:s};for(;;){if(c?d==h||d==Nr(t,h,1):1>=d-h){for(var g=v-n>n-p,m=g?h:d;Cn.test(t.text.charAt(m));)++m;return{line:r,ch:m,after:g,outside:s}}var w=Math.ceil(f/2),y=h+w;if(c){y=h;for(var b=0;w>b;++b)y=Nr(t,y,1)}var x=o(y);x>n?(d=y,v=x,s&&(v+=1e3),f-=w):(h=y,p=x,f=w)}}function X(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==qr){qr=vr("pre");for(var t=0;49>t;++t)qr.appendChild(document.createTextNode("x")),qr.appendChild(vr("br"));qr.appendChild(document.createTextNode("x"))}mr(e.measure,qr);var r=qr.offsetHeight/50;return r>3&&(e.cachedTextHeight=r),gr(e.measure),r||1}function Y(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=vr("span","x"),r=vr("pre",[t]);mr(e.measure,r);var n=t.offsetWidth;return n>2&&(e.cachedCharWidth=n),n||10}function U(e){e.curOp?++e.curOp.depth:e.curOp={depth:1,changes:[],delayedCallbacks:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,updateMaxLine:!1,id:++e.nextOpId}}function _(e){var t=e.curOp;if(!--t.depth){e.curOp=null;var r=e.view,n=e.display;if(t.updateMaxLine&&c(r),r.maxLineChanged&&!e.options.lineWrapping){var i=z(e,r.maxLine,r.maxLine.text.length).right;n.sizer.style.minWidth=i+3+wn+"px",r.maxLineChanged=!1;var o=Math.max(0,n.sizer.offsetLeft+n.sizer.offsetWidth-n.scroller.clientWidth);o<r.scrollLeft&&fe(e,Math.min(n.scroller.scrollLeft,o),!0)}var l,s;if(t.selectionChanged){var a=V(e,r.sel.head);l=Pe(e,a.left,a.top,a.left,a.bottom)}(t.changes.length||l&&null!=l.scrollTop)&&(s=w(e,t.changes,l&&l.scrollTop)),!s&&t.selectionChanged&&k(e),l&&Fe(e),t.selectionChanged&&N(e),r.focused&&t.updateInput&&ee(e,t.userSelChange),t.textChanged&&rr(e,"change",e,t.textChanged),t.selectionChanged&&rr(e,"cursorActivity",e);for(var u=0;u<t.delayedCallbacks.length;++u)t.delayedCallbacks[u](e)}}function j(e,t){return function(){var r=e||this;U(r);try{var n=t.apply(r,arguments)}finally{_(r)}return n}}function Z(e,t,r,n){e.curOp.changes.push({from:t,to:r,diff:n})}function q(e){e.view.pollingFast||e.display.poll.set(e.options.pollInterval,function(){Q(e),e.view.focused&&q(e)})}function J(e){function t(){var n=Q(e);n||r?(e.display.pollingFast=!1,q(e)):(r=!0,e.display.poll.set(60,t))}var r=!1;e.display.pollingFast=!0,e.display.poll.set(20,t)}function Q(e){var t=e.display.input,r=e.display.prevInput,n=e.view,i=n.sel;if(!n.focused||Nn(t)||re(e))return!1;var o=t.value;if(o==r&&Te(i.from,i.to))return!1;U(e),n.sel.shift=!1;for(var l=0,s=Math.min(r.length,o.length);s>l&&r[l]==o[l];)++l;var a=i.from,u=i.to;l<r.length?a={line:a.line,ch:a.ch-(r.length-l)}:n.overwrite&&Te(a,u)&&!e.display.pasteIncoming&&(u={line:u.line,ch:Math.min(Ft(e.view.doc,u.line).text.length,u.ch+(o.length-l))});var c=e.curOp.updateInput;return Ce(e,a,u,Tn(o.slice(l)),"end",e.display.pasteIncoming?"paste":"input",{from:a,to:u}),e.curOp.updateInput=c,o.length>1e3?t.value=e.display.prevInput="":e.display.prevInput=o,_(e),e.display.pasteIncoming=!1,!0}function ee(e,t){var r=e.view,n,i;Te(r.sel.from,r.sel.to)?t&&(e.display.prevInput=e.display.input.value=""):(e.display.prevInput="",n=An&&(r.sel.to.line-r.sel.from.line>100||(i=e.getSelection()).length>1e3),n?e.display.input.value="-":e.display.input.value=i||e.getSelection(),r.focused&&ur(e.display.input)),e.display.inaccurateSelection=n}function te(e){"nocursor"==e.options.readOnly||!Dr&&document.activeElement==e.display.input||e.display.input.focus()}function re(e){return e.options.readOnly||e.view.cantEdit}function ne(e){function t(){e.view.focused&&setTimeout(hr(te,e),0)}function r(){o.cachedCharWidth=o.cachedTextHeight=null,R(e),w(e,!0)}function n(t){e.options.onDragEvent&&e.options.onDragEvent(e,_t(t))||$t(t)}function i(){o.inaccurateSelection&&(o.prevInput="",o.inaccurateSelection=!1,o.input.value=e.getSelection(),ur(o.input))}var o=e.display;er(o.scroller,"mousedown",j(e,le)),er(o.scroller,"dblclick",j(e,jt)),er(o.lineSpace,"selectstart",function(e){ie(o,e)||jt(e)}),Wr||er(o.scroller,"contextmenu",function(t){xe(e,t)}),er(o.scroller,"scroll",function(){ce(e,o.scroller.scrollTop),fe(e,o.scroller.scrollLeft,!0),rr(e,"scroll",e)}),er(o.scrollbarV,"scroll",function(){ce(e,o.scrollbarV.scrollTop)}),er(o.scrollbarH,"scroll",function(){fe(e,o.scrollbarH.scrollLeft)}),er(o.scroller,"mousewheel",function(t){he(e,t)}),er(o.scroller,"DOMMouseScroll",function(t){he(e,t)}),er(o.scrollbarH,"mousedown",t),er(o.scrollbarV,"mousedown",t),er(o.wrapper,"scroll",function(){o.wrapper.scrollTop=o.wrapper.scrollLeft=0}),window.registered||(window.registered=0),++window.registered,er(window,"resize",r),setTimeout(function l(){for(var e=o.wrapper.parentNode;e&&e!=document.body;e=e.parentNode);e?setTimeout(l,5e3):(--window.registered,tr(window,"resize",r))},5e3),er(o.input,"keyup",j(e,function(t){e.options.onKeyEvent&&e.options.onKeyEvent(e,_t(t))||16==Qt(t,"keyCode")&&(e.view.sel.shift=!1)})),er(o.input,"input",hr(J,e)),er(o.input,"keydown",j(e,me)),er(o.input,"keypress",j(e,we)),er(o.input,"focus",hr(ye,e)),er(o.input,"blur",hr(be,e)),e.options.dragDrop&&(er(o.scroller,"dragstart",function(t){ue(e,t)}),er(o.scroller,"dragenter",n),er(o.scroller,"dragover",n),er(o.scroller,"drop",j(e,se))),er(o.scroller,"paste",function(t){ie(o,t)||(te(e),J(e))}),er(o.input,"paste",function(){o.pasteIncoming=!0,J(e)}),er(o.input,"cut",i),er(o.input,"copy",i),Br&&er(o.sizer,"mouseup",function(){document.activeElement==o.input&&o.input.blur(),te(e)})}function ie(e,t){for(var r=qt(t);r!=e.wrapper;r=r.parentNode){if(!r)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(r.className)||r.parentNode==e.sizer&&r!=e.mover)return!0}}function oe(e,t,r){var n=e.display;if(!r){var i=qt(t);if(i==n.scrollbarH||i==n.scrollbarH.firstChild||i==n.scrollbarV||i==n.scrollbarV.firstChild||i==n.scrollbarFiller)return null}var o,l,s=n.lineSpace.getBoundingClientRect();try{o=t.clientX,l=t.clientY}catch(t){return null}return K(e,o-s.left,l-s.top)}function le(e){function t(e){if("single"==f)return void He(i,De(a,u),e);if(g=De(a,g),m=De(a,m),"double"==f){var t=Xe(Ft(a,e.line).text,e);Ne(e,g)?He(i,t.from,m):He(i,g,t.to)}else"triple"==f&&(Ne(e,g)?He(i,m,De(a,{line:e.line,ch:0})):He(i,g,De(a,{line:e.line+1,ch:0})))}function r(e){var n=++y,s=oe(i,e,!0);if(s)if(Te(s,p)){var u=e.clientY<w.top?-20:e.clientY>w.bottom?20:0;u&&setTimeout(j(i,function(){y==n&&(o.scroller.scrollTop+=u,r(e))}),50)}else{l.focused||ye(i),p=s,t(s);var c=d(o,a);(s.line>=c.to||s.line<c.from)&&setTimeout(j(i,function(){y==n&&r(e)}),150)}}function n(e){y=1/0;var r=oe(i,e);r&&t(r),jt(e),te(i),tr(document,"mousemove",b),tr(document,"mouseup",x)}var i=this,o=i.display,l=i.view,s=l.sel,a=l.doc;if(s.shift=Qt(e,"shiftKey"),ie(o,e))return void(Er||(o.scroller.draggable=!1,setTimeout(function(){o.scroller.draggable=!0},100)));if(!ae(i,e)){var u=oe(i,e);switch(Jt(e)){case 3:return void(Wr&&xe.call(i,i,e));case 2:return u&&He(i,u),setTimeout(hr(te,i),20),void jt(e)}if(!u)return void(qt(e)==o.scroller&&jt(e));l.focused||ye(i);var c=+new Date,f="single";if(Qr&&Qr.time>c-400&&Te(Qr.pos,u))f="triple",jt(e),setTimeout(hr(te,i),20),Ye(i,u.line);else if(Jr&&Jr.time>c-400&&Te(Jr.pos,u)){f="double",Qr={time:c,pos:u},jt(e);var h=Xe(Ft(a,u.line).text,u);He(i,h.from,h.to)}else Jr={time:c,pos:u};var p=u;if(i.options.dragDrop&&Ln&&!re(i)&&!Te(s.from,s.to)&&!Ne(u,s.from)&&!Ne(s.to,u)&&"single"==f){var v=j(i,function(t){Er&&(o.scroller.draggable=!1),l.draggingText=!1,tr(document,"mouseup",v),tr(o.scroller,"drop",v),Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)<10&&(jt(t),He(i,u),te(i))});return Er&&(o.scroller.draggable=!0),l.draggingText=v,o.scroller.dragDrop&&o.scroller.dragDrop(),er(document,"mouseup",v),void er(o.scroller,"drop",v)}jt(e),"single"==f&&He(i,De(a,u));var g=s.from,m=s.to,w=o.wrapper.getBoundingClientRect(),y=0,b=j(i,function(e){Dr||Jt(e)?r(e):n(e)}),x=j(i,n);er(document,"mousemove",b),er(document,"mouseup",x)}}function se(e){var t=this;if(!(ie(t.display,e)||t.options.onDragEvent&&t.options.onDragEvent(t,_t(e)))){jt(e);var r=oe(t,e,!0),n=e.dataTransfer.files;if(r&&!re(t))if(n&&n.length&&window.FileReader&&window.File)for(var i=n.length,o=Array(i),l=0,s=function(e,n){var s=new FileReader;s.onload=function(){o[n]=s.result,++l==i&&(r=De(t.view.doc,r),j(t,function(){var e=Me(t,o.join(""),r,r,"paste");Ee(t,r,e)})())},s.readAsText(e)},a=0;i>a;++a)s(n[a],a);else{if(t.view.draggingText&&!Ne(r,t.view.sel.from)&&!Ne(t.view.sel.to,r))return t.view.draggingText(e),void setTimeout(hr(te,t),20);try{var o=e.dataTransfer.getData("Text");if(o){var u=t.view.sel.from,c=t.view.sel.to;Ee(t,r,r),t.view.draggingText&&Me(t,"",u,c,"paste"),t.replaceSelection(o,null,"paste"),te(t),ye(t)}}catch(e){}}}}function ae(e,t){var r=e.display;try{var n=t.clientX,i=t.clientY}catch(t){return!1}if(n>=Math.floor(r.gutters.getBoundingClientRect().right))return!1;if(jt(t),!ir(e,"gutterClick"))return!0;var o=r.lineDiv.getBoundingClientRect();if(i>o.bottom)return!0;i-=o.top-r.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var s=r.gutters.childNodes[l];if(s&&s.getBoundingClientRect().right>=n){var a=Vt(e.view.doc,i),u=e.options.gutters[l];nr(e,e,"gutterClick",e,a,u,t);break}}return!0}function ue(e,t){if(!ie(e.display,t)){var r=e.getSelection();if(t.dataTransfer.setData("Text",r),t.dataTransfer.setDragImage&&!Rr){var n=vr("img",null,null,"position: fixed; left: 0; top: 0;");Fr&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),Fr&&n.parentNode.removeChild(n)}}}function ce(e,t){Math.abs(e.view.scrollTop-t)<2||(e.view.scrollTop=t,Wr||w(e,[],t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbarV.scrollTop!=t&&(e.display.scrollbarV.scrollTop=t),Wr&&w(e,[]))}function fe(e,t,r){(r?t==e.view.scrollLeft:Math.abs(e.view.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.view.scrollLeft=t,p(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t))}function he(e,t){var r=t.wheelDeltaX,n=t.wheelDeltaY;if(null==r&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(r=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta),n&&Yr&&Er)for(var i=t.target;i!=l;i=i.parentNode)if(i.lineObj){e.display.currentWheelTarget=i;break}var o=e.display,l=o.scroller;if(r&&!Wr&&!Fr&&null!=tn)return n&&ce(e,Math.max(0,Math.min(l.scrollTop+n*tn,l.scrollHeight-l.clientHeight))),fe(e,Math.max(0,Math.min(l.scrollLeft+r*tn,l.scrollWidth-l.clientWidth))),jt(t),void(o.wheelStartX=null);if(n&&null!=tn){var s=n*tn,a=e.view.scrollTop,u=a+o.wrapper.clientHeight;0>s?a=Math.max(0,a+s-50):u=Math.min(e.view.doc.height,u+s+50),w(e,[],{top:a,bottom:u})}20>en&&(null==o.wheelStartX?(o.wheelStartX=l.scrollLeft,o.wheelStartY=l.scrollTop,o.wheelDX=r,o.wheelDY=n,setTimeout(function(){if(null!=o.wheelStartX){var e=l.scrollLeft-o.wheelStartX,t=l.scrollTop-o.wheelStartY,r=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,r&&(tn=(tn*en+r)/(en+1),++en)}},200)):(o.wheelDX+=r,o.wheelDY+=n))}function de(e,t,r){if("string"==typeof t&&(t=dn[t],!t))return!1;e.display.pollingFast&&Q(e)&&(e.display.pollingFast=!1);var n=e.view,i=n.sel.shift;try{re(e)&&(n.suppressEdits=!0),r&&(n.sel.shift=!1),t(e)}catch(o){if(o!=yn)throw o;return!1}finally{n.sel.shift=i,n.suppressEdits=!1}return!0}function pe(e){var t=e.view.keyMaps.slice(0);return t.push(e.options.keyMap),e.options.extraKeys&&t.unshift(e.options.extraKeys),t}function ve(e,t){function r(){s=!0}var n=Ze(e.options.keyMap),i=n.auto;clearTimeout(rn),i&&!qe(t)&&(rn=setTimeout(function(){Ze(e.options.keyMap)==n&&(e.options.keyMap=i.call?i.call(null,e):i)},50));var o=Wn[Qt(t,"keyCode")],l=!1;if(null==o||t.altGraphKey)return!1;Qt(t,"altKey")&&(o="Alt-"+o),Qt(t,jr?"metaKey":"ctrlKey")&&(o="Ctrl-"+o),Qt(t,jr?"ctrlKey":"metaKey")&&(o="Cmd-"+o);var s=!1,a=pe(e);return l=Qt(t,"shiftKey")?$e("Shift-"+o,a,function(t){
return de(e,t,!0)},r)||$e(o,a,function(t){return"string"==typeof t&&/^go[A-Z]/.test(t)?de(e,t):void 0},r):$e(o,a,function(t){return de(e,t)},r),s&&(l=!1),l&&(jt(t),N(e),Hr&&(t.oldKeyCode=t.keyCode,t.keyCode=0)),l}function ge(e,t,r){var n=$e("'"+r+"'",pe(e),function(t){return de(e,t,!0)});return n&&(jt(t),N(e)),n}function me(e){var t=this;if(t.view.focused||ye(t),Dr&&27==e.keyCode&&(e.returnValue=!1),!t.options.onKeyEvent||!t.options.onKeyEvent(t,_t(e))){var r=Qt(e,"keyCode");t.view.sel.shift=16==r||Qt(e,"shiftKey");var n=ve(t,e);Fr&&(nn=n?r:null,n||88!=r||An||!Qt(e,Yr?"metaKey":"ctrlKey")||t.replaceSelection(""))}}function we(e){var t=this;if(!t.options.onKeyEvent||!t.options.onKeyEvent(t,_t(e))){var r=Qt(e,"keyCode"),n=Qt(e,"charCode");if(Fr&&r==nn)return nn=null,void jt(e);if(!(Fr&&(!e.which||e.which<10)||Br)||!ve(t,e)){var i=String.fromCharCode(null==n?r:n);this.options.electricChars&&this.view.mode.electricChars&&this.options.smartIndent&&!re(this)&&this.view.mode.electricChars.indexOf(i)>-1&&setTimeout(j(t,function(){Ve(t,t.view.sel.to.line,"smart")}),75),ge(t,e,i)||J(t)}}}function ye(e){"nocursor"!=e.options.readOnly&&(e.view.focused||(rr(e,"focus",e),e.view.focused=!0,-1==e.display.scroller.className.search(/\bCodeMirror-focused\b/)&&(e.display.scroller.className+=" CodeMirror-focused"),ee(e,!0)),q(e),N(e))}function be(e){e.view.focused&&(rr(e,"blur",e),e.view.focused=!1,e.display.scroller.className=e.display.scroller.className.replace(" CodeMirror-focused","")),clearInterval(e.display.blinker),setTimeout(function(){e.view.focused||(e.view.sel.shift=!1)},150)}function xe(e,t){function r(){if(n.inputDiv.style.position="relative",n.input.style.cssText=s,Hr&&(n.scrollbarV.scrollTop=n.scroller.scrollTop=l),q(e),null!=n.input.selectionStart){clearTimeout(on);var t=n.input.value=" "+(Te(i.from,i.to)?"":n.input.value),r=0;n.prevInput=" ",n.input.selectionStart=1,n.input.selectionEnd=t.length,on=setTimeout(function o(){" "==n.prevInput&&0==n.input.selectionStart?j(e,dn.selectAll)(e):r++<10?on=setTimeout(o,500):ee(e)},200)}}var n=e.display;if(!ie(n,t)){var i=e.view.sel,o=oe(e,t),l=n.scroller.scrollTop;if(o&&!Fr){(Te(i.from,i.to)||Ne(o,i.from)||!Ne(o,i.to))&&j(e,Ee)(e,o,o);var s=n.input.style.cssText;n.inputDiv.style.position="absolute",n.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",te(e),ee(e,!0),Te(i.from,i.to)&&(n.input.value=n.prevInput=" "),Wr?($t(t),er(window,"mouseup",function a(){tr(window,"mouseup",a),setTimeout(r,20)})):setTimeout(r,50)}}}function Ce(e,t,r,n,i,o){var l=Zr&&st(e.view.doc,t,r);if(!l)return Le(e,t,r,n,i,o);for(var s=l.length-1;s>=1;--s)Le(e,l[s].from,l[s].to,[""],o);return l.length?Le(e,l[0].from,l[0].to,n,i,o):void 0}function Le(e,t,r,n,i,o){if(!e.view.suppressEdits){var l=e.view,s=l.doc,a=[];s.iter(t.line,r.line+1,function(e){a.push(gt(e.text,e.markedSpans))});var u=l.sel.from,c=l.sel.to,f=lt(vt(a[0]),vt(ar(a)),t.ch,r.ch,n),h=ke(e,t,r,f,i,o);return l.history&&Yt(e,t.line,n.length,a,o,u,c,l.sel.from,l.sel.to),h}}function Se(e,t){var r=e.view.doc,n=e.view.history,i=("undo"==t?n.done:n.undone).pop();if(i){for(var o={events:[],fromBefore:i.fromAfter,toBefore:i.toAfter,fromAfter:i.fromBefore,toAfter:i.toBefore},l=i.events.length-1;l>=0;l-=1){n.dirtyCounter+="undo"==t?-1:1;var s=i.events[l],a=[],u=s.start+s.added;r.iter(s.start,u,function(e){a.push(gt(e.text,e.markedSpans))}),o.events.push({start:s.start,added:s.old.length,old:a});var c=l?null:{from:i.fromBefore,to:i.toBefore};ke(e,{line:s.start,ch:0},{line:u-1,ch:Ft(r,u-1).text.length},s.old,c,t)}("undo"==t?n.undone:n.done).push(o)}}function ke(e,t,r,n,i,o){var l=e.view,s=l.doc,a=e.display;if(!l.suppressEdits){var c=r.line-t.line,f=Ft(s,t.line),h=Ft(s,r.line),d=!1,p=t.line;e.options.lineWrapping||(p=Bt(ft(s,f)),s.iter(p,r.line+1,function(e){return e==l.maxLine?(d=!0,!0):void 0}));var v=ar(n),g=X(a);if(0==t.ch&&0==r.ch&&""==pt(v)){for(var m=[],w=0,y=n.length-1;y>w;++w)m.push(Ct(pt(n[w]),vt(n[w]),g));Lt(e,h,h.text,vt(v)),c&&s.remove(t.line,c,e),m.length&&s.insert(t.line,m)}else if(f==h)if(1==n.length)Lt(e,f,f.text.slice(0,t.ch)+pt(n[0])+f.text.slice(r.ch),vt(n[0]));else{for(var m=[],w=1,y=n.length-1;y>w;++w)m.push(Ct(pt(n[w]),vt(n[w]),g));m.push(Ct(pt(v)+f.text.slice(r.ch),vt(v),g)),Lt(e,f,f.text.slice(0,t.ch)+pt(n[0]),vt(n[0])),s.insert(t.line+1,m)}else if(1==n.length)Lt(e,f,f.text.slice(0,t.ch)+pt(n[0])+h.text.slice(r.ch),vt(n[0])),s.remove(t.line+1,c,e);else{var m=[];Lt(e,f,f.text.slice(0,t.ch)+pt(n[0]),vt(n[0])),Lt(e,h,pt(v)+h.text.slice(r.ch),vt(v));for(var w=1,y=n.length-1;y>w;++w)m.push(Ct(pt(n[w]),vt(n[w]),g));c>1&&s.remove(t.line+1,c-1,e),s.insert(t.line+1,m)}if(e.options.lineWrapping){var b=Math.max(5,a.scroller.clientWidth/Y(a)-3);s.iter(t.line,t.line+n.length,function(e){if(0!=e.height){var t=(Math.ceil(e.text.length/b)||1)*g;t!=e.height&&Rt(e,t)}})}else s.iter(p,t.line+n.length,function(e){var t=u(s,e);t>l.maxLineLength&&(l.maxLine=e,l.maxLineLength=t,l.maxLineChanged=!0,d=!1)}),d&&(e.curOp.updateMaxLine=!0);l.frontier=Math.min(l.frontier,t.line),A(e,400);var x=n.length-c-1;if(Z(e,t.line,r.line+1,x),ir(e,"change")){for(var w=0;w<n.length;++w)"string"!=typeof n[w]&&(n[w]=n[w].text);var C={from:t,to:r,text:n,origin:o};if(e.curOp.textChanged){for(var L=e.curOp.textChanged;L.next;L=L.next);L.next=C}else e.curOp.textChanged=C}var S,k,M={line:t.line+n.length-1,ch:pt(v).length+(1==n.length?t.ch:0)};if(i&&"string"!=typeof i)i.from?(S=i.from,k=i.to):S=k=i;else if("end"==i)S=k=M;else if("start"==i)S=k=t;else if("around"==i)S=t,k=M;else{var T=function(e){if(Ne(e,t))return e;if(!Ne(r,e))return M;var n=e.line+x,i=e.ch;return e.line==r.line&&(i+=pt(v).length-(r.ch-(r.line==t.line?t.ch:0))),{line:n,ch:i}};S=T(l.sel.from),k=T(l.sel.to)}return Ee(e,S,k,null,!0),M}}function Me(e,t,r,n,i){if(n||(n=r),Ne(n,r)){var o=n;n=r,r=o}return Ce(e,r,n,Tn(t),null,i)}function Te(e,t){return e.line==t.line&&e.ch==t.ch}function Ne(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function Ae(e){return{line:e.line,ch:e.ch}}function We(e,t){return Math.max(0,Math.min(t,e.size-1))}function De(e,t){if(t.line<0)return{line:0,ch:0};if(t.line>=e.size)return{line:e.size-1,ch:Ft(e,e.size-1).text.length};var r=t.ch,n=Ft(e,t.line).text.length;return null==r||r>n?{line:t.line,ch:n}:0>r?{line:t.line,ch:0}:t}function Oe(e,t){return t>=0&&t<e.size}function He(e,t,r,n){var i=e.view.sel;if(i.shift||i.extend){var o=i.anchor;if(r){var l=Ne(t,o);l!=Ne(r,o)?(o=t,t=r):l!=Ne(t,r)&&(t=r)}Ee(e,o,t,n)}else Ee(e,t,r||t,n);e.curOp.userSelChange=!0}function Ee(e,t,r,n,i){e.view.goalColumn=null;var o=e.view.sel;if((i||!Te(t,o.anchor))&&(t=Ie(e,t,n,"push"!=i)),(i||!Te(r,o.head))&&(r=Ie(e,r,n,"push"!=i)),!Te(o.anchor,t)||!Te(o.head,r)){o.anchor=t,o.head=r;var l=Ne(r,t);o.from=l?r:t,o.to=l?t:r,e.curOp.updateInput=!0,e.curOp.selectionChanged=!0}}function ze(e){Ee(e,e.view.sel.from,e.view.sel.to,null,"push")}function Ie(e,t,r,n){var i=e.view.doc,o=!1,l=t,s=r||1;e.view.cantEdit=!1;e:for(;;){var a=Ft(i,l.line),u;if(a.markedSpans){for(var c=0;c<a.markedSpans.length;++c){var f=a.markedSpans[c],h=f.marker;if((null==f.from||(h.inclusiveLeft?f.from<=l.ch:f.from<l.ch))&&(null==f.to||(h.inclusiveRight?f.to>=l.ch:f.to>l.ch))){if(n&&h.clearOnEnter){(u||(u=[])).push(h);continue}if(!h.atomic)continue;var d=h.find()[0>s?"from":"to"];if(Te(d,l)&&(d.ch+=s,d.ch<0?d=d.line?De(i,{line:d.line-1}):null:d.ch>a.text.length&&(d=d.line<i.size-1?{line:d.line+1,ch:0}:null),!d)){if(o)return n?(e.view.cantEdit=!0,{line:0,ch:0}):Ie(e,t,r,!0);o=!0,d=t,s=-s}l=d;continue e}}if(u)for(var c=0;c<u.length;++c)u[c].clear()}return l}}function Fe(e){var t=e.view,r=Re(e,t.sel.head);if(t.focused){var n=e.display,i=n.sizer.getBoundingClientRect(),o=null;if(r.top+i.top<0?o=!0:r.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(o=!1),null!=o&&!Kr){var l="none"==n.cursor.style.display;l&&(n.cursor.style.display="",n.cursor.style.left=r.left+"px",n.cursor.style.top=r.top-n.viewOffset+"px"),n.cursor.scrollIntoView(o),l&&(n.cursor.style.display="none")}}}function Re(e,t){for(;;){var r=!1,n=V(e,t),i=Pe(e,n.left,n.top,n.left,n.bottom),o=e.view.scrollTop,l=e.view.scrollLeft;if(null!=i.scrollTop&&(ce(e,i.scrollTop),Math.abs(e.view.scrollTop-o)>1&&(r=!0)),null!=i.scrollLeft&&(fe(e,i.scrollLeft),Math.abs(e.view.scrollLeft-l)>1&&(r=!0)),!r)return n}}function Be(e,t,r,n,i){var o=Pe(e,t,r,n,i);null!=o.scrollTop&&ce(e,o.scrollTop),null!=o.scrollLeft&&fe(e,o.scrollLeft)}function Pe(e,t,r,n,i){var o=e.display,l=H(o);r+=l,i+=l;var s=o.scroller.clientHeight-wn,a=o.scroller.scrollTop,u={},c=e.view.doc.height+2*l,f=l+10>r,h=i+l>c-10;a>r?u.scrollTop=f?0:Math.max(0,r):i>a+s&&(u.scrollTop=(h?c:i)-s);var d=o.scroller.clientWidth-wn,p=o.scroller.scrollLeft;t+=o.gutters.offsetWidth,n+=o.gutters.offsetWidth;var v=o.gutters.offsetWidth,g=v+10>t;return p+v>t||g?(g&&(t=0),u.scrollLeft=Math.max(0,t-10-v)):n>d+p-3&&(u.scrollLeft=n+10-d),u}function Ve(e,t,r,n){var i=e.view.doc;if(r||(r="add"),"smart"==r)if(e.view.mode.indent)var o=O(e,t);else r="prev";var l=e.options.tabSize,s=Ft(i,t),a=lr(s.text,null,l),u=s.text.match(/^\s*/)[0],c;if("smart"==r&&(c=e.view.mode.indent(o,s.text.slice(u.length),s.text),c==yn)){if(!n)return;r="prev"}"prev"==r?c=t?lr(Ft(i,t-1).text,null,l):0:"add"==r?c=a+e.options.indentUnit:"subtract"==r&&(c=a-e.options.indentUnit),c=Math.max(0,c);var f="",h=0;if(e.options.indentWithTabs)for(var d=Math.floor(c/l);d;--d)h+=l,f+="	";c>h&&(f+=sr(c-h)),f!=u&&Me(e,f,{line:t,ch:0},{line:t,ch:u.length},"input"),s.stateAfter=null}function Ke(e,t,r){var n=t,i=t,o=e.view.doc;return"number"==typeof t?i=Ft(o,We(o,t)):n=Bt(t),null==n?null:r(i,n)?(Z(e,n,n+1),i):null}function Ge(e,t,r,n){function i(){var e=a+t;return 0>e||e==l.size?!1:(a=e,c=Ft(l,e))}function o(e){var r=(n?Nr:Ar)(c,u,t,!0);if(null==r){if(e||!i())return!1;u=n?(0>t?kr:Sr)(c):0>t?c.text.length:0}else u=r;return!0}var l=e.view.doc,s=e.view.sel.head,a=s.line,u=s.ch,c=Ft(l,a);if("char"==r)o();else if("column"==r)o(!0);else if("word"==r)for(var f=!1;!(0>t)||o();){if(dr(c.text.charAt(u)))f=!0;else if(f){0>t&&(t=1,o());break}if(t>0&&!o())break}return Ie(e,{line:a,ch:u},t,!0)}function Xe(e,t){var r=t.ch,n=t.ch;if(e){t.after===!1||n==e.length?--r:++n;for(var i=e.charAt(r),o=dr(i)?dr:/\s/.test(i)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!dr(e)};r>0&&o(e.charAt(r-1));)--r;for(;n<e.length&&o(e.charAt(n));)++n}return{from:{line:t.line,ch:r},to:{line:t.line,ch:n}}}function Ye(e,t){He(e,{line:t,ch:0},De(e.view.doc,{line:t+1,ch:0}))}function Ue(t,r,n,i){e.defaults[t]=r,n&&(ln[t]=i?function(e,t,r){r!=an&&n(e,t,r)}:n)}function _e(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var i=t[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r}function je(e,t,r){return e.startState?e.startState(t,r):!0}function Ze(e){return"string"==typeof e?pn[e]:e}function $e(e,t,r,n){function i(t){t=Ze(t);var o=t[e];if(o===!1)return n&&n(),!0;if(null!=o&&r(o))return!0;if(t.nofallthrough)return n&&n(),!0;var l=t.fallthrough;if(null==l)return!1;if("[object Array]"!=Object.prototype.toString.call(l))return i(l);for(var s=0,a=l.length;a>s;++s)if(i(l[s]))return!0;return!1}for(var o=0;o<t.length;++o)if(i(t[o]))return!0}function qe(e){var t=Wn[Qt(e,"keyCode")];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Je(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8}function Qe(e,t){this.lines=[],this.type=t,this.cm=e}function et(e,t,r,n,i){var o=e.view.doc,l=new Qe(e,i);if("range"==i&&!Ne(t,r))return l;if(n)for(var s in n)n.hasOwnProperty(s)&&(l[s]=n[s]);l.replacedWith&&(l.collapsed=!0,l.replacedWith=vr("span",[l.replacedWith],"CodeMirror-widget")),l.collapsed&&($r=!0);var a=t.line,u=0,c,f;if(o.iter(a,r.line+1,function(n){l.collapsed&&!e.options.lineWrapping&&ft(o,n)==e.view.maxLine&&(e.curOp.updateMaxLine=!0);var i={from:null,to:null,marker:l};u+=n.text.length,a==t.line&&(i.from=t.ch,u-=t.ch),a==r.line&&(i.to=r.ch,u-=n.text.length-r.ch),l.collapsed&&(a==r.line&&(f=at(n,r.ch)),a==t.line?c=at(n,t.ch):Rt(n,0)),nt(n,i),++a}),l.collapsed&&o.iter(t.line,r.line+1,function(e){ht(e)&&Rt(e,0)}),l.readOnly&&(Zr=!0,(e.view.history.done.length||e.view.history.undone.length)&&e.clearHistory()),l.collapsed){if(c!=f)throw new Error("Inserting collapsed marker overlapping an existing one");l.size=u,l.atomic=!0}return(l.className||l.startStyle||l.endStyle||l.collapsed)&&Z(e,t.line,r.line+1),l.atomic&&ze(e),l}function tt(e,t){if(e)for(var r=0;r<e.length;++r){var n=e[r];if(n.marker==t)return n}}function rt(e,t){for(var r,n=0;n<e.length;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function nt(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.lines.push(e)}function it(e,t){if(e)for(var r=0,n;r<e.length;++r){var i=e[r],o=i.marker,l=null==i.from||(o.inclusiveLeft?i.from<=t:i.from<t);if(l||"bookmark"==o.type&&i.from==t){var s=null==i.to||(o.inclusiveRight?i.to>=t:i.to>t);(n||(n=[])).push({from:i.from,to:s?null:i.to,marker:o})}}return n}function ot(e,t,r){if(e)for(var n=0,i;n<e.length;++n){var o=e[n],l=o.marker,s=null==o.to||(l.inclusiveRight?o.to>=r:o.to>r);if(s||"bookmark"==l.type&&o.from==r&&o.from!=t){var a=null==o.from||(l.inclusiveLeft?o.from<=r:o.from<r);(i||(i=[])).push({from:a?null:o.from-r,to:null==o.to?null:o.to-r,marker:l})}}return i}function lt(e,t,r,n,i){if(!e&&!t)return i;var o=it(e,r),l=ot(t,r,n),s=1==i.length,a=ar(i).length+(s?r:0);if(o)for(var u=0;u<o.length;++u){var c=o[u];if(null==c.to){var f=tt(l,c.marker);f?s&&(c.to=null==f.to?null:f.to+a):c.to=r}}if(l)for(var u=0;u<l.length;++u){var c=l[u];if(null!=c.to&&(c.to+=a),null==c.from){var f=tt(o,c.marker);f||(c.from=a,s&&(o||(o=[])).push(c))}else c.from+=a,s&&(o||(o=[])).push(c)}var h=[gt(i[0],o)];if(!s){var d=i.length-2,p;if(d>0&&o)for(var u=0;u<o.length;++u)null==o[u].to&&(p||(p=[])).push({from:null,to:null,marker:o[u].marker});for(var u=0;d>u;++u)h.push(gt(i[u+1],p));h.push(gt(ar(i),l))}return h}function st(e,t,r){var n=null;if(e.iter(t.line,r.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var r=e.markedSpans[t].marker;!r.readOnly||n&&-1!=cr(n,r)||(n||(n=[])).push(r)}}),!n)return null;for(var i=[{from:t,to:r}],o=0;o<n.length;++o)for(var l=n[o].find(),s=0;s<i.length;++s){var a=i[s];if(Ne(l.from,a.to)&&!Ne(l.to,a.from)){var u=[s,1];Ne(a.from,l.from)&&u.push({from:a.from,to:l.from}),Ne(l.to,a.to)&&u.push({from:l.to,to:a.to}),i.splice.apply(i,u),s+=u.length-1}}return i}function at(e,t){var r=$r&&e.markedSpans,n;if(r)for(var i,o=0;o<r.length;++o)i=r[o],i.marker.collapsed&&(null==i.from||i.from<t)&&(null==i.to||i.to>t)&&(!n||n.width<i.marker.width)&&(n=i.marker);return n}function ut(e){return at(e,-1)}function ct(e){return at(e,e.text.length+1)}function ft(e,t){for(var r;r=ut(t);)t=Ft(e,r.find().from.line);return t}function ht(e){var t=$r&&e.markedSpans;if(t)for(var r,n=0;n<t.length;++n)if(r=t[n],r.marker.collapsed){if(null==r.from)return!0;if(0==r.from&&r.marker.inclusiveLeft&&dt(e,r))return!0}}function dt(e,t){if(null==t.to){var r=t.marker.find().to,n=Ft(Pt(e),r.line);return dt(n,tt(n.markedSpans,t.marker))}if(t.marker.inclusiveRight&&t.to==e.text.length)return!0;for(var i,o=0;o<e.markedSpans.length;++o)if(i=e.markedSpans[o],i.marker.collapsed&&i.from==t.to&&(i.marker.inclusiveLeft||t.marker.inclusiveRight)&&dt(e,i))return!0}function pt(e){return"string"==typeof e?e:e.text}function vt(e){if("string"==typeof e)return null;for(var t=e.markedSpans,r=null,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?r||(r=t.slice(0,n)):r&&r.push(t[n]);return r?r.length?r:null:t}function gt(e,t){return t?{text:e,markedSpans:t}:e}function mt(e){var t=e.markedSpans;if(t){for(var r=0;r<t.length;++r){var n=t[r].marker.lines,i=cr(n,e);n.splice(i,1)}e.markedSpans=null}}function wt(e,t){if(t){for(var r=0;r<t.length;++r)t[r].marker.lines.push(e);e.markedSpans=t}}function yt(e){return function(){U(this.cm);try{var t=e.apply(this,arguments)}finally{_(this.cm)}return t}}function bt(e){return null!=e.height?e.height:(e.node.parentNode&&1==e.node.parentNode.nodeType||mr(e.cm.display.measure,vr("div",[e.node],null,"position: relative")),e.height=e.node.offsetHeight)}function xt(e,t,r,n){var i=new vn(e,r,n);return i.noHScroll&&(e.display.alignWidgets=!0),Ke(e,t,function(t){if((t.widgets||(t.widgets=[])).push(i),i.line=t,!ht(t)||i.showIfHidden){var r=Kt(e,t)<e.display.scroller.scrollTop;Rt(t,t.height+bt(i)),r&&setTimeout(function(){e.display.scroller.scrollTop+=i.height})}return!0}),i}function Ct(e,t,r){var n={text:e,height:r};return wt(n,t),ht(n)&&(n.height=0),n}function Lt(e,t,r,n){t.text=r,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),mt(t),wt(t,n),ht(t)?t.height=0:t.height||(t.height=X(e.display)),nr(e,t,"change")}function St(e){e.parent=null,mt(e)}function kt(e,t,r,n,i){var o=e.options.flattenSpans,l="",s=null,a=new Je(t,e.options.tabSize);for(""==t&&r.blankLine&&r.blankLine(n);!a.eol();){var u=r.token(a,n);a.pos>5e3&&(o=!1,a.pos=Math.min(t.length,a.start+5e4),u=null);var c=a.current();a.start=a.pos,o&&s==u?l+=c:(l&&i(l,s),l=c,s=u)}l&&i(l,s)}function Mt(e,t,r){var n=[e.view.modeGen];kt(e,t.text,e.view.mode,r,function(e,t){n.push(e,t)});for(var i=0;i<e.view.overlays.length;++i){var o=e.view.overlays[i],l=1;kt(e,t.text,o.mode,!0,function(e,t){for(var r=l,i=e.length;i;){var s=n[l],a=s.length;i>=a?i-=a:(n.splice(l,1,s.slice(0,i),n[l+1],s.slice(i)),i=0),l+=2}if(t)if(o.opaque)n.splice(r,l-r,e,t),l=r+2;else for(;l>r;r+=2){var s=n[r+1];n[r+1]=s?s+" "+t:t}})}return n}function Tt(e,t){return t.styles&&t.styles[0]==e.view.modeGen||(t.styles=Mt(e,t,t.stateAfter=O(e,Bt(t)))),t.styles}function Nt(e,t,r){var n=e.view.mode,i=new Je(t.text,e.options.tabSize);for(""==t.text&&n.blankLine&&n.blankLine(r);!i.eol()&&i.pos<=5e3;)n.token(i,r),i.start=i.pos}function At(e){return e?gn[e]||(gn[e]="cm-"+e.replace(/ +/g," cm-")):null}function Wt(e,t,r){for(var n,i=t,o,l,s=!0;n=ut(i);)s=!1,i=Ft(e.view.doc,n.find().from.line),o||(o=i);var a={pre:vr("pre"),col:0,pos:0,display:!r,measure:null,addedOne:!1,cm:e};i.textClass&&(a.pre.className=i.textClass);do{a.measure=i==t&&r,a.pos=0,a.addToken=a.measure?Ot:Dt,r&&l&&i!=t&&!a.addedOne&&(r[0]=a.pre.appendChild(br(e.display.measure)),a.addedOne=!0);var u=Et(i,a,Tt(e,i));l=i==o,u&&(i=Ft(e.view.doc,u.to.line),s=!1)}while(u);return r&&!a.addedOne&&(r[0]=a.pre.appendChild(s?vr("span"," "):br(e.display.measure))),a.pre.firstChild||ht(t)||a.pre.appendChild(document.createTextNode(" ")),a.pre}function Dt(e,t,r,n,i){if(t){if(mn.test(t))for(var o=document.createDocumentFragment(),l=0;;){mn.lastIndex=l;var s=mn.exec(t),a=s?s.index-l:t.length-l;if(a&&(o.appendChild(document.createTextNode(t.slice(l,l+a))),e.col+=a),!s)break;if(l+=a+1,"	"==s[0]){var u=e.cm.options.tabSize,c=u-e.col%u;o.appendChild(vr("span",sr(c),"cm-tab")),e.col+=c}else{var f=vr("span","•","cm-invalidchar");f.title="\\u"+s[0].charCodeAt(0).toString(16),o.appendChild(f),e.col+=1}}else{e.col+=t.length;var o=document.createTextNode(t)}if(r||n||i||e.measure){var h=r||"";return n&&(h+=n),i&&(h+=i),e.pre.appendChild(vr("span",[o],h))}e.pre.appendChild(o)}}function Ot(e,t,r,n,i){for(var o=0;o<t.length;++o)o&&o<t.length&&e.cm.options.lineWrapping&&Sn.test(t.slice(o-1,o+1))&&e.pre.appendChild(vr("wbr")),e.measure[e.pos++]=Dt(e,t.charAt(o),r,0==o&&n,o==t.length-1&&i);t.length&&(e.addedOne=!0)}function Ht(e,t,r){r&&(e.display||(r=r.cloneNode(!0)),e.pre.appendChild(r),e.measure&&t&&(e.measure[e.pos]=r,e.addedOne=!0)),e.pos+=t}function Et(e,t,r){var n=e.markedSpans;if(n)for(var i=e.text,o=i.length,l=0,s=1,a="",u,c=0,f,h,d,p;;){if(c==l){f=h=d="",p=null,c=1/0;for(var v=null,g=0;g<n.length;++g){var m=n[g],w=m.marker;m.from<=l&&(null==m.to||m.to>l)?(null!=m.to&&c>m.to&&(c=m.to,h=""),w.className&&(f+=" "+w.className),w.startStyle&&m.from==l&&(d+=" "+w.startStyle),w.endStyle&&m.to==c&&(h+=" "+w.endStyle),w.collapsed&&(!p||p.marker.width<w.width)&&(p=m)):m.from>l&&c>m.from&&(c=m.from),"bookmark"==w.type&&m.from==l&&w.replacedWith&&(v=w.replacedWith)}if(p&&(p.from||0)==l&&(Ht(t,(null==p.to?o:p.to)-l,null!=p.from&&p.marker.replacedWith),null==p.to))return p.marker.find();v&&!p&&Ht(t,0,v)}if(l>=o)break;for(var y=Math.min(o,c);;){if(a){var b=l+a.length;if(!p){var x=b>y?a.slice(0,y-l):a;t.addToken(t,x,u+f,d,l+x.length==c?h:"")}if(b>=y){a=a.slice(y-l),l=y;break}l=b,d=""}a=r[s++],u=At(r[s++])}}else for(var s=1;s<r.length;s+=2)t.addToken(t,r[s],At(r[s+1]))}function zt(e){this.lines=e,this.parent=null;for(var t=0,r=e.length,n=0;r>t;++t)e[t].parent=this,n+=e[t].height;this.height=n}function It(e){this.children=e;for(var t=0,r=0,n=0,i=e.length;i>n;++n){var o=e[n];t+=o.chunkSize(),r+=o.height,o.parent=this}this.size=t,this.height=r,this.parent=null}function Ft(e,t){for(;!e.lines;)for(var r=0;;++r){var n=e.children[r],i=n.chunkSize();if(i>t){e=n;break}t-=i}return e.lines[t]}function Rt(e,t){for(var r=t-e.height,n=e;n;n=n.parent)n.height+=r}function Bt(e){if(null==e.parent)return null;for(var t=e.parent,r=cr(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var i=0;n.children[i]!=t;++i)r+=n.children[i].chunkSize();return r}function Pt(e){for(var t=e.parent;t.parent;t=t.parent);return t}function Vt(e,t){var r=0;e:do{for(var n=0,i=e.children.length;i>n;++n){var o=e.children[n],l=o.height;if(l>t){e=o;continue e}t-=l,r+=o.chunkSize()}return r}while(!e.lines);for(var n=0,i=e.lines.length;i>n;++n){var s=e.lines[n],a=s.height;if(a>t)break;t-=a}return r+n}function Kt(e,t){t=ft(e.view.doc,t);for(var r=0,n=t.parent,i=0;i<n.lines.length;++i){var o=n.lines[i];if(o==t)break;r+=o.height}for(var l=n.parent;l;n=l,l=n.parent)for(var i=0;i<l.children.length;++i){var s=l.children[i];if(s==n)break;r+=s.height}return r}function Gt(e){var t=e.order;return null==t&&(t=e.order=Dn(e.text)),t}function Xt(){return{done:[],undone:[],lastTime:0,lastOp:null,lastOrigin:null,dirtyCounter:0}}function Yt(e,t,r,n,i,o,l,s,a){var u=e.view.history;u.undone.length=0;var c=+new Date,f=ar(u.done);if(f&&(u.lastOp==e.curOp.id||u.lastOrigin==i&&("input"==i||"delete"==i)&&u.lastTime>c-600)){var h=ar(f.events);if(h.start>t+n.length||h.start+h.added<t)f.events.push({start:t,added:r,old:n});else{for(var d=Math.max(0,h.start-t),p=Math.max(0,t+n.length-(h.start+h.added)),v=d;v>0;--v)h.old.unshift(n[v-1]);for(var v=p;v>0;--v)h.old.push(n[n.length-v]);d&&(h.start=t),h.added+=r-(n.length-d-p)}f.fromAfter=s,f.toAfter=a}else{for(f={events:[{start:t,added:r,old:n}],fromBefore:o,toBefore:l,fromAfter:s,toAfter:a},u.done.push(f);u.done.length>e.options.undoDepth;)u.done.shift();u.dirtyCounter<0?u.dirtyCounter=NaN:u.dirtyCounter++}u.lastTime=c,u.lastOp=e.curOp.id,u.lastOrigin=i}function Ut(){$t(this)}function _t(e){return e.stop||(e.stop=Ut),e}function jt(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Zt(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function $t(e){jt(e),Zt(e)}function qt(e){return e.target||e.srcElement}function Jt(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Yr&&e.ctrlKey&&1==t&&(t=3),t}function Qt(e,t){var r=e.override&&e.override.hasOwnProperty(t);return r?e.override[t]:e[t]}function er(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var n=e._handlers||(e._handlers={}),i=n[t]||(n[t]=[]);i.push(r)}}function tr(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else{var n=e._handlers&&e._handlers[t];if(!n)return;for(var i=0;i<n.length;++i)if(n[i]==r){n.splice(i,1);break}}}function rr(e,t){var r=e._handlers&&e._handlers[t];if(r)for(var n=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,n)}function nr(e,t,r){function n(e){return function(){e.apply(null,o)}}var i=t._handlers&&t._handlers[r];if(i)for(var o=Array.prototype.slice.call(arguments,3),l=e.curOp&&e.curOp.delayedCallbacks,s=0;s<i.length;++s)l?l.push(n(i[s])):i[s].apply(null,o)}function ir(e,t){var r=e._handlers&&e._handlers[t];return r&&r.length>0}function or(){this.id=null}function lr(e,t,r){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var n=0,i=0;t>n;++n)"	"==e.charAt(n)?i+=r-i%r:++i;return i}function sr(e){for(;bn.length<=e;)bn.push(ar(bn)+" ");return bn[e]}function ar(e){return e[e.length-1]}function ur(e){Gr?(e.selectionStart=0,e.selectionEnd=e.value.length):e.select()}function cr(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;n>r;++r)if(e[r]==t)return r;return-1}function fr(e){for(var t=[],r=0;e>r;++r)t.push(void 0);return t}function hr(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function dr(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||xn.test(e))}function pr(e){var t=0;for(var r in e)e.hasOwnProperty(r)&&e[r]&&++t;return!t}function vr(e,t,r,n){var i=document.createElement(e);if(r&&(i.className=r),n&&(i.style.cssText=n),"string"==typeof t)wr(i,t);else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function gr(e){if(Dr)for(;e.firstChild;)e.removeChild(e.firstChild);else e.innerHTML="";return e}function mr(e,t){return gr(e).appendChild(t)}function wr(e,t){Hr?(e.innerHTML="",e.appendChild(document.createTextNode(t))):e.textContent=t}function yr(e){if(null!=kn)return kn;var t=vr("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return mr(e,t),t.offsetWidth&&(kn=t.offsetHeight-t.clientHeight),kn||0}function br(e){if(null==Mn){var t=vr("span","​");mr(e,vr("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Mn=t.offsetWidth<=1&&t.offsetHeight>2&&!Or)}return Mn?vr("span","​"):vr("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function xr(e,t,r,n){if(!e)return n(t,r,"ltr");for(var i=0;i<e.length;++i){var o=e[i];(o.from<r&&o.to>t||t==r&&o.to==t)&&n(Math.max(o.from,t),Math.min(o.to,r),1==o.level?"rtl":"ltr")}}function Cr(e){return e.level%2?e.to:e.from}function Lr(e){return e.level%2?e.from:e.to}function Sr(e){var t=Gt(e);return t?Cr(t[0]):0}function kr(e){var t=Gt(e);return t?Lr(ar(t)):e.text.length}function Mr(e,t){var r=Ft(e.view.doc,t),n=ft(e.view.doc,r);n!=r&&(t=Bt(n));var i=Gt(n),o=i?i[0].level%2?kr(n):Sr(n):0;return{line:t,ch:o}}function Tr(e,t){for(var r,n;r=ct(n=Ft(e.view.doc,t));)t=r.find().to.line;var i=Gt(n),o=i?i[0].level%2?Sr(n):kr(n):n.text.length;return{line:t,ch:o}}function Nr(e,t,r,n){var i=Gt(e);if(!i)return Ar(e,t,r,n);for(var o=n?function(t,r){do t+=r;while(t>0&&Cn.test(e.text.charAt(t)));return t}:function(e,t){return e+t},l=i[0].level,s=0;s<i.length;++s){var a=i[s],u=a.level%2==l;if(a.from<t&&a.to>t||u&&(a.from==t||a.to==t))break}for(var c=o(t,a.level%2?-r:r);null!=c;)if(a.level%2==l){if(!(c<a.from||c>a.to))break;a=i[s+=r],c=a&&(r>0==a.level%2?o(a.to,-1):o(a.from,1))}else if(c==Cr(a))a=i[--s],c=a&&Lr(a);else{if(c!=Lr(a))break;a=i[++s],c=a&&Cr(a)}return 0>c||c>e.text.length?null:c}function Ar(e,t,r,n){var i=t+r;if(n)for(;i>0&&Cn.test(e.text.charAt(i));)i+=r;return 0>i||i>e.text.length?null:i}var Wr=/gecko\/\d/i.test(navigator.userAgent),Dr=/MSIE \d/.test(navigator.userAgent),Or=Dr&&(null==document.documentMode||document.documentMode<8),Hr=Dr&&(null==document.documentMode||document.documentMode<9),Er=/WebKit\//.test(navigator.userAgent),zr=Er&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Ir=/Chrome\//.test(navigator.userAgent),Fr=/Opera\//.test(navigator.userAgent),Rr=/Apple Computer/.test(navigator.vendor),Br=/KHTML\//.test(navigator.userAgent),Pr=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),Vr=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Kr=/PhantomJS/.test(navigator.userAgent),Gr=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Xr=Gr||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Yr=Gr||/Mac/.test(navigator.platform),Ur=/windows/i.test(navigator.platform),_r=Fr&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);_r&&(_r=Number(_r[1]));var jr=Yr&&(zr||Fr&&(null==_r||12.11>_r)),Zr=!1,$r=!1,qr,Jr,Qr,en=0,tn=null;Dr?tn=-.53:Wr?tn=15:Ir?tn=-.7:Rr&&(tn=-1/3);var rn,nn=null,on;e.prototype={getValue:function(e){var t=[],r=this.view.doc;return r.iter(0,r.size,function(e){t.push(e.text)}),t.join(e||"\n")},setValue:j(null,function(e){var t=this.view.doc,r={line:0,ch:0},n=Ft(t,t.size-1).text.length;Le(this,r,{line:t.size-1,ch:n},Tn(e),r,r,"setValue")}),getSelection:function(e){return this.getRange(this.view.sel.from,this.view.sel.to,e)},replaceSelection:j(null,function(e,t,r){var n=this.view.sel;Ce(this,n.from,n.to,Tn(e),t||"around",r)}),focus:function(){window.focus(),te(this),ye(this),J(this)},setOption:function(e,t){var r=this.options,n=r[e];(r[e]!=t||"mode"==e)&&(r[e]=t,ln.hasOwnProperty(e)&&j(this,ln[e])(this,t,n))},getOption:function(e){return this.options[e]},getMode:function(){return this.view.mode},addKeyMap:function(e){this.view.keyMaps.push(e)},removeKeyMap:function(e){for(var t=this.view.keyMaps,r=0;r<t.length;++r)if(("string"==typeof e?t[r].name:t[r])==e)return t.splice(r,1),!0},addOverlay:j(null,function(t,r){var n=t.token?t:e.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");this.view.overlays.push({mode:n,modeSpec:t,opaque:r&&r.opaque}),this.view.modeGen++,Z(this,0,this.view.doc.size)}),removeOverlay:j(null,function(e){for(var t=this.view.overlays,r=0;r<t.length;++r)if(t[r].modeSpec==e)return t.splice(r,1),this.view.modeGen++,void Z(this,0,this.view.doc.size)}),undo:j(null,function(){Se(this,"undo")}),redo:j(null,function(){Se(this,"redo")}),indentLine:j(null,function(e,t,r){"string"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Oe(this.view.doc,e)&&Ve(this,e,t,r)}),indentSelection:j(null,function(e){var t=this.view.sel;if(Te(t.from,t.to))return Ve(this,t.from.line,e);for(var r=t.to.line-(t.to.ch?0:1),n=t.from.line;r>=n;++n)Ve(this,n,e)}),historySize:function(){var e=this.view.history;return{undo:e.done.length,redo:e.undone.length}},clearHistory:function(){this.view.history=Xt()},markClean:function(){this.view.history.dirtyCounter=0,this.view.history.lastOp=this.view.history.lastOrigin=null},isClean:function(){return 0==this.view.history.dirtyCounter},getHistory:function(){function e(e){for(var t=0,r=[],n;t<e.length;++t){var i=e[t];r.push({events:n=[],fromBefore:i.fromBefore,toBefore:i.toBefore,fromAfter:i.fromAfter,toAfter:i.toAfter});for(var o=0,l=i.events;o<l.length;++o){var s=[],a=l[o];n.push({start:a.start,added:a.added,old:s});for(var u=0;u<a.old.length;++u)s.push(pt(a.old[u]))}}return r}var t=this.view.history;return{done:e(t.done),undone:e(t.undone)}},setHistory:function(e){var t=this.view.history=Xt();t.done=e.done,t.undone=e.undone},getTokenAt:function(e){var t=this.view.doc;e=De(t,e);for(var r=O(this,e.line),n=this.view.mode,i=Ft(t,e.line),o=new Je(i.text,this.options.tabSize);o.pos<e.ch&&!o.eol();){o.start=o.pos;var l=n.token(o,r)}return{start:o.start,end:o.pos,string:o.current(),className:l||null,type:l||null,state:r}},getStateAfter:function(e){var t=this.view.doc;return e=We(t,null==e?t.size-1:e),O(this,e+1)},cursorCoords:function(e,t){var r,n=this.view.sel;return r=null==e?n.head:"object"==typeof e?De(this.view.doc,e):e?n.from:n.to,V(this,r,t||"page")},charCoords:function(e,t){return P(this,De(this.view.doc,e),t||"page")},coordsChar:function(e){var t=this.display.lineSpace.getBoundingClientRect();return K(this,e.left-t.left,e.top-t.top)},defaultTextHeight:function(){return X(this.display)},markText:j(null,function(e,t,r){return et(this,De(this.view.doc,e),De(this.view.doc,t),r,"range")}),setBookmark:j(null,function(e,t){return e=De(this.view.doc,e),et(this,e,e,t?{replacedWith:t}:{},"bookmark")}),findMarksAt:function(e){var t=this.view.doc;e=De(t,e);var r=[],n=Ft(t,e.line).markedSpans;if(n)for(var i=0;i<n.length;++i){var o=n[i];(null==o.from||o.from<=e.ch)&&(null==o.to||o.to>=e.ch)&&r.push(o.marker);
}return r},setGutterMarker:j(null,function(e,t,r){return Ke(this,e,function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=r,!r&&pr(n)&&(e.gutterMarkers=null),!0})}),clearGutter:j(null,function(e){var t=0,r=this,n=r.view.doc;n.iter(0,n.size,function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,Z(r,t,t+1),pr(n.gutterMarkers)&&(n.gutterMarkers=null)),++t})}),addLineClass:j(null,function(e,t,r){return Ke(this,e,function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"wrapClass";if(e[n]){if(new RegExp("\\b"+r+"\\b").test(e[n]))return!1;e[n]+=" "+r}else e[n]=r;return!0})}),removeLineClass:j(null,function(e,t,r){return Ke(this,e,function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"wrapClass",i=e[n];if(!i)return!1;if(null==r)e[n]=null;else{var o=i.replace(new RegExp("^"+r+"\\b\\s*|\\s*\\b"+r+"\\b"),"");if(o==i)return!1;e[n]=o||null}return!0})}),addLineWidget:j(null,function(e,t,r){return xt(this,e,t,r)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if("number"==typeof e){if(!Oe(this.view.doc,e))return null;var t=e;if(e=Ft(this.view.doc,e),!e)return null}else{var t=Bt(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(e,t,r,n,i){var o=this.display;e=V(this,De(this.view.doc,e));var l=e.top,s=e.left;if(t.style.position="absolute",o.sizer.appendChild(t),"over"==n)l=e.top;else if("near"==n){var a=Math.max(o.wrapper.clientHeight,this.view.doc.height),u=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);e.bottom+t.offsetHeight>a&&e.top>t.offsetHeight&&(l=e.top-t.offsetHeight),s+t.offsetWidth>u&&(s=u-t.offsetWidth)}t.style.top=l+H(o)+"px",t.style.left=t.style.right="","right"==i?(s=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),r&&Be(this,s,l,s+t.offsetWidth,l+t.offsetHeight)},lineCount:function(){return this.view.doc.size},clipPos:function(e){return De(this.view.doc,e)},getCursor:function(e){var t=this.view.sel,r;return r=null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||e===!1?t.to:t.from,Ae(r)},somethingSelected:function(){return!Te(this.view.sel.from,this.view.sel.to)},setCursor:j(null,function(e,t,r){var n=De(this.view.doc,"number"==typeof e?{line:e,ch:t||0}:e);r?He(this,n):Ee(this,n,n)}),setSelection:j(null,function(e,t){var r=this.view.doc;Ee(this,De(r,e),De(r,t||e))}),extendSelection:j(null,function(e,t){var r=this.view.doc;He(this,De(r,e),t&&De(r,t))}),setExtending:function(e){this.view.sel.extend=e},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){var t=this.view.doc;return Oe(t,e)?Ft(t,e):void 0},getLineNumber:function(e){return Bt(e)},setLine:j(null,function(e,t){Oe(this.view.doc,e)&&Me(this,t,{line:e,ch:0},{line:e,ch:Ft(this.view.doc,e).text.length})}),removeLine:j(null,function(e){Oe(this.view.doc,e)&&Me(this,"",{line:e,ch:0},De(this.view.doc,{line:e+1,ch:0}))}),replaceRange:j(null,function(e,t,r){var n=this.view.doc;return t=De(n,t),r=r?De(n,r):t,Me(this,e,t,r)}),getRange:function(e,t,r){var n=this.view.doc;e=De(n,e),t=De(n,t);var i=e.line,o=t.line;if(i==o)return Ft(n,i).text.slice(e.ch,t.ch);var l=[Ft(n,i).text.slice(e.ch)];return n.iter(i+1,o,function(e){l.push(e.text)}),l.push(Ft(n,o).text.slice(0,t.ch)),l.join(r||"\n")},triggerOnKeyDown:j(null,me),execCommand:function(e){return dn[e](this)},moveH:j(null,function(e,t){var r=this.view.sel,n=0>e?r.from:r.to;(r.shift||r.extend||Te(r.from,r.to))&&(n=Ge(this,e,t,this.options.rtlMoveVisually)),He(this,n,n,e)}),deleteH:j(null,function(e,t){var r=this.view.sel;Te(r.from,r.to)?Me(this,"",r.from,Ge(this,e,t,!1),"delete"):Me(this,"",r.from,r.to,"delete"),this.curOp.userSelChange=!0}),moveV:j(null,function(e,t){var r=this.view,n=r.doc,i=this.display,o=r.sel.head,l=V(this,o,"div"),s=l.left,a;if(null!=r.goalColumn&&(s=r.goalColumn),"page"==t){var u=Math.min(i.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);a=l.top+e*u}else"line"==t&&(a=e>0?l.bottom+3:l.top-3);do{var c=K(this,s,a);a+=5*e}while(c.outside&&(0>e?a>0:a<n.height));"page"==t&&(i.scrollbarV.scrollTop+=P(this,c,"div").top-l.top),He(this,c,c,e),r.goalColumn=s}),toggleOverwrite:function(){(this.view.overwrite=!this.view.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},posFromIndex:function(e){var t=0,r,n=this.view.doc;return n.iter(0,n.size,function(n){var i=n.text.length+1;return i>e?(r=e,!0):(e-=i,void++t)}),De(n,{line:t,ch:r})},indexFromPos:function(e){e=De(this.view.doc,e);var t=e.ch;return this.view.doc.iter(0,e.line,function(e){t+=e.text.length+1}),t},scrollTo:function(e,t){null!=e&&(this.display.scrollbarH.scrollLeft=this.display.scroller.scrollLeft=e),null!=t&&(this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=t),w(this,[])},getScrollInfo:function(){var e=this.display.scroller,t=wn;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:function(e){"number"==typeof e&&(e={line:e,ch:0}),e&&null==e.line?Be(this,e.left,e.top,e.right,e.bottom):(e=e?De(this.view.doc,e):this.view.sel.head,Re(this,e))},setSize:function(e,t){function r(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.refresh()},on:function(e,t){er(this,e,t)},off:function(e,t){tr(this,e,t)},operation:function(e){return j(this,e)()},refresh:function(){R(this);var e=this.view.scrollTop,t=this.view.scrollLeft;this.display.scroller.scrollHeight>e&&(this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=e),this.display.scroller.scrollWidth>t&&(this.display.scrollbarH.scrollLeft=this.display.scroller.scrollLeft=t),w(this,!0)},getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var ln=e.optionHandlers={},sn=e.defaults={},an=e.Init={toString:function(){return"CodeMirror.Init"}};Ue("value","",function(e,t){e.setValue(t)},!0),Ue("mode",null,n,!0),Ue("indentUnit",2,n,!0),Ue("indentWithTabs",!1),Ue("smartIndent",!0),Ue("tabSize",4,function(e){n(e),R(e),w(e,!0)},!0),Ue("electricChars",!0),Ue("rtlMoveVisually",!Ur),Ue("theme","default",function(e){l(e),s(e)},!0),Ue("keyMap","default",o),Ue("extraKeys",null),Ue("onKeyEvent",null),Ue("onDragEvent",null),Ue("lineWrapping",!1,i,!0),Ue("gutters",[],function(e){f(e.options),s(e)},!0),Ue("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?m(e.display)+"px":"0",e.refresh()},!0),Ue("lineNumbers",!1,function(e){f(e.options),s(e)},!0),Ue("firstLineNumber",1,s,!0),Ue("lineNumberFormatter",function(e){return e},s,!0),Ue("showCursorWhenSelecting",!1,k,!0),Ue("readOnly",!1,function(e,t){"nocursor"==t?(be(e),e.display.input.blur()):t||ee(e,!0)}),Ue("dragDrop",!0),Ue("cursorBlinkRate",530),Ue("cursorHeight",1),Ue("workTime",100),Ue("workDelay",100),Ue("flattenSpans",!0),Ue("pollInterval",100),Ue("undoDepth",40),Ue("viewportMargin",10,function(e){e.refresh()},!0),Ue("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),Ue("autofocus",null);var un=e.modes={},cn=e.mimeModes={};e.defineMode=function(t,r){if(e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2){r.dependencies=[];for(var n=2;n<arguments.length;++n)r.dependencies.push(arguments[n])}un[t]=r},e.defineMIME=function(e,t){cn[e]=t},e.resolveMode=function(t){if("string"==typeof t&&cn.hasOwnProperty(t))t=cn[t];else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,r){r=e.resolveMode(r);var n=un[r.name];if(!n)return e.getMode(t,"text/plain");var i=n(t,r);if(fn.hasOwnProperty(r.name)){var o=fn[r.name];for(var l in o)o.hasOwnProperty(l)&&(i.hasOwnProperty(l)&&(i["_"+l]=i[l]),i[l]=o[l])}return i.name=r.name,i},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var fn=e.modeExtensions={};e.extendMode=function(e,t){var r=fn.hasOwnProperty(e)?fn[e]:fn[e]={};for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n])},e.defineExtension=function(t,r){e.prototype[t]=r},e.defineOption=Ue;var hn=[];e.defineInitHook=function(e){hn.push(e)},e.copyState=_e,e.startState=je,e.innerMode=function(e,t){for(;e.innerMode;){var r=e.innerMode(t);t=r.state,e=r.mode}return r||{mode:e,state:t}};var dn=e.commands={selectAll:function(e){e.setSelection({line:0,ch:0},{line:e.lineCount()-1})},killLine:function(e){var t=e.getCursor(!0),r=e.getCursor(!1),n=!Te(t,r);n||e.getLine(t.line).length!=t.ch?e.replaceRange("",t,n?r:{line:t.line},"delete"):e.replaceRange("",t,{line:t.line+1,ch:0},"delete")},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",{line:t,ch:0},{line:t},"delete")},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.extendSelection({line:0,ch:0})},goDocEnd:function(e){e.extendSelection({line:e.lineCount()-1})},goLineStart:function(e){e.extendSelection(Mr(e,e.getCursor().line))},goLineStartSmart:function(e){var t=e.getCursor(),r=Mr(e,t.line),n=e.getLineHandle(r.line),i=Gt(n);if(i&&0!=i[0].level)e.extendSelection(r);else{var o=Math.max(0,n.text.search(/\S/)),l=t.line==r.line&&t.ch<=o&&t.ch;e.extendSelection({line:r.line,ch:l?0:o})}},goLineEnd:function(e){e.extendSelection(Tr(e,e.getCursor().line))},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end","input")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("	","end","input")},transposeChars:function(e){var t=e.getCursor(),r=e.getLine(t.line);t.ch>0&&t.ch<r.length-1&&e.replaceRange(r.charAt(t.ch)+r.charAt(t.ch-1),{line:t.line,ch:t.ch-1},{line:t.line,ch:t.ch+1})},newlineAndIndent:function(e){j(e,function(){e.replaceSelection("\n","end","input"),e.indentLine(e.getCursor().line,null,!0)})()},toggleOverwrite:function(e){e.toggleOverwrite()}},pn=e.keyMap={};pn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},pn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordBefore","Ctrl-Delete":"delWordAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},pn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordBefore","Ctrl-Alt-Backspace":"delWordAfter","Alt-Delete":"delWordAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},pn["default"]=Yr?pn.macDefault:pn.pcDefault,pn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},e.isModifierKey=qe,e.fromTextArea=function(t,r){function n(){t.value=a.getValue()}if(r||(r={}),r.value=t.value,!r.tabindex&&t.tabindex&&(r.tabindex=t.tabindex),null==r.autofocus){var i=document.body;try{i=document.activeElement}catch(o){}r.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}if(t.form){er(t.form,"submit",n);var l=t.form,s=l.submit;try{l.submit=function u(){n(),l.submit=s,l.submit(),l.submit=u}}catch(o){}}t.style.display="none";var a=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},r);return a.save=n,a.getTextArea=function(){return t},a.toTextArea=function(){n(),t.parentNode.removeChild(a.getWrapperElement()),t.style.display="",t.form&&(tr(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=s))},a},Je.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var r=t==e;else var r=t&&(e.test?e.test(t):e(t));return r?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return lr(this.string,this.start,this.tabSize)},indentation:function(){return lr(this.string,null,this.tabSize)},match:function(e,t,r){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&t!==!1&&(this.pos+=n[0].length),n)}var i=function(e){return r?e.toLowerCase():e};return i(this.string).indexOf(i(e),this.pos)==this.pos?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},e.StringStream=Je,e.TextMarker=Qe,Qe.prototype.clear=function(){if(!this.explicitlyCleared){U(this.cm);for(var e=this.cm.view,t=null,r=null,n=0;n<this.lines.length;++n){var i=this.lines[n],o=tt(i.markedSpans,this);null!=o.to&&(r=Bt(i)),i.markedSpans=rt(i.markedSpans,o),null!=o.from?t=Bt(i):this.collapsed&&!ht(i)&&Rt(i,X(this.cm.display))}if(this.collapsed&&!this.cm.options.lineWrapping)for(var n=0;n<this.lines.length;++n){var l=ft(e.doc,this.lines[n]),s=u(e.doc,l);s>e.maxLineLength&&(e.maxLine=l,e.maxLineLength=s,e.maxLineChanged=!0)}null!=t&&Z(this.cm,t,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.collapsed&&this.cm.view.cantEdit&&(this.cm.view.cantEdit=!1,ze(this.cm)),_(this.cm),nr(this.cm,this,"clear")}},Qe.prototype.find=function(){for(var e,t,r=0;r<this.lines.length;++r){var n=this.lines[r],i=tt(n.markedSpans,this);if(null!=i.from||null!=i.to){var o=Bt(n);null!=i.from&&(e={line:o,ch:i.from}),null!=i.to&&(t={line:o,ch:i.to})}}return"bookmark"==this.type?e:e&&{from:e,to:t}},Qe.prototype.getOptions=function(e){var t=this.replacedWith;return{className:this.className,inclusiveLeft:this.inclusiveLeft,inclusiveRight:this.inclusiveRight,atomic:this.atomic,collapsed:this.collapsed,clearOnEnter:this.clearOnEnter,replacedWith:e?t&&t.cloneNode(!0):t,readOnly:this.readOnly,startStyle:this.startStyle,endStyle:this.endStyle}};var vn=e.LineWidget=function(e,t,r){for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.cm=e,this.node=t};vn.prototype.clear=yt(function(){var e=this.line.widgets,t=Bt(this.line);if(null!=t&&e){for(var r=0;r<e.length;++r)e[r]==this&&e.splice(r--,1);Rt(this.line,Math.max(0,this.line.height-bt(this))),Z(this.cm,t,t+1)}}),vn.prototype.changed=yt(function(){var e=this.height;this.height=null;var t=bt(this)-e;if(t){Rt(this.line,this.line.height+t);var r=Bt(this.line);Z(this.cm,r,r+1)}});var gn={},mn=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g;zt.prototype={chunkSize:function(){return this.lines.length},remove:function(e,t,r){for(var n=e,i=e+t;i>n;++n){var o=this.lines[n];this.height-=o.height,St(o),nr(r,o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertHeight:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0,i=t.length;i>n;++n)t[n].parent=this},iterN:function(e,t,r){for(var n=e+t;n>e;++e)if(r(this.lines[e]))return!0}},It.prototype={chunkSize:function(){return this.size},remove:function(e,t,r){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(o>e){var l=Math.min(t,o-e),s=i.height;if(i.remove(e,l,r),this.height-=s-i.height,o==l&&(this.children.splice(n--,1),i.parent=null),0==(t-=l))break;e=0}else e-=o}if(this.size-t<25){var a=[];this.collapse(a),this.children=[new zt(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0,r=this.children.length;r>t;++t)this.children[t].collapse(e)},insert:function(e,t){for(var r=0,n=0,i=t.length;i>n;++n)r+=t[n].height;this.insertHeight(e,t,r)},insertHeight:function(e,t,r){this.size+=t.length,this.height+=r;for(var n=0,i=this.children.length;i>n;++n){var o=this.children[n],l=o.chunkSize();if(l>=e){if(o.insertHeight(e,t,r),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var s=o.lines.splice(o.lines.length-25,25),a=new zt(s);o.height-=a.height,this.children.splice(n+1,0,a),a.parent=this}this.maybeSpill()}break}e-=l}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),r=new It(t);if(e.parent){e.size-=r.size,e.height-=r.height;var n=cr(e.parent.children,e);e.parent.children.splice(n+1,0,r)}else{var i=new It(e.children);i.parent=e,e.children=[i,r],e=i}r.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iter:function(e,t,r){this.iterN(e,t-e,r)},iterN:function(e,t,r){for(var n=0,i=this.children.length;i>n;++n){var o=this.children[n],l=o.chunkSize();if(l>e){var s=Math.min(t,l-e);if(o.iterN(e,s,r))return!0;if(0==(t-=s))break;e=0}else e-=l}}},e.e_stop=$t,e.e_preventDefault=jt,e.e_stopPropagation=Zt,e.on=er,e.off=tr,e.signal=rr;var wn=30,yn=e.Pass={toString:function(){return"CodeMirror.Pass"}};or.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}},e.countColumn=lr;var bn=[""],xn=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,Cn=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F]/,Ln=function(){if(Hr)return!1;var e=vr("div");return"draggable"in e||"dragDrop"in e}(),Sn=/^$/;Wr?Sn=/$'/:Rr?Sn=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:Ir&&(Sn=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);var kn,Mn,Tn=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,r=[],n=e.length;n>=t;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),l=o.indexOf("\r");-1!=l?(r.push(o.slice(0,l)),t+=l+1):(r.push(o),t=i+1)}return r}:function(e){return e.split(/\r\n?|\n/)};e.splitLines=Tn;var Nn=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(r){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1},An=function(){var e=vr("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),Wn={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};e.keyNames=Wn,function(){for(var e=0;10>e;e++)Wn[e+48]=String(e);for(var e=65;90>=e;e++)Wn[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)Wn[e+111]=Wn[e+63235]="F"+e}();var Dn=function(){function e(e){return 255>=e?t.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1791>=e?r.charAt(e-1536):e>=1792&&2220>=e?"r":"L"}var t="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",r="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,o=/[LRr]/,l=/[Lb1n]/,s=/[1n]/,a="L";return function u(t){if(!n.test(t))return!1;for(var r=t.length,u=[],c=0,f;r>c;++c)u.push(f=e(t.charCodeAt(c)));for(var c=0,h=a;r>c;++c){var f=u[c];"m"==f?u[c]=h:h=f}for(var c=0,d=a;r>c;++c){var f=u[c];"1"==f&&"r"==d?u[c]="n":o.test(f)&&(d=f,"r"==f&&(u[c]="R"))}for(var c=1,h=u[0];r-1>c;++c){var f=u[c];"+"==f&&"1"==h&&"1"==u[c+1]?u[c]="1":","!=f||h!=u[c+1]||"1"!=h&&"n"!=h||(u[c]=h),h=f}for(var c=0;r>c;++c){var f=u[c];if(","==f)u[c]="N";else if("%"==f){for(var p=c+1;r>p&&"%"==u[p];++p);for(var v=c&&"!"==u[c-1]||r-1>p&&"1"==u[p]?"1":"N",g=c;p>g;++g)u[g]=v;c=p-1}}for(var c=0,d=a;r>c;++c){var f=u[c];"L"==d&&"1"==f?u[c]="L":o.test(f)&&(d=f)}for(var c=0;r>c;++c)if(i.test(u[c])){for(var p=c+1;r>p&&i.test(u[p]);++p);for(var m="L"==(c?u[c-1]:a),w="L"==(r-1>p?u[p]:a),v=m||w?"L":"R",g=c;p>g;++g)u[g]=v;c=p-1}for(var y=[],b,c=0;r>c;)if(l.test(u[c])){var x=c;for(++c;r>c&&l.test(u[c]);++c);y.push({from:x,to:c,level:0})}else{var C=c,L=y.length;for(++c;r>c&&"L"!=u[c];++c);for(var g=C;c>g;)if(s.test(u[g])){g>C&&y.splice(L,0,{from:C,to:g,level:1});var S=g;for(++g;c>g&&s.test(u[g]);++g);y.splice(L,0,{from:S,to:g,level:2}),C=g}else++g;c>C&&y.splice(L,0,{from:C,to:c,level:1})}return 1==y[0].level&&(b=t.match(/^\s+/))&&(y[0].from=b[0].length,y.unshift({from:0,to:b[0].length,level:0})),1==ar(y).level&&(b=t.match(/\s+$/))&&(ar(y).to-=b[0].length,y.push({from:r-b[0].length,to:r,level:0})),y[0].level!=ar(y).level&&y.push({from:r,to:r,level:y[0].level}),y}}();return e.version="3.02",e}();
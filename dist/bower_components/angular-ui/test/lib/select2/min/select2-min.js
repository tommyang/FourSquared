!function($){"undefined"==typeof $.fn.each2&&$.fn.extend({each2:function(e){for(var t=$([0]),s=-1,i=this.length;++s<i&&(t.context=t[0]=this[s])&&e.call(t[0],s,t)!==!1;);return this}})}(jQuery),function($,e){"use strict";function t(e,t){var s=0,i=t.length,n;if("undefined"==typeof e)return-1;if(e.constructor===String){for(;i>s;s+=1)if(0===e.localeCompare(t[s]))return s}else for(;i>s;s+=1)if(n=t[s],n.constructor===String){if(0===n.localeCompare(e))return s}else if(n===e)return s;return-1}function s(t,s){return t===s?!0:t===e||s===e?!1:null===t||null===s?!1:t.constructor===String?0===t.localeCompare(s):s.constructor===String?0===s.localeCompare(t):!1}function i(e,t){var s,i,n;if(null===e||e.length<1)return[];for(s=e.split(t),i=0,n=s.length;n>i;i+=1)s[i]=$.trim(s[i]);return s}function n(e){return e.outerWidth()-e.width()}function o(t){var s="keyup-change-value";t.bind("keydown",function(){$.data(t,s)===e&&$.data(t,s,t.val())}),t.bind("keyup",function(){var i=$.data(t,s);i!==e&&t.val()!==i&&($.removeData(t,s),t.trigger("keyup-change"))})}function a(t){t.bind("mousemove",function(t){var s=$.data(document,"select2-lastpos");(s===e||s.x!==t.pageX||s.y!==t.pageY)&&$(t.target).trigger("mousemove-filtered",t)})}function c(t,s,i){i=i||e;var n;return function(){var e=arguments;window.clearTimeout(n),n=window.setTimeout(function(){s.apply(i,e)},t)}}function l(e){var t=!1,s;return function(){return t===!1&&(s=e(),t=!0),s}}function r(e,s){var i=c(e,function(e){s.trigger("scroll-debounced",e)});s.bind("scroll",function(e){t(e.target,s.get())>=0&&i(e)})}function h(e){e.preventDefault(),e.stopPropagation()}function d(e){if(!P){var t=e[0].currentStyle||window.getComputedStyle(e[0],null);P=$("<div></div>").css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:t.fontSize,fontFamily:t.fontFamily,fontStyle:t.fontStyle,fontWeight:t.fontWeight,letterSpacing:t.letterSpacing,textTransform:t.textTransform,whiteSpace:"nowrap"}),$("body").append(P)}return P.text(e.val()),P.width()}function u(e,t,s){var i=e.toUpperCase().indexOf(t.toUpperCase()),n=t.length;return 0>i?void s.push(e):(s.push(e.substring(0,i)),s.push("<span class='select2-match'>"),s.push(e.substring(i,i+n)),s.push("</span>"),void s.push(e.substring(i+n,e.length)))}function f(e){var t,s=0,i=null,n=e.quietMillis||100;return function(o){window.clearTimeout(t),t=window.setTimeout(function(){s+=1;var t=s,n=e.data,a=e.transport||$.ajax,c=e.traditional||!1,l=e.type||"GET";n=n.call(this,o.term,o.page,o.context),null!==i&&i.abort(),i=a.call(null,{url:e.url,dataType:e.dataType,data:n,type:l,traditional:c,success:function(i){if(!(s>t)){var n=e.results(i,o.page);o.callback(n)}}})},n)}}function p(e){var t=e,s,i=function(e){return""+e.text};return $.isArray(t)||(i=t.text,$.isFunction(i)||(s=t.text,i=function(e){return e[s]}),t=t.results),function(e){var s=e.term,n={results:[]},o;return""===s?void e.callback({results:t}):(o=function(t,n){var a,c;if(t=t[0],t.children){a={};for(c in t)t.hasOwnProperty(c)&&(a[c]=t[c]);a.children=[],$(t.children).each2(function(e,t){o(t,a.children)}),a.children.length&&n.push(a)}else e.matcher(s,i(t))&&n.push(t)},$(t).each2(function(e,t){o(t,n.results)}),void e.callback(n))}}function m(t){return $.isFunction(t)?t:function(s){var i=s.term,n={results:[]};$(t).each(function(){var t=this.text!==e,o=t?this.text:this;(""===i||s.matcher(i,o))&&n.results.push(t?this:{id:this,text:this})}),s.callback(n)}}function g(e,t){if($.isFunction(e))return!0;if(!e)return!1;throw new Error("formatterName must be a function or a falsy value")}function v(e){return $.isFunction(e)?e():e}function b(e){var t=0;return $.each(e,function(e,s){s.children?t+=b(s.children):t++}),t}function w(t,i,n,o){var a=t,c=!1,l,r,h,d,u;if(!o.createSearchChoice||!o.tokenSeparators||o.tokenSeparators.length<1)return e;for(;;){for(r=-1,h=0,d=o.tokenSeparators.length;d>h&&(u=o.tokenSeparators[h],r=t.indexOf(u),!(r>=0));h++);if(0>r)break;if(l=t.substring(0,r),t=t.substring(r+u.length),l.length>0&&(l=o.createSearchChoice(l,i),l!==e&&null!==l&&o.id(l)!==e&&null!==o.id(l))){for(c=!1,h=0,d=i.length;d>h;h++)if(s(o.id(l),o.id(i[h]))){c=!0;break}c||n(l)}}return 0!=a.localeCompare(t)?t:void 0}function C(e,t){var s=function(){};return s.prototype=new e,s.prototype.constructor=s,s.prototype.parent=e.prototype,s.prototype=$.extend(s.prototype,t),s}if(window.Select2===e){var S,y,x,E,T,P;S={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case S.LEFT:case S.RIGHT:case S.UP:case S.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case S.SHIFT:case S.CTRL:case S.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},T=function(){var e=1;return function(){return e++}}(),$(document).delegate("body","mousemove",function(e){$.data(document,"select2-lastpos",{x:e.pageX,y:e.pageY})}),$(document).ready(function(){$(document).delegate("body","mousedown touchend",function(t){var s=$(t.target).closest("div.select2-container").get(0),i;s?$(document).find("div.select2-container-active").each(function(){this!==s&&$(this).data("select2").blur()}):(s=$(t.target).closest("div.select2-drop").get(0),$(document).find("div.select2-drop-active").each(function(){this!==s&&$(this).data("select2").blur()})),s=$(t.target),i=s.attr("for"),"LABEL"===t.target.tagName&&i&&i.length>0&&(s=$("#"+i),s=s.data("select2"),s!==e&&(s.focus(),t.preventDefault()))})}),y=C(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(t){var s,i,n=".select2-results";this.opts=t=this.prepareOpts(t),this.id=t.id,t.element.data("select2")!==e&&null!==t.element.data("select2")&&this.destroy(),this.enabled=!0,this.container=this.createContainer(),this.containerId="s2id_"+(t.element.attr("id")||"autogen"+T()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=l(function(){return t.element.closest("body")}),t.element.attr("class")!==e&&this.container.addClass(t.element.attr("class").replace(/validate\[[\S ]+] ?/,"")),this.container.css(v(t.containerCss)),this.container.addClass(v(t.containerCssClass)),this.opts.element.data("select2",this).hide().before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(v(t.dropdownCssClass)),this.dropdown.data("select2",this),this.results=s=this.container.find(n),this.search=i=this.container.find("input.select2-input"),i.attr("tabIndex",this.opts.element.attr("tabIndex")),this.resultsPage=0,this.context=null,this.initContainer(),this.initContainerWidth(),a(this.results),this.dropdown.delegate(n,"mousemove-filtered",this.bind(this.highlightUnderEvent)),r(80,this.results),this.dropdown.delegate(n,"scroll-debounced",this.bind(this.loadMoreIfNeeded)),$.fn.mousewheel&&s.mousewheel(function(e,t,i,n){var o=s.scrollTop(),a;n>0&&0>=o-n?(s.scrollTop(0),h(e)):0>n&&s.get(0).scrollHeight-s.scrollTop()+n<=s.height()&&(s.scrollTop(s.get(0).scrollHeight-s.height()),h(e))}),o(i),i.bind("keyup-change",this.bind(this.updateResults)),i.bind("focus",function(){i.addClass("select2-focused")," "===i.val()&&i.val("")}),i.bind("blur",function(){i.removeClass("select2-focused")}),this.dropdown.delegate(n,"mouseup",this.bind(function(e){$(e.target).closest(".select2-result-selectable:not(.select2-disabled)").length>0?(this.highlightUnderEvent(e),this.selectHighlighted(e)):this.focusSearch(),h(e)})),this.dropdown.bind("click mouseup mousedown",function(e){e.stopPropagation()}),$.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),(t.element.is(":disabled")||t.element.is("[readonly='readonly']"))&&this.disable()},destroy:function(){var t=this.opts.element.data("select2");t!==e&&(t.container.remove(),t.dropdown.remove(),t.opts.element.removeData("select2").unbind(".select2").show())},prepareOpts:function(t){var n,o,a,c;if(n=t.element,"select"===n.get(0).tagName.toLowerCase()&&(this.select=o=t.element),o&&$.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in t)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),t=$.extend({},{populateResults:function(s,i,n){var o,a,c,l,r=this.opts.id,h=this;(o=function(s,i,a){var c,l,d,u,f,p,m,g,v;for(c=0,l=s.length;l>c;c+=1)d=s[c],u=r(d)!==e,f=d.children&&d.children.length>0,p=$("<li></li>"),p.addClass("select2-results-dept-"+a),p.addClass("select2-result"),p.addClass(u?"select2-result-selectable":"select2-result-unselectable"),f&&p.addClass("select2-result-with-children"),p.addClass(h.opts.formatResultCssClass(d)),m=$("<div></div>"),m.addClass("select2-result-label"),v=t.formatResult(d,m,n),v!==e&&m.html(h.opts.escapeMarkup(v)),p.append(m),f&&(g=$("<ul></ul>"),g.addClass("select2-result-sub"),o(d.children,g,a+1),p.append(g)),p.data("select2-data",d),i.append(p)})(i,s,0)}},$.fn.select2.defaults,t),"function"!=typeof t.id&&(a=t.id,t.id=function(e){return e[a]}),o?(t.query=this.bind(function(t){var s={results:[],more:!1},i=t.term,o,a,c;c=function(e,s){var n;e.is("option")?t.matcher(i,e.text(),e)&&s.push({id:e.attr("value"),text:e.text(),element:e.get(),css:e.attr("class")}):e.is("optgroup")&&(n={text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")},e.children().each2(function(e,t){c(t,n.children)}),n.children.length>0&&s.push(n))},o=n.children(),this.getPlaceholder()!==e&&o.length>0&&(a=o[0],""===$(a).text()&&(o=o.not(a))),o.each2(function(e,t){c(t,s.results)}),t.callback(s)}),t.id=function(e){return e.id},t.formatResultCssClass=function(e){return e.css}):"query"in t||("ajax"in t?(c=t.element.data("ajax-url"),c&&c.length>0&&(t.ajax.url=c),t.query=f(t.ajax)):"data"in t?t.query=p(t.data):"tags"in t&&(t.query=m(t.tags),t.createSearchChoice=function(e){return{id:e,text:e}},t.initSelection=function(e,n){var o=[];$(i(e.val(),t.separator)).each(function(){var e=this,i=this,n=t.tags;$.isFunction(n)&&(n=n()),$(n).each(function(){return s(this.id,e)?(i=this.text,!1):void 0}),o.push({id:e,text:i})}),n(o)})),"function"!=typeof t.query)throw"query function not defined for Select2 "+t.element.attr("id");return t},monitorSource:function(){this.opts.element.bind("change.select2",this.bind(function(e){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()}))},triggerChange:function(e){e=e||{},e=$.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e=this.container.offset(),t=this.container.outerHeight(),s=this.container.outerWidth(),i=this.dropdown.outerHeight(),n=$(window).scrollTop()+document.documentElement.clientHeight,o=e.top+t,a=e.left,c=n>=o+i,l=e.top-i>=this.body().scrollTop(),r=this.dropdown.hasClass("select2-drop-above"),h,d,u;"static"!==this.body().css("position")&&(h=this.body().offset(),o-=h.top,a-=h.left),r?(d=!0,!l&&c&&(d=!1)):(d=!1,!c&&l&&(d=!0)),d?(o=e.top-i,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")),u=$.extend({top:o,left:a,width:s},v(this.opts.dropdownCss)),this.dropdown.css(u)},shouldOpen:function(){var e;return this.opened()?!1:(e=$.Event("open"),this.opts.element.trigger(e),!e.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(window.setTimeout(this.bind(this.opening),1),!0):!1},opening:function(){var e=this.containerId,t=this.containerSelector,s="scroll."+e,i="resize."+e;this.container.parents().each(function(){$(this).bind(s,function(){var e=$(t);0==e.length&&$(this).unbind(s),e.select2("close")})}),$(window).bind(i,function(){var e=$(t);0==e.length&&$(window).unbind(i),e.select2("close")}),this.clearDropdownAlignmentPreference()," "===this.search.val()&&this.search.val(""),this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.updateResults(!0),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible(),this.focusSearch()},close:function(){if(this.opened()){var e=this;this.container.parents().each(function(){$(this).unbind("scroll."+e.containerId)}),$(window).unbind("resize."+this.containerId),this.clearDropdownAlignmentPreference(),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.opts.element.trigger($.Event("close"))}},clearSearch:function(){},ensureHighlightVisible:function(){var e=this.results,t,s,i,n,o,a,c;if(s=this.highlight(),!(0>s)){if(0==s)return void e.scrollTop(0);t=e.find(".select2-result-selectable"),i=$(t[s]),n=i.offset().top+i.outerHeight(),s===t.length-1&&(c=e.find("li.select2-more-results"),c.length>0&&(n=c.offset().top+c.outerHeight())),o=e.offset().top+e.outerHeight(),n>o&&e.scrollTop(e.scrollTop()+(n-o)),a=i.offset().top-e.offset().top,0>a&&e.scrollTop(e.scrollTop()+a)}},moveHighlight:function(e){for(var t=this.results.find(".select2-result-selectable"),s=this.highlight();s>-1&&s<t.length;){s+=e;var i=$(t[s]);if(i.hasClass("select2-result-selectable")&&!i.hasClass("select2-disabled")){this.highlight(s);break}}},highlight:function(e){var s=this.results.find(".select2-result-selectable").not(".select2-disabled");return 0===arguments.length?t(s.filter(".select2-highlighted")[0],s.get()):(e>=s.length&&(e=s.length-1),0>e&&(e=0),s.removeClass("select2-highlighted"),$(s[e]).addClass("select2-highlighted"),void this.ensureHighlightVisible())},countSelectableResults:function(){return this.results.find(".select2-result-selectable").not(".select2-disabled").length},highlightUnderEvent:function(e){var t=$(e.target).closest(".select2-result-selectable");if(t.length>0&&!t.is(".select2-highlighted")){var s=this.results.find(".select2-result-selectable");this.highlight(s.index(t))}else 0==t.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),s,i=-1,n=this.resultsPage+1,o=this,a=this.search.val(),c=this.context;0!==t.length&&(s=t.offset().top-e.offset().top-e.height(),0>=s&&(t.addClass("select2-active"),this.opts.query({term:a,page:n,context:c,matcher:this.opts.matcher,callback:this.bind(function(s){o.opened()&&(o.opts.populateResults.call(this,e,s.results,{term:a,page:n,context:c}),s.more===!0?(t.detach().appendTo(e).text(o.opts.formatLoadMore(n+1)),window.setTimeout(function(){o.loadMoreIfNeeded()},10)):t.remove(),o.positionDropdown(),o.resultsPage=n)})})))},tokenize:function(){},updateResults:function(t){function i(){a.scrollTop(0),o.removeClass("select2-active"),r.positionDropdown()}function n(e){a.html(r.opts.escapeMarkup(e)),i()}var o=this.search,a=this.results,c=this.opts,l,r=this,h;if(t===!0||this.showSearchInput!==!1&&this.opened()){if(o.addClass("select2-active"),c.maximumSelectionSize>=1&&(l=this.data(),$.isArray(l)&&l.length>=c.maximumSelectionSize&&g(c.formatSelectionTooBig,"formatSelectionTooBig")))return void n("<li class='select2-selection-limit'>"+c.formatSelectionTooBig(c.maximumSelectionSize)+"</li>");if(o.val().length<c.minimumInputLength&&g(c.formatInputTooShort,"formatInputTooShort"))return void n("<li class='select2-no-results'>"+c.formatInputTooShort(o.val(),c.minimumInputLength)+"</li>");n("<li class='select2-searching'>"+c.formatSearching()+"</li>"),h=this.tokenize(),h!=e&&null!=h&&o.val(h),this.resultsPage=1,c.query({term:o.val(),page:this.resultsPage,context:null,matcher:c.matcher,callback:this.bind(function(l){var h;if(this.opened()){if(this.context=l.context===e?null:l.context,this.opts.createSearchChoice&&""!==o.val()&&(h=this.opts.createSearchChoice.call(null,o.val(),l.results),h!==e&&null!==h&&r.id(h)!==e&&null!==r.id(h)&&0===$(l.results).filter(function(){return s(r.id(this),r.id(h))}).length&&l.results.unshift(h)),0===l.results.length&&g(c.formatNoMatches,"formatNoMatches"))return void n("<li class='select2-no-results'>"+c.formatNoMatches(o.val())+"</li>");a.empty(),r.opts.populateResults.call(this,a,l.results,{term:o.val(),page:this.resultsPage,context:null}),l.more===!0&&g(c.formatLoadMore,"formatLoadMore")&&(a.append("<li class='select2-more-results'>"+r.opts.escapeMarkup(c.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){r.loadMoreIfNeeded()},10)),this.postprocessResults(l,t),i()}})})}},cancel:function(){this.close()},blur:function(){this.close(),this.container.removeClass("select2-container-active"),this.dropdown.removeClass("select2-drop-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){this.search.show(),this.search.focus(),window.setTimeout(this.bind(function(){this.search.show(),this.search.focus(),this.search.val(this.search.val())}),10)},selectHighlighted:function(){var e=this.highlight(),t=this.results.find(".select2-highlighted").not(".select2-disabled"),s=t.closest(".select2-result-selectable").data("select2-data");s&&(t.addClass("select2-disabled"),this.highlight(e),this.onSelect(s))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function t(){var t,s,i,n,o;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth()?"auto":this.opts.element.outerWidth()+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(t=this.opts.element.attr("style"),t!==e)for(s=t.split(";"),n=0,o=s.length;o>n;n+=1)if(i=s[n].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/),null!==i&&i.length>=1)return i[1];return"resolve"===this.opts.width?(t=this.opts.element.css("width"),t.indexOf("%")>0?t:0===this.opts.element.outerWidth()?"auto":this.opts.element.outerWidth()+"px"):null}return $.isFunction(this.opts.width)?this.opts.width():this.opts.width}var s=t.call(this);null!==s&&this.container.attr("style","width: "+s)}}),x=C(y,{createContainer:function(){var e=$("<div></div>",{"class":"select2-container"}).html(["    <a href='#' onclick='return false;' class='select2-choice'>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","    <div class='select2-drop select2-offscreen'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},opening:function(){this.search.show(),this.parent.opening.apply(this,arguments),this.dropdown.removeClass("select2-offscreen")},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.dropdown.removeAttr("style").addClass("select2-offscreen").insertAfter(this.selection).show())},focus:function(){this.close(),this.selection.focus()},isFocused:function(){return this.selection[0]===document.activeElement},cancel:function(){this.parent.cancel.apply(this,arguments),this.selection.focus()},initContainer:function(){var e,t=this.container,s=this.dropdown,i=!1;this.selection=e=t.find(".select2-choice"),this.search.bind("keydown",this.bind(function(e){if(this.enabled){if(e.which===S.PAGE_UP||e.which===S.PAGE_DOWN)return void h(e);if(this.opened())switch(e.which){case S.UP:case S.DOWN:return this.moveHighlight(e.which===S.UP?-1:1),void h(e);case S.TAB:case S.ENTER:return this.selectHighlighted(),void h(e);case S.ESC:return this.cancel(e),void h(e)}else{if(e.which===S.TAB||S.isControl(e)||S.isFunctionKey(e)||e.which===S.ESC)return;if(this.opts.openOnEnter===!1&&e.which===S.ENTER)return;if(this.open(),e.which===S.ENTER)return}}})),this.search.bind("focus",this.bind(function(){this.selection.attr("tabIndex","-1")})),this.search.bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active"),window.setTimeout(this.bind(function(){this.selection.attr("tabIndex",this.opts.element.attr("tabIndex"))}),10)})),e.bind("mousedown",this.bind(function(e){i=!0,this.opened()?(this.close(),this.selection.focus()):this.enabled&&this.open(),i=!1})),s.bind("mousedown",this.bind(function(){this.search.focus()})),e.bind("focus",this.bind(function(){this.container.addClass("select2-container-active"),this.search.attr("tabIndex","-1")})),e.bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active"),window.setTimeout(this.bind(function(){this.search.attr("tabIndex",this.opts.element.attr("tabIndex"))}),10)})),e.bind("keydown",this.bind(function(e){if(this.enabled){if(e.which===S.PAGE_UP||e.which===S.PAGE_DOWN)return void h(e);if(!(e.which===S.TAB||S.isControl(e)||S.isFunctionKey(e)||e.which===S.ESC||this.opts.openOnEnter===!1&&e.which===S.ENTER)){if(e.which==S.DELETE)return void(this.opts.allowClear&&this.clear());if(this.open(),e.which===S.ENTER)return void h(e);if(e.which<48)return void h(e);var t=String.fromCharCode(e.which).toLowerCase();e.shiftKey&&(t=t.toUpperCase()),this.search.focus(),this.search.val(t),h(e)}}})),e.delegate("abbr","mousedown",this.bind(function(e){this.enabled&&(this.clear(),h(e),this.close(),this.triggerChange(),this.selection.focus())})),this.setPlaceholder(),this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")}))},clear:function(){this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder()},initSelection:function(){var t;if(""===this.opts.element.val())this.close(),this.setPlaceholder();else{var s=this;this.opts.initSelection.call(null,this.opts.element,function(t){t!==e&&null!==t&&(s.updateSelection(t),s.close(),s.setPlaceholder())})}},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments);return"select"===e.element.get(0).tagName.toLowerCase()&&(e.initSelection=function(e,t){var s=e.find(":selected");$.isFunction(t)&&t({id:s.attr("value"),text:s.text()})}),e},setPlaceholder:function(){var t=this.getPlaceholder();if(""===this.opts.element.val()&&t!==e){if(this.select&&""!==this.select.find("option:first").text())return;this.selection.find("span").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.selection.find("abbr").hide()}},postprocessResults:function(e,t){var i=0,n=this,o=!0;this.results.find(".select2-result-selectable").each2(function(e,t){return s(n.id(t.data("select2-data")),n.opts.element.val())?(i=e,!1):void 0}),this.highlight(i),t===!0&&(o=this.showSearchInput=b(e.results)>=this.opts.minimumResultsForSearch,this.dropdown.find(".select2-search")[o?"removeClass":"addClass"]("select2-search-hidden"),$(this.dropdown,this.container)[o?"addClass":"removeClass"]("select2-with-searchbox"))},onSelect:function(e){var t=this.opts.element.val();this.opts.element.val(this.id(e)),this.updateSelection(e),this.close(),this.selection.focus(),s(t,this.id(e))||this.triggerChange()},updateSelection:function(t){var s=this.selection.find("span"),i;this.selection.data("select2-data",t),s.empty(),i=this.opts.formatSelection(t,s),i!==e&&s.append(this.opts.escapeMarkup(i)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&this.selection.find("abbr").show()},val:function(){var t,s=null,i=this;if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],this.select)this.select.val(t).find(":selected").each2(function(e,t){return s={id:t.attr("value"),text:t.text()},!1}),this.updateSelection(s),this.setPlaceholder();else{if(this.opts.initSelection===e)throw new Error("cannot call val() if initSelection() is not defined");if(!t)return void this.clear();this.opts.element.val(t),this.opts.initSelection(this.opts.element,function(e){i.opts.element.val(e?i.id(e):""),i.updateSelection(e),i.setPlaceholder()})}},clearSearch:function(){this.search.val("")},data:function(t){var s;return 0===arguments.length?(s=this.selection.data("select2-data"),s==e&&(s=null),s):void(t&&""!==t?(this.opts.element.val(t?this.id(t):""),this.updateSelection(t)):this.clear())}}),E=C(y,{createContainer:function(){var e=$("<div></div>",{"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments);return"select"===e.element.get(0).tagName.toLowerCase()&&(e.initSelection=function(e,t){var s=[];e.find(":selected").each2(function(e,t){s.push({id:t.attr("value"),text:t.text()})}),$.isFunction(t)&&t(s)}),e},initContainer:function(){var e=".select2-choices",t;this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(e),this.search.bind("keydown",this.bind(function(e){if(this.enabled){if(e.which===S.BACKSPACE&&""===this.search.val()){this.close();var s,i=t.find(".select2-search-choice-focus");if(i.length>0)return this.unselect(i.first()),this.search.width(10),void h(e);s=t.find(".select2-search-choice"),s.length>0&&s.last().addClass("select2-search-choice-focus")}else t.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(e.which){case S.UP:case S.DOWN:return this.moveHighlight(e.which===S.UP?-1:1),void h(e);case S.ENTER:case S.TAB:return this.selectHighlighted(),void h(e);case S.ESC:return this.cancel(e),void h(e)}e.which===S.TAB||S.isControl(e)||S.isFunctionKey(e)||e.which===S.BACKSPACE||e.which===S.ESC||(this.opts.openOnEnter!==!1||e.which!==S.ENTER)&&(this.open(),(e.which===S.PAGE_UP||e.which===S.PAGE_DOWN)&&h(e))}})),this.search.bind("keyup",this.bind(this.resizeSearch)),this.search.bind("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.clearSearch(),e.stopImmediatePropagation()})),this.container.delegate(e,"mousedown",this.bind(function(e){this.enabled&&($(e.target).closest(".select2-search-choice").length>0||(this.clearPlaceholder(),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.delegate(e,"focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled"))},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0))},initSelection:function(){var t;if(""===this.opts.element.val()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var s=this;this.opts.initSelection.call(null,this.opts.element,function(t){t!==e&&null!==t&&(s.updateSelection(t),s.close(),s.clearSearch())})}},clearSearch:function(){var t=this.getPlaceholder();t!==e&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(t).addClass("select2-default"),this.resizeSearch()):this.search.val(" ").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")?this.search.val("").removeClass("select2-default"):" "===this.search.val()&&this.search.val("")},opening:function(){this.parent.opening.apply(this,arguments),this.clearPlaceholder(),this.resizeSearch(),this.focusSearch()},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var s=[],i=[],n=this;$(e).each(function(){t(n.id(this),s)<0&&(s.push(n.id(this)),i.push(this))}),e=i,this.selection.find(".select2-search-choice").remove(),$(e).each(function(){n.addSelectedChoice(this)}),n.postprocessResults()},tokenize:function(){var t=this.search.val();t=this.opts.tokenizer(t,this.data(),this.bind(this.onSelect),this.opts),null!=t&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(e){this.addSelectedChoice(e),this.select&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.positionDropdown()):this.close(),this.triggerChange({added:e}),this.focusSearch()},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(e){var t=$("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=this.id(e),i=this.getVal(),n;n=this.opts.formatSelection(e,t),t.find("div").replaceWith("<div>"+this.opts.escapeMarkup(n)+"</div>"),t.find(".select2-search-choice-close").bind("mousedown",h).bind("click dblclick",this.bind(function(e){this.enabled&&($(e.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect($(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),h(e))})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),t.data("select2-data",e),t.insertBefore(this.searchContainer),i.push(s),this.setVal(i)},unselect:function(e){var s=this.getVal(),i,n;if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";i=e.data("select2-data"),n=t(this.id(i),s),n>=0&&(s.splice(n,1),this.setVal(s),this.select&&this.postprocessResults()),e.remove(),this.triggerChange({removed:i})},postprocessResults:function(){var e=this.getVal(),s=this.results.find(".select2-result-selectable"),i=this.results.find(".select2-result-with-children"),n=this;s.each2(function(s,i){var o=n.id(i.data("select2-data"));t(o,e)>=0?i.addClass("select2-disabled").removeClass("select2-result-selectable"):i.removeClass("select2-disabled").addClass("select2-result-selectable")}),i.each2(function(e,t){0==t.find(".select2-result-selectable").length?t.addClass("select2-disabled"):t.removeClass("select2-disabled")}),s.each2(function(e,t){return!t.hasClass("select2-disabled")&&t.hasClass("select2-result-selectable")?(n.highlight(0),!1):void 0})},resizeSearch:function(){var e,t,s,i,o,a=n(this.search);e=d(this.search)+10,t=this.search.offset().left,s=this.selection.width(),i=this.selection.offset().left,o=s-(t-i)-a,e>o&&(o=s-a),40>o&&(o=s-a),this.search.width(o)},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),i(e,this.opts.separator))},setVal:function(e){var s;this.select?this.select.val(e):(s=[],$(e).each(function(){t(this,s)<0&&s.push(this)}),this.opts.element.val(0===s.length?"":s.join(this.opts.separator)));
},val:function(){var t,s=[],i=this;if(0===arguments.length)return this.getVal();if(t=arguments[0],!t)return this.opts.element.val(""),this.updateSelection([]),void this.clearSearch();if(this.setVal(t),this.select)this.select.find(":selected").each(function(){s.push({id:$(this).attr("value"),text:$(this).text()})}),this.updateSelection(s);else{if(this.opts.initSelection===e)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var t=$(e).map(i.id);i.setVal(t),i.updateSelection(e),i.clearSearch()})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],t=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(t.opts.id($(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e){var t=this,s;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return $(this).data("select2-data")}).get():(e||(e=[]),s=$.map(e,function(e){return t.opts.id(e)}),this.setVal(s),this.updateSelection(e),this.clearSearch(),void 0)}}),$.fn.select2=function(){var s=Array.prototype.slice.call(arguments,0),i,n,o,a,c=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];return this.each(function(){if(0===s.length||"object"==typeof s[0])i=0===s.length?{}:$.extend({},s[0]),i.element=$(this),"select"===i.element.get(0).tagName.toLowerCase()?a=i.element.attr("multiple"):(a=i.multiple||!1,"tags"in i&&(i.multiple=a=!0)),n=a?new E:new x,n.init(i);else{if("string"!=typeof s[0])throw"Invalid arguments to select2 plugin: "+s;if(t(s[0],c)<0)throw"Unknown method: "+s[0];if(o=e,n=$(this).data("select2"),n===e)return;if(o="container"===s[0]?n.container:n[s[0]].apply(n,s.slice(1)),o!==e)return!1}}),o===e?this:o},$.fn.select2.defaults={width:"copy",closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,s){var i=[];return u(e.text,s.term,i),i.join("")},formatSelection:function(t,s){return t?t.text:e},formatResultCssClass:function(t){return e},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){return"Please enter "+(t-e.length)+" more characters"},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return t.toUpperCase().indexOf(e.toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:w,escapeMarkup:function(e){return e&&"string"==typeof e?e.replace(/&/g,"&amp;"):e},blurOnChange:!1},window.Select2={query:{ajax:f,local:p,tags:m},util:{debounce:c,markMatch:u},"class":{"abstract":y,single:x,multi:E}}}}(jQuery);
!function(e){var t=/^\s*|\s*$/g,n,o="$1"==="B".replace(/A(.)|B/,"$1"),i={majorVersion:"3",minorVersion:"5.6",releaseDate:"2012-07-26",_init:function(){function t(e){return e.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(e.src)?(/_(src|dev)\.js/g.test(e.src)&&(n.suffix="_src"),-1!=(l=e.src.indexOf("?"))&&(n.query=e.src.substring(l+1)),n.baseURL=e.src.substring(0,e.src.lastIndexOf("/")),c&&-1==n.baseURL.indexOf("://")&&0!==n.baseURL.indexOf("/")&&(n.baseURL=c+n.baseURL),n.baseURL):null}var n=this,o=document,i=navigator,r=i.userAgent,a,s,d,c,l,u;if(n.isOpera=e.opera&&opera.buildNumber,n.isWebKit=/WebKit/.test(r),n.isIE=!n.isWebKit&&!n.isOpera&&/MSIE/gi.test(r)&&/Explorer/gi.test(i.appName),n.isIE6=n.isIE&&/MSIE [56]/.test(r),n.isIE7=n.isIE&&/MSIE [7]/.test(r),n.isIE8=n.isIE&&/MSIE [8]/.test(r),n.isIE9=n.isIE&&/MSIE [9]/.test(r),n.isGecko=!n.isWebKit&&/Gecko/.test(r),n.isMac=-1!=r.indexOf("Mac"),n.isAir=/adobeair/i.test(r),n.isIDevice=/(iPad|iPhone)/.test(r),n.isIOS5=n.isIDevice&&r.match(/AppleWebKit\/(\d*)/)[1]>=534,e.tinyMCEPreInit)return n.suffix=tinyMCEPreInit.suffix,n.baseURL=tinyMCEPreInit.base,void(n.query=tinyMCEPreInit.query);for(n.suffix="",s=o.getElementsByTagName("base"),a=0;a<s.length;a++)u=s[a].href,u&&(/^https?:\/\/[^\/]+$/.test(u)&&(u+="/"),c=u?u.match(/.*\//)[0]:"");for(s=o.getElementsByTagName("script"),a=0;a<s.length;a++)if(t(s[a]))return;if(d=o.getElementsByTagName("head")[0])for(s=d.getElementsByTagName("script"),a=0;a<s.length;a++)if(t(s[a]))return},is:function(e,t){return t?"array"==t&&e.hasOwnProperty&&e instanceof Array?!0:typeof e==t:e!==n},makeMap:function(e,t,n){var o;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},o=e.length;o--;)n[e[o]]={};return n},each:function(e,t,o){var i,r;if(!e)return 0;if(o=o||e,e.length!==n){for(i=0,r=e.length;r>i;i++)if(t.call(o,e[i],i,e)===!1)return 0}else for(i in e)if(e.hasOwnProperty(i)&&t.call(o,e[i],i,e)===!1)return 0;return 1},trim:function(e){return(e?""+e:"").replace(t,"")},create:function(e,t,n){var o=this,i,r,a,s,d,c=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),a=e[3].match(/(^|\.)(\w+)$/i)[2],r=o.createNS(e[3].replace(/\.\w+$/,""),n),!r[a]){if("static"==e[2])return r[a]=t,void(this.onCreate&&this.onCreate(e[2],e[3],r[a]));t[a]||(t[a]=function(){},c=1),r[a]=t[a],o.extend(r[a].prototype,t),e[5]&&(i=o.resolve(e[5]).prototype,s=e[5].match(/\.(\w+)$/i)[1],d=r[a],c?r[a]=function(){return i[s].apply(this,arguments)}:r[a]=function(){return this.parent=i[s],d.apply(this,arguments)},r[a].prototype[a]=r[a],o.each(i,function(e,t){r[a].prototype[t]=i[t]}),o.each(t,function(e,t){i[t]?r[a].prototype[t]=function(){return this.parent=i[t],e.apply(this,arguments)}:t!=a&&(r[a].prototype[t]=e)})),o.each(t["static"],function(e,t){r[a][t]=e}),this.onCreate&&this.onCreate(e[2],e[3],r[a].prototype)}},walk:function(e,t,n,o){o=o||this,e&&(n&&(e=e[n]),i.each(e,function(e,r){return t.call(o,e,r,n)===!1?!1:void i.walk(e,t,n,o)}))},createNS:function(t,n){var o,i;for(n=n||e,t=t.split("."),o=0;o<t.length;o++)i=t[o],n[i]||(n[i]={}),n=n[i];return n},resolve:function(t,n){var o,i;for(n=n||e,t=t.split("."),o=0,i=t.length;i>o&&(n=n[t[o]],n);o++);return n},addUnload:function(t,n){function o(){function t(){n.detachEvent("onstop",t),r&&r(),n=0}var n=document;"interactive"==n.readyState&&(n&&n.attachEvent("onstop",t),e.setTimeout(function(){n&&n.detachEvent("onstop",t)},0))}var i=this,r;return r=function(){var t=i.unloads,n,a;if(t){for(a in t)n=t[a],n&&n.func&&n.func.call(n.scope,1);e.detachEvent?(e.detachEvent("onbeforeunload",o),e.detachEvent("onunload",r)):e.removeEventListener&&e.removeEventListener("unload",r,!1),i.unloads=n=t=w=r=0,e.CollectGarbage&&CollectGarbage()}},t={func:t,scope:n||this},i.unloads?i.unloads.push(t):(e.attachEvent?(e.attachEvent("onunload",r),e.attachEvent("onbeforeunload",o)):e.addEventListener&&e.addEventListener("unload",r,!1),i.unloads=[t]),t},removeUnload:function(e){var t=this.unloads,n=null;return i.each(t,function(o,i){return o&&o.func==e?(t.splice(i,1),n=e,!1):void 0}),n},explode:function(e,t){return!e||i.is(e,"array")?e:i.map(e.split(t||","),i.trim)},_addVer:function(e){var t;return this.query?(t=(-1==e.indexOf("?")?"?":"&")+this.query,-1==e.indexOf("#")?e+t:e.replace("#",t+"#")):e},_replace:function(e,t,i){return o?i.replace(e,function(){var e=t,o=arguments,i;for(i=0;i<o.length-2;i++)e=o[i]===n?e.replace(new RegExp("\\$"+i,"g"),""):e.replace(new RegExp("\\$"+i,"g"),o[i]);return e}):i.replace(e,t)}};i._init(),e.tinymce=e.tinyMCE=i}(window),function(e,t){var n=t.is,o=/^(href|src|style)$/i,i;if(!e&&window.console)return console.log("Load jQuery first!");t.$=e,t.adapter={patchEditor:function(t){function n(e,t){var n=this;return t&&n.removeAttr("data-mce-style"),s.css.apply(n,arguments)}function r(e,n){var r=this;return o.test(e)?n!==i?(r.each(function(o,i){t.dom.setAttrib(i,e,n)}),r):r.attr("data-mce-"+e):s.attr.apply(r,arguments)}function a(e){return e.css!==n&&(e.css=n,e.attr=r,e.tinymce=t,e.pushStack=function(){return a(s.pushStack.apply(this,arguments))}),e}var s=e.fn;t.$=function(n,o){var i=t.getDoc();return a(e(n||i,i||o))}}},t.extend=e.extend,t.extend(t,{map:e.map,grep:function(t,n){return e.grep(t,n||function(){return 1})},inArray:function(t,n){return e.inArray(n,t||[])}});var r={"tinymce.dom.DOMUtils":{select:function(t,n){var o=this;return e.find(t,o.get(n)||o.get(o.settings.root_element)||o.doc,[])},is:function(t,n){return e(this.get(t)).is(n)}}};t.onCreate=function(e,n,o){t.extend(o,r[n])}}(window.jQuery,tinymce),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,inDispatch:!1,Dispatcher:function(e){this.scope=e||this,this.listeners=[]},add:function(e,t){return this.listeners.push({cb:e,scope:t||this.scope}),e},addToTop:function(e,t){var n=this,o={cb:e,scope:t||n.scope};return n.inDispatch?n.listeners=[o].concat(n.listeners):n.listeners.unshift(o),e},remove:function(e){var t=this.listeners,n=null;return tinymce.each(t,function(o,i){return e==o.cb?(n=o,t.splice(i,1),!1):void 0}),n},dispatch:function(){var e=this,t,n=arguments,o,i=e.listeners,r;for(e.inDispatch=!0,o=0;o<i.length&&(r=i[o],t=r.cb.apply(r.scope,n.length>0?n:[r.scope]),t!==!1);o++);return e.inDispatch=!1,t}}),function(){var e=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(t,n){var o=this,i,r,a,s;return t=tinymce.trim(t),n=o.settings=n||{},/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)?void(o.source=t):(0===t.indexOf("/")&&0!==t.indexOf("//")&&(t=(n.base_uri?n.base_uri.protocol||"http":"http")+"://mce_host"+t),/^[\w\-]*:?\/\//.test(t)||(s=n.base_uri?n.base_uri.path:new tinymce.util.URI(location.href).directory,t=(n.base_uri&&n.base_uri.protocol||"http")+"://mce_host"+o.toAbsPath(s,t)),t=t.replace(/@@/g,"(mce_at)"),t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),e(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(e,n){var i=t[n];i&&(i=i.replace(/\(mce_at\)/g,"@@")),o[e]=i}),a=n.base_uri,void(a&&(o.protocol||(o.protocol=a.protocol),o.userInfo||(o.userInfo=a.userInfo),o.port||"mce_host"!==o.host||(o.port=a.port),o.host&&"mce_host"!==o.host||(o.host=a.host),o.source="")))},setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t=this,n;if("./"===e)return e;if(e=new tinymce.util.URI(e,{base_uri:t}),"mce_host"!=e.host&&t.host!=e.host&&e.host||t.port!=e.port||t.protocol!=e.protocol)return e.getURI();var o=t.getURI(),i=e.getURI();return o==i||"/"==o.charAt(o.length-1)&&o.substr(0,o.length-1)==i?o:(n=t.toRelPath(t.path,e.path),e.query&&(n+="?"+e.query),e.anchor&&(n+="#"+e.anchor),n)},toAbsolute:function(e,t){return e=new tinymce.util.URI(e,{base_uri:this}),e.getURI(this.host==e.host&&this.protocol==e.protocol?t:0)},toRelPath:function(e,t){var n,o=0,i="",r,a;if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(r=0,a=e.length;a>r;r++)if(r>=n.length||e[r]!=n[r]){o=r+1;break}if(e.length<n.length)for(r=0,a=n.length;a>r;r++)if(r>=e.length||e[r]!=n[r]){o=r+1;break}if(1===o)return t;for(r=0,a=e.length-(o-1);a>r;r++)i+="../";for(r=o-1,a=n.length;a>r;r++)i+=r!=o-1?"/"+n[r]:n[r];return i},toAbsPath:function(t,n){var o,i=0,r=[],a,s;for(a=/\/$/.test(n)?"/":"",t=t.split("/"),n=n.split("/"),e(t,function(e){e&&r.push(e)}),t=r,o=n.length-1,r=[];o>=0;o--)0!==n[o].length&&"."!==n[o]&&(".."!==n[o]?i>0?i--:r.push(n[o]):i++);return o=t.length-i,s=0>=o?r.reverse().join("/"):t.slice(0,o).join("/")+"/"+r.reverse().join("/"),0!==s.indexOf("/")&&(s="/"+s),a&&s.lastIndexOf("/")!==s.length-1&&(s+=a),s},getURI:function(e){var t,n=this;return(!n.source||e)&&(t="",e||(n.protocol&&(t+=n.protocol+"://"),n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}})}(),function(){var e=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(t){var n=this.get(t),o;return n&&e(n.split("&"),function(e){e=e.split("="),o=o||{},o[unescape(e[0])]=unescape(e[1])}),o},setHash:function(t,n,o,i,r,a){var s="";e(n,function(e,t){s+=(s?"&":"")+escape(t)+"="+escape(e)}),this.set(t,s,o,i,r,a)},get:function(e){var t=document.cookie,n,o=e+"=",i;if(t){if(i=t.indexOf("; "+o),-1==i){if(i=t.indexOf(o),0!==i)return null}else i+=2;return n=t.indexOf(";",i),-1==n&&(n=t.length),unescape(t.substring(i+o.length,n))}},set:function(e,t,n,o,i,r){document.cookie=e+"="+escape(t)+(n?"; expires="+n.toGMTString():"")+(o?"; path="+escape(o):"")+(i?"; domain="+i:"")+(r?"; secure":"")},remove:function(e,t,n){var o=new Date;o.setTime(o.getTime()-1e3),this.set(e,"",o,t,n)}})}(),function(){function serialize(e,t){var n,o,i,r;if(t=t||'"',null==e)return"null";if(i=typeof e,"string"==i)return o="\bb	t\nn\ff\rr\"\"''\\\\",t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,i){return'"'===t&&"'"===e?e:(n=o.indexOf(i),n+1?"\\"+o.charAt(n+1):(e=i.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+t;if("object"==i){if(e.hasOwnProperty&&e instanceof Array){for(n=0,o="[";n<e.length;n++)o+=(n>0?",":"")+serialize(e[n],t);return o+"]"}o="{";for(r in e)e.hasOwnProperty(r)&&(o+="function"!=typeof e[r]?(o.length>1?","+t:t)+r+t+":"+serialize(e[r],t):"");return o+"}"}return""+e}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(e){function t(){!e.async||4==o.readyState||a++>1e4?(e.success&&1e4>a&&200==o.status?e.success.call(e.success_scope,""+o.responseText,o,e):e.error&&e.error.call(e.error_scope,a>1e4?"TIMED_OUT":"GENERAL",o,e),o=null):r.setTimeout(t,10)}function n(e){o=0;try{o=new ActiveXObject(e)}catch(t){}return o}var o,i,r=window,a=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async===!1?!1:!0,e.data=e.data||"",o=r.XMLHttpRequest?new XMLHttpRequest:n("Microsoft.XMLHTTP")||n("Msxml2.XMLHTTP")){if(o.overrideMimeType&&o.overrideMimeType(e.content_type),o.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.content_type&&o.setRequestHeader("Content-Type",e.content_type),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.send(e.data),!e.async)return t();i=r.setTimeout(t,10)}}}),function(){var e=tinymce.extend,t=tinymce.util.JSON,n=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(t){this.settings=e({},t),this.count=0},send:function(o){var i=o.error,r=o.success;o=e(this.settings,o),o.success=function(e,n){e=t.parse(e),"undefined"==typeof e&&(e={error:"JSON Parse error."}),e.error?i.call(o.error_scope||o.scope,e.error,n):r.call(o.success_scope||o.scope,e.result)},o.error=function(e,t){i&&i.call(o.error_scope||o.scope,e,t)},o.data=t.serialize({id:o.id||"c"+this.count++,method:o.method,params:o.params}),o.content_type="application/json",n.send(o)},"static":{sendRPC:function(e){return(new tinymce.util.JSONRequest).send(e)}}})}(),function(e){e.VK={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey},metaKeyPressed:function(t){return e.isMac?t.metaKey:t.ctrlKey&&!t.altKey}}}(tinymce),tinymce.util.Quirks=function(e){function t(t,n){try{e.getDoc().execCommand(t,!1,n)}catch(o){}}function n(){var t=e.getDoc().documentMode;return t?t:6}function o(){function t(t){var n,o,i,r;if(n=A.getRng(),o=T.getParent(n.startContainer,T.isBlock),t&&(o=T.getNext(o,T.isBlock)),o){for(i=o.firstChild;i&&3==i.nodeType&&0===i.nodeValue.length;)i=i.nextSibling;i&&"SPAN"===i.nodeName&&(r=i.cloneNode(!1))}e.getDoc().execCommand(t?"ForwardDelete":"Delete",!1,null),o=T.getParent(n.startContainer,T.isBlock),tinymce.each(T.select("span.Apple-style-span,font.Apple-style-span",o),function(e){var t=A.getBookmark();r?T.replace(r.cloneNode(!1),e,!0):T.remove(e,!0),A.moveToBookmark(t)})}e.onKeyDown.add(function(e,n){var o;o=n.keyCode==N,n.isDefaultPrevented()||!o&&n.keyCode!=w||E.modifierPressed(n)||(n.preventDefault(),t(o))}),e.addCommand("Delete",function(){t()})}function i(){function t(e){var t=T.create("body"),n=e.cloneContents();return t.appendChild(n),A.serializer.serialize(t,{format:"html"})}function n(n){var o=t(n),i=T.createRng();i.selectNode(e.getBody());var r=t(i);return o===r}e.onKeyDown.add(function(e,t){var o=t.keyCode,i;if(!t.isDefaultPrevented()&&(o==N||o==w)){if(i=e.selection.isCollapsed(),i&&!T.isEmpty(e.getBody()))return;if(tinymce.isIE&&!i)return;if(!i&&!n(e.selection.getRng()))return;e.setContent(""),e.selection.setCursorLocation(e.getBody(),0),e.nodeChanged()}})}function r(){e.onKeyDown.add(function(e,t){65==t.keyCode&&E.metaKeyPressed(t)&&(t.preventDefault(),e.execCommand("SelectAll"))})}function a(){e.settings.content_editable||(T.bind(e.getDoc(),"focusin",function(e){A.setRng(A.getRng())}),T.bind(e.getDoc(),"mousedown",function(t){t.target==e.getDoc().documentElement&&(e.getWin().focus(),A.setRng(A.getRng()))}))}function s(){e.onKeyDown.add(function(e,t){if(!t.isDefaultPrevented()&&t.keyCode===w&&A.isCollapsed()&&0===A.getRng(!0).startOffset){var n=A.getNode(),o=n.previousSibling;o&&o.nodeName&&"hr"===o.nodeName.toLowerCase()&&(T.remove(o),tinymce.dom.Event.cancel(t))}})}function d(){Range.prototype.getClientRects||e.onMouseDown.add(function(e,t){if("HTML"===t.target.nodeName){var n=e.getBody();n.blur(),setTimeout(function(){n.focus()},0)}})}function c(){e.onClick.add(function(e,t){t=t.target,/^(IMG|HR)$/.test(t.nodeName)&&A.getSel().setBaseAndExtent(t,0,t,1),"A"==t.nodeName&&T.hasClass(t,"mceItemAnchor")&&A.select(t),e.nodeChanged()})}function l(){function t(){var t=T.getAttribs(A.getStart().cloneNode(!1));return function(){var n=A.getStart();n!==e.getBody()&&(T.setAttrib(n,"style",null),tinymce.each(t,function(e){n.setAttributeNode(e.cloneNode(!0))}))}}function n(){return!A.isCollapsed()&&T.getParent(A.getStart(),T.isBlock)!=T.getParent(A.getEnd(),T.isBlock)}function o(e,t){return t.preventDefault(),!1}e.onKeyPress.add(function(e,o){var i;return 8!=o.keyCode&&46!=o.keyCode||!n()?void 0:(i=t(),e.getDoc().execCommand("delete",!1,null),i(),o.preventDefault(),!1)}),T.bind(e.getDoc(),"cut",function(i){var r;n()&&(r=t(),e.onKeyUp.addToTop(o),setTimeout(function(){r(),e.onKeyUp.remove(o)},0))})}function u(){var t,n;T.bind(e.getDoc(),"selectionchange",function(){n&&(clearTimeout(n),n=0),n=window.setTimeout(function(){var n=A.getRng();t&&tinymce.dom.RangeUtils.compareRanges(n,t)||(e.nodeChanged(),t=n)},50)})}function f(){document.body.setAttribute("role","application")}function p(){e.onKeyDown.add(function(e,t){if(!t.isDefaultPrevented()&&t.keyCode===w&&A.isCollapsed()&&0===A.getRng(!0).startOffset){var n=A.getNode().previousSibling;if(n&&n.nodeName&&"table"===n.nodeName.toLowerCase())return tinymce.dom.Event.cancel(t)}})}function m(){n()>7||(t("RespectVisibilityInDesign",!0),e.contentStyles.push(".mceHideBrInPre pre br {display: none}"),T.addClass(e.getBody(),"mceHideBrInPre"),e.parser.addNodeFilter("pre",function(e,t){for(var n=e.length,o,i,r,a;n--;)for(o=e[n].getAll("br"),i=o.length;i--;)r=o[i],a=r.prev,a&&3===a.type&&"\n"!=a.value.charAt(a.value-1)?a.value+="\n":r.parent.insert(new tinymce.html.Node("#text",3),r,!0).value="\n"}),e.serializer.addNodeFilter("pre",function(e,t){for(var n=e.length,o,i,r,a;n--;)for(o=e[n].getAll("br"),i=o.length;i--;)r=o[i],a=r.prev,a&&3==a.type&&(a.value=a.value.replace(/\r?\n$/,""))}))}function h(){T.bind(e.getBody(),"mouseup",function(e){var t,n=A.getNode();"IMG"==n.nodeName&&((t=T.getStyle(n,"width"))&&(T.setAttrib(n,"width",t.replace(/[^0-9%]+/g,"")),T.setStyle(n,"width","")),(t=T.getStyle(n,"height"))&&(T.setAttrib(n,"height",t.replace(/[^0-9%]+/g,"")),T.setStyle(n,"height","")))})}function g(){e.onKeyDown.add(function(e,t){var n,o,i,r,a,s,d;n=t.keyCode==N,t.isDefaultPrevented()||!n&&t.keyCode!=w||E.modifierPressed(t)||(o=A.getRng(),i=o.startContainer,r=o.startOffset,d=o.collapsed,3==i.nodeType&&i.nodeValue.length>0&&(0===r&&!d||d&&r===(n?0:1))&&(nonEmptyElements=e.schema.getNonEmptyElements(),t.preventDefault(),a=T.create("br",{id:"__tmp"}),i.parentNode.insertBefore(a,i),e.getDoc().execCommand(n?"ForwardDelete":"Delete",!1,null),i=A.getRng().startContainer,s=i.previousSibling,s&&1==s.nodeType&&!T.isBlock(s)&&T.isEmpty(s)&&!nonEmptyElements[s.nodeName.toLowerCase()]&&T.remove(s),T.remove("__tmp")))})}function v(){e.onKeyDown.add(function(e,t){var n,o,i,r,a;if(!t.isDefaultPrevented()&&t.keyCode==E.BACKSPACE&&(n=A.getRng(),o=n.startContainer,i=n.startOffset,r=T.getRoot(),a=o,n.collapsed&&0===i)){for(;a&&a.parentNode&&a.parentNode.firstChild==a&&a.parentNode!=r;)a=a.parentNode;"BLOCKQUOTE"===a.tagName&&(e.formatter.toggle("blockquote",null,a),n.setStart(o,0),n.setEnd(o,0),A.setRng(n),A.collapse(!1))}})}function y(){function n(){e._refreshContentEditable(),t("StyleWithCSS",!1),t("enableInlineTableEditing",!1),B.object_resizing||t("enableObjectResizing",!1)}B.readonly||(e.onBeforeExecCommand.add(n),e.onMouseDown.add(n))}function b(){function t(e,t){tinymce.each(T.select("a"),function(e){var t=e.parentNode,n=T.getRoot();if(t.lastChild===e){for(;t&&!T.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}T.add(t,"br",{"data-mce-bogus":1})}})}e.onExecCommand.add(function(e,n){"CreateLink"===n&&t(e)}),e.onSetContent.add(A.onSetContent.add(t))}function C(){B.forced_root_block&&e.onInit.add(function(){t("DefaultParagraphSeparator",B.forced_root_block)})}function _(){function t(t,n){t&&n.initial||e.execCommand("mceRepaint")}e.onUndo.add(t),e.onRedo.add(t),e.onSetContent.add(t)}function x(){e.onKeyDown.add(function(e,t){var n;t.isDefaultPrevented()||t.keyCode!=w||(n=e.getDoc().selection.createRange(),n&&n.item&&(t.preventDefault(),e.undoManager.beforeChange(),T.remove(n.item(0)),e.undoManager.add()))})}function k(){var t;n()>=10&&(t="",tinymce.each("p div h1 h2 h3 h4 h5 h6".split(" "),function(e,n){t+=(n>0?",":"")+e+":empty"}),e.contentStyles.push(t+"{padding-right: 1px !important}"))}function S(){function n(e){var t,n;t=e.screenX-f,n=e.screenY-p,y=t*u[2]+m,b=n*u[3]+h,y=5>y?5:y,b=5>b?5:b,(E.modifierPressed(e)||"IMG"==c.nodeName&&u[2]*u[3]!==0)&&(y=Math.round(b/g),b=Math.round(y*g)),T.setStyles(l,{width:y,height:b}),u[2]<0&&l.clientWidth<=y&&T.setStyle(l,"left",s+(m-y)),u[3]<0&&l.clientHeight<=b&&T.setStyle(l,"top",d+(h-b))}function o(){function t(t,n){n&&(c.style[t]||!e.schema.isValid(c.nodeName.toLowerCase(),t)?T.setStyle(c,t,n):T.setAttrib(c,t,n))}t("width",y),t("height",b),T.unbind(_,"mousemove",n),T.unbind(_,"mouseup",o),C!=_&&(T.unbind(C,"mousemove",n),T.unbind(C,"mouseup",o)),T.remove(l),i(c)}function i(e){var t,i,a;r(),t=T.getPos(e),s=t.x,d=t.y,i=e.offsetWidth,a=e.offsetHeight,c!=e&&(c=e,y=b=0),tinymce.each(v,function(e,t){var r;r=T.get("mceResizeHandle"+t),r?T.show(r):(r=T.add(_.documentElement,"div",{id:"mceResizeHandle"+t,"class":"mceResizeHandle",style:"cursor:"+t+"-resize; margin:0; padding:0"}),T.bind(r,"mousedown",function(t){t.preventDefault(),o(),f=t.screenX,p=t.screenY,m=c.clientWidth,h=c.clientHeight,g=h/m,u=e,l=c.cloneNode(!0),T.addClass(l,"mceClonedResizable"),T.setStyles(l,{left:s,top:d,margin:0}),_.documentElement.appendChild(l),T.bind(_,"mousemove",n),T.bind(_,"mouseup",o),C!=_&&(T.bind(C,"mousemove",n),T.bind(C,"mouseup",o))})),T.setStyles(r,{left:i*e[0]+s-r.offsetWidth/2,top:a*e[1]+d-r.offsetHeight/2})}),tinymce.isOpera||"IMG"!=c.nodeName||c.setAttribute("data-mce-selected","1")}function r(){c&&c.removeAttribute("data-mce-selected");for(var e in v)T.hide("mceResizeHandle"+e)}function a(){var e=T.getParent(A.getNode(),"table,img");tinymce.each(T.select("img[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),e?i(e):r()}var s,d,c,l,u,f,p,m,h,g,v,y,b,C=document,_=e.getDoc();B.object_resizing&&B.webkit_fake_resize!==!1&&(t("enableObjectResizing",!1),v={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},e.contentStyles.push(".mceResizeHandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}.mceResizeHandle:hover {background: #000}img[data-mce-selected] {outline: 1px solid black}img.mceClonedResizable, table.mceClonedResizable {position: absolute;outline: 1px dashed black;opacity: .5;z-index: 10000}"),e.onNodeChange.add(a),T.bind(_,"selectionchange",a),e.serializer.addAttributeFilter("data-mce-selected",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}))}var E=tinymce.VK,w=E.BACKSPACE,N=E.DELETE,T=e.dom,A=e.selection,B=e.settings;p(),v(),i(),tinymce.isWebKit&&(g(),o(),a(),c(),C(),tinymce.isIDevice?u():(S(),r())),tinymce.isIE&&(s(),f(),m(),h(),x(),k()),tinymce.isGecko&&(s(),d(),l(),y(),b(),_()),tinymce.isOpera&&S()},function(e){function t(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function n(e,t){var n,o,r,a={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)o=String.fromCharCode(parseInt(e[n],t)),i[o]||(r="&"+e[n+1]+";",a[o]=r,a[r]=o);return a}}var o,i,r,a=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,s=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=/[<>&\"\']/g,c=/&(#x|#)?([\w]+);/g,l={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};i={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},r={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},o=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),e.html=e.html||{},e.html.Entities={encodeRaw:function(e,t){return e.replace(t?a:s,function(e){return i[e]||e})},encodeAllRaw:function(e){return(""+e).replace(d,function(e){return i[e]||e})},encodeNumeric:function(e,t){return e.replace(t?a:s,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":i[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){return n=n||o,e.replace(t?a:s,function(e){return i[e]||n[e]||e})},getEncodeFunc:function(t,r){function d(e,t){return e.replace(t?a:s,function(e){return i[e]||r[e]||"&#"+e.charCodeAt(0)+";"||e})}function c(e,t){return l.encodeNamed(e,t,r)}var l=e.html.Entities;return r=n(r)||o,t=e.makeMap(t.replace(/\+/g,",")),t.named&&t.numeric?d:t.named?r?c:l.encodeNamed:t.numeric?l.encodeNumeric:l.encodeRaw},decode:function(e){return e.replace(c,function(e,n,i){return n?(i=parseInt(i,2===n.length?16:10),i>65535?(i-=65536,String.fromCharCode(55296+(i>>10),56320+(1023&i))):l[i]||String.fromCharCode(i)):r[e]||o[e]||t(e)})}}}(tinymce),tinymce.html.Styles=function(e,t){function n(e,t,n,o){function i(e){return e=parseInt(e).toString(16),e.length>1?e:"0"+e}return"#"+i(t)+i(n)+i(o)}var o=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,i=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,a=/\s+$/,s=/rgb/,d,c,l={},u;for(e=e||{},u="\\\" \\' \\; \\: ; : \ufeff".split(" "),c=0;c<u.length;c++)l[u[c]]="\ufeff"+c,l["\ufeff"+c]=u[c];return{toHex:function(e){return e.replace(o,n)},parse:function(t){function s(e,t){var n,o,i,r;n=m[e+"-top"+t],n&&(o=m[e+"-right"+t],n==o&&(i=m[e+"-bottom"+t],o==i&&(r=m[e+"-left"+t],i==r&&(m[e+t]=r,delete m[e+"-top"+t],delete m[e+"-right"+t],delete m[e+"-bottom"+t],delete m[e+"-left"+t]))))}function d(e){var t=m[e],n;if(t&&!(t.indexOf(" ")<0)){for(t=t.split(" "),n=t.length;n--;)if(t[n]!==t[0])return!1;return m[e]=t[0],!0}}function c(e,t,n,o){d(t)&&d(n)&&d(o)&&(m[e]=m[t]+" "+m[n]+" "+m[o],delete m[t],delete m[n],delete m[o])}function u(e){return y=!0,l[e]}function f(e,t){return y&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return l[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function p(e,t,n,o,i,r){return(i=i||r)?(i=f(i),"'"+i.replace(/\'/g,"\\'")+"'"):(t=f(t||n||o),b&&(t=b.call(C,t,"style")),"url('"+t.replace(/\'/g,"\\'")+"')")}var m={},h,g,v,y,b=e.url_converter,C=e.url_converter_scope||this;if(t){for(t=t.replace(/\\[\"\';:\uFEFF]/g,u).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,u)});h=r.exec(t);)g=h[1].replace(a,"").toLowerCase(),v=h[2].replace(a,""),g&&v.length>0&&("font-weight"===g&&"700"===v?v="bold":("color"===g||"background-color"===g)&&(v=v.toLowerCase()),v=v.replace(o,n),v=v.replace(i,p),m[g]=y?f(v,!0):v),r.lastIndex=h.index+h[0].length;s("border",""),s("border","-width"),s("border","-color"),s("border","-style"),s("padding",""),s("margin",""),c("border","border-width","border-style","border-color"),"medium none"===m.border&&delete m.border}return m},serialize:function(e,n){function o(n){var o,r,a,s;if(o=t.styles[n])for(r=0,a=o.length;a>r;r++)n=o[r],s=e[n],s!==d&&s.length>0&&(i+=(i.length>0?" ":"")+n+": "+s+";")}var i="",r,a;if(n&&t&&t.styles)o("*"),o(n);else for(r in e)a=e[r],a!==d&&a.length>0&&(i+=(i.length>0?" ":"")+r+": "+a+";");return i}}},function(e){function t(e,t){return e.split(t||",")}function n(e,n){function o(t){return t.replace(/[A-Z]+/g,function(t){return o(e[t])})}var i,r={};for(i in e)e.hasOwnProperty(i)&&(e[i]=o(e[i]));return o(n).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(e,n,o,i){o=t(o,"|"),r[n]={attributes:a(o),attributesOrder:o,children:a(i,"|",{"#comment":{}})}}),r}function o(){var e=r.html5;return e||(e=r.html5=n({A:"id|accesskey|class|dir|draggable|item|hidden|itemprop|role|spellcheck|style|subject|title|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"#|a|abbr|area|audio|b|bdo|br|button|canvas|cite|code|command|datalist|del|dfn|em|embed|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|meta|meter|noscript|object|output|progress|q|ruby|samp|script|select|small|span|strong|sub|sup|svg|textarea|time|var|video|wbr",C:"#|a|abbr|area|address|article|aside|audio|b|bdo|blockquote|br|button|canvas|cite|code|command|datalist|del|details|dfn|dialog|div|dl|em|embed|fieldset|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|menu|meta|meter|nav|noscript|ol|object|output|p|pre|progress|q|ruby|samp|script|section|select|small|span|strong|style|sub|sup|svg|table|textarea|time|ul|var|video"},"html[A|manifest][body|head]head[A][base|command|link|meta|noscript|script|style|title]title[A][#]base[A|href|target][]link[A|href|rel|media|type|sizes][]meta[A|http-equiv|name|content|charset][]style[A|type|media|scoped][#]script[A|charset|type|src|defer|async][#]noscript[A][C]body[A][C]section[A][C]nav[A][C]article[A][C]aside[A][C]h1[A][B]h2[A][B]h3[A][B]h4[A][B]h5[A][B]h6[A][B]hgroup[A][h1|h2|h3|h4|h5|h6]header[A][C]footer[A][C]address[A][C]p[A][B]br[A][]pre[A][B]dialog[A][dd|dt]blockquote[A|cite][C]ol[A|start|reversed][li]ul[A][li]li[A|value][C]dl[A][dd|dt]dt[A][B]dd[A][C]a[A|href|target|ping|rel|media|type][B]em[A][B]strong[A][B]small[A][B]cite[A][B]q[A|cite][B]dfn[A][B]abbr[A][B]code[A][B]var[A][B]samp[A][B]kbd[A][B]sub[A][B]sup[A][B]i[A][B]b[A][B]mark[A][B]progress[A|value|max][B]meter[A|value|min|max|low|high|optimum][B]time[A|datetime][B]ruby[A][B|rt|rp]rt[A][B]rp[A][B]bdo[A][B]span[A][B]ins[A|cite|datetime][B]del[A|cite|datetime][B]figure[A][C|legend|figcaption]figcaption[A][C]img[A|alt|src|height|width|usemap|ismap][]iframe[A|name|src|height|width|sandbox|seamless][]embed[A|src|height|width|type][]object[A|data|type|height|width|usemap|name|form|classid][param]param[A|name|value][]details[A|open][C|legend]command[A|type|label|icon|disabled|checked|radiogroup][]menu[A|type|label][C|li]legend[A][C|B]div[A][C]source[A|src|type|media][]audio[A|src|autobuffer|autoplay|loop|controls][source]video[A|src|autobuffer|autoplay|loop|controls|width|height|poster][source]hr[A][]form[A|accept-charset|action|autocomplete|enctype|method|name|novalidate|target][C]fieldset[A|disabled|form|name][C|legend]label[A|form|for][B]input[A|type|accept|alt|autocomplete|checked|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|height|list|max|maxlength|min|multiple|pattern|placeholder|readonly|required|size|src|step|width|files|value|name][]button[A|autofocus|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|name|value|type][B]select[A|autofocus|disabled|form|multiple|name|size][option|optgroup]datalist[A][B|option]optgroup[A|disabled|label][option]option[A|disabled|selected|label|value][]textarea[A|autofocus|disabled|form|maxlength|name|placeholder|readonly|required|rows|cols|wrap][]keygen[A|autofocus|challenge|disabled|form|keytype|name][]output[A|for|form|name][B]canvas[A|width|height][]map[A|name][B|C]area[A|shape|coords|href|alt|target|media|rel|ping|type][]mathml[A][]svg[A][]table[A|border][caption|colgroup|thead|tfoot|tbody|tr]caption[A][C]colgroup[A|span][col]col[A|span][]thead[A][tr]tfoot[A][tr]tbody[A][tr]tr[A][th|td]th[A|headers|rowspan|colspan|scope][B]td[A|headers|rowspan|colspan][C]wbr[A][]")),
e}function i(){var e=r.html4;return e||(e=r.html4=n({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]")),e}var r={},a=e.makeMap,s=e.each;e.html.Schema=function(n){function d(t,o,i){var s=n[t];return s?s=a(s,",",a(s.toUpperCase()," ")):(s=r[t],s||(s=a(o," ",a(o.toUpperCase()," ")),s=e.extend(s,i),r[t]=s)),s}function c(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function l(n){var o,i,r,s,d,l,u,f,p,m,h,v,b,C,_,x,k,S,E,w,N,T,A=/^([#+\-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,B=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,M=/[*?+]/;if(n)for(n=t(n),g["@"]&&(k=g["@"].attributes,S=g["@"].attributesOrder),o=0,i=n.length;i>o;o++)if(l=A.exec(n[o])){if(_=l[1],m=l[2],x=l[3],p=l[4],b={},C=[],u={attributes:b,attributesOrder:C},"#"===_&&(u.paddEmpty=!0),"-"===_&&(u.removeEmpty=!0),k){for(w in k)b[w]=k[w];C.push.apply(C,S)}if(p)for(p=t(p,"|"),r=0,s=p.length;s>r;r++)if(l=B.exec(p[r])){if(f={},v=l[1],h=l[2].replace(/::/g,":"),_=l[3],T=l[4],"!"===v&&(u.attributesRequired=u.attributesRequired||[],u.attributesRequired.push(h),f.required=!0),"-"===v){delete b[h],C.splice(e.inArray(C,h),1);continue}_&&("="===_&&(u.attributesDefault=u.attributesDefault||[],u.attributesDefault.push({name:h,value:T}),f.defaultValue=T),":"===_&&(u.attributesForced=u.attributesForced||[],u.attributesForced.push({name:h,value:T}),f.forcedValue=T),"<"===_&&(f.validValues=a(T,"?"))),M.test(h)?(u.attributePatterns=u.attributePatterns||[],f.pattern=c(h),u.attributePatterns.push(f)):(b[h]||C.push(h),b[h]=f)}k||"@"!=m||(k=b,S=C),x&&(u.outputName=m,g[x]=u),M.test(m)?(u.pattern=c(m),y.push(u)):g[m]=u}}function u(e){g={},y=[],l(e),s(C,function(e,t){v[t]=e.children})}function f(e){var n=/^(~)?(.+)$/;e&&s(t(e),function(e){var t=n.exec(e),o="~"===t[1],i=o?"span":"div",r=t[2];v[r]=v[i],N[r]=i,o||(E[r]={}),s(v,function(e,t){e[i]&&(e[r]=e[i])})})}function p(e){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&s(t(e),function(e){var o=n.exec(e),i,r;o&&(r=o[1],i=r?v[o[2]]:v[o[2]]={"#comment":{}},i=v[o[2]],s(t(o[3],"|"),function(e){"-"===r?delete i[e]:i[e]={}}))})}function m(e){var t=g[e],n;if(t)return t;for(n=y.length;n--;)if(t=y[n],t.pattern.test(e))return t}var h=this,g={},v={},y=[],b,C,_,x,k,S,E,w,N={};n=n||{},C="html5"==n.schema?o():i(),n.verify_html===!1&&(n.valid_elements="*[*]"),n.valid_styles&&(b={},s(n.valid_styles,function(t,n){b[n]=e.explode(t)})),_=d("whitespace_elements","pre script style textarea"),x=d("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),k=d("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr"),S=d("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),w=d("non_empty_elements","td th iframe video audio object",k),E=d("block_elements","h1 h2 h3 h4 h5 h6 hr p div address pre form table tbody thead tfoot th tr td li ol ul caption blockquote center dl dt dd dir fieldset noscript menu isindex samp header footer article section hgroup aside nav figure option datalist select optgroup"),n.valid_elements?u(n.valid_elements):(s(C,function(e,t){g[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},v[t]=e.children}),"html5"!=n.schema&&s(t("strong/b,em/i"),function(e){e=t(e,"/"),g[e[1]].outputName=e[0]}),g.img.attributesDefault=[{name:"alt",value:""}],s(t("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr,strong,em,b,i"),function(e){g[e]&&(g[e].removeEmpty=!0)}),s(t("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(e){g[e].paddEmpty=!0})),f(n.custom_elements),p(n.valid_children),l(n.extended_valid_elements),p("+ol[ul|ol],+ul[ul|ol]"),n.invalid_elements&&e.each(e.explode(n.invalid_elements),function(e){g[e]&&delete g[e]}),m("span")||l("span[!data-mce-type|*]"),h.children=v,h.styles=b,h.getBoolAttrs=function(){return S},h.getBlockElements=function(){return E},h.getShortEndedElements=function(){return k},h.getSelfClosingElements=function(){return x},h.getNonEmptyElements=function(){return w},h.getWhiteSpaceElements=function(){return _},h.isValidChild=function(e,t){var n=v[e];return!(!n||!n[t])},h.isValid=function(e,t){var n,o,i=m(e);if(i){if(!t)return!0;if(i.attributes[t])return!0;if(n=i.attributePatterns)for(o=n.length;o--;)if(n[o].pattern.test(e))return!0}return!1},h.getElementRule=m,h.getCustomElements=function(){return N},h.addValidElements=l,h.setValidElements=u,h.addCustomElements=f,h.addValidChildren=p}}(tinymce),function(e){e.html.SaxParser=function(t,n){var o=this,i=function(){};t=t||{},o.schema=n=n||new e.html.Schema,t.fix_self_closing!==!1&&(t.fix_self_closing=!0),e.each("comment cdata text start end pi doctype".split(" "),function(e){e&&(o[e]=t[e]||i)}),o.parse=function(o){function i(e){var t,n;for(t=u.length;t--&&u[t].name!==e;);if(t>=0){for(n=u.length-1;n>=t;n--)e=u[n],e.valid&&a.end(e.name);u.length=t}}function r(e,t,n,o,i){var r,a;if(t=t.toLowerCase(),n=t in b?t:H(n||o||i||""),_&&!g&&0!==t.indexOf("data-")){if(r=N[t],!r&&T){for(a=T.length;a--&&(r=T[a],!r.pattern.test(t)););-1===a&&(r=null)}if(!r)return;if(r.validValues&&!(n in r.validValues))return}f.map[t]=n,f.push({name:t,value:n})}var a=this,s,d=0,c,l,u=[],f,p,m,h,g,v,y,b,C,_,x,k,S,E,w,N,T,A,B,M,R,D,L,I,P,O=0,H=e.html.Entities.decode,F,U;for(D=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-\\:]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),L=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g,I={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi},y=n.getShortEndedElements(),R=t.self_closing_elements||n.getSelfClosingElements(),b=n.getBoolAttrs(),_=t.validate,v=t.remove_internals,F=t.fix_self_closing,U=e.isIE,w=/^:/;s=D.exec(o);){if(d<s.index&&a.text(H(o.substr(d,s.index-d))),c=s[6])c=c.toLowerCase(),U&&w.test(c)&&(c=c.substr(1)),i(c);else if(c=s[7]){if(c=c.toLowerCase(),U&&w.test(c)&&(c=c.substr(1)),C=c in y,F&&R[c]&&u.length>0&&u[u.length-1].name===c&&i(c),!_||(x=n.getElementRule(c))){if(k=!0,_&&(N=x.attributes,T=x.attributePatterns),(E=s[8])?(g=-1!==E.indexOf("data-mce-type"),g&&v&&(k=!1),f=[],f.map={},E.replace(L,r)):(f=[],f.map={}),_&&!g){if(A=x.attributesRequired,B=x.attributesDefault,M=x.attributesForced)for(p=M.length;p--;)S=M[p],h=S.name,P=S.value,"{$uid}"===P&&(P="mce_"+O++),f.map[h]=P,f.push({name:h,value:P});if(B)for(p=B.length;p--;)S=B[p],h=S.name,h in f.map||(P=S.value,"{$uid}"===P&&(P="mce_"+O++),f.map[h]=P,f.push({name:h,value:P}));if(A){for(p=A.length;p--&&!(A[p]in f.map););-1===p&&(k=!1)}f.map["data-mce-bogus"]&&(k=!1)}k&&a.start(c,f,C)}else k=!1;if(l=I[c]){l.lastIndex=d=s.index+s[0].length,(s=l.exec(o))?(k&&(m=o.substr(d,s.index-d)),d=s.index+s[0].length):(m=o.substr(d),d=o.length),k&&m.length>0&&a.text(m,!0),k&&a.end(c),D.lastIndex=d;continue}C||(E&&E.indexOf("/")==E.length-1?k&&a.end(c):u.push({name:c,valid:k}))}else(c=s[1])?a.comment(c):(c=s[2])?a.cdata(c):(c=s[3])?a.doctype(c):(c=s[4])&&a.pi(c,s[5]);d=s.index+s[0].length}for(d<o.length&&a.text(H(o.substr(d))),p=u.length-1;p>=0;p--)c=u[p],c.valid&&a.end(c.name)}}}(tinymce),function(e){function t(e,t,n){var o,i,r=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[r])return e[r];if(e!==t){if(o=e[a])return o;for(i=e.parent;i&&i!==t;i=i.parent)if(o=i[a])return o}}function n(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}var o=/^[ \t\r\n]*$/,i={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};e.extend(n.prototype,{replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n=this,o,i,r;if("string"!=typeof e){for(i in e)n.attr(i,e[i]);return n}if(o=n.attributes){if(t!==r){if(null===t){if(e in o.map)for(delete o.map[e],i=o.length;i--;)if(o[i].name===e)return o=o.splice(i,1),n;return n}if(e in o.map){for(i=o.length;i--;)if(o[i].name===e){o[i].value=t;break}}else o.push({name:e,value:t});return o.map[e]=t,n}return o.map[e]}},clone:function(){var e=this,t=new n(e.name,e.type),o,i,r,a,s;if(r=e.attributes){for(s=[],s.map={},o=0,i=r.length;i>o;o++)a=r[o],"id"!==a.name&&(s[s.length]={name:a.name,value:a.value},s.map[a.name]=a.value);t.attributes=s}return t.value=e.value,t.shortEnded=e.shortEnded,t},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e=this,t,n;for(t=e.firstChild;t;)n=t.next,e.insert(t,e,!0),t=n;e.remove()},remove:function(){var e=this,t=e.parent,n=e.next,o=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):o.next=n,t.lastChild===e?(t.lastChild=o,o&&(o.next=null)):n.prev=o,e.parent=e.next=e.prev=null),e},append:function(e){var t=this,n;return e.parent&&e.remove(),n=t.lastChild,n?(n.next=e,e.prev=n,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e},insert:function(e,t,n){var o;return e.parent&&e.remove(),o=t.parent||this,n?(t===o.firstChild?o.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===o.lastChild?o.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=o,e},getAll:function(e){var n=this,o,i=[];for(o=n.firstChild;o;o=t(o,n))o.name===e&&i.push(o);return i},empty:function(){var e=this,n,o,i;if(e.firstChild){for(n=[],i=e.firstChild;i;i=t(i,e))n.push(i);for(o=n.length;o--;)i=n[o],i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}return e.firstChild=e.lastChild=null,e},isEmpty:function(e){var n=this,i=n.firstChild,r,a;if(i)do{if(1===i.type){if(i.attributes.map["data-mce-bogus"])continue;if(e[i.name])return!1;for(r=i.attributes.length;r--;)if(a=i.attributes[r].name,"name"===a||0===a.indexOf("data-"))return!1}if(8===i.type)return!1;if(3===i.type&&!o.test(i.value))return!1}while(i=t(i,n));return!0},walk:function(e){return t(this,null,e)}}),e.extend(n,{create:function(e,t){var o,r;if(o=new n(e,i[e]||1),t)for(r in t)o.attr(r,t[r]);return o}}),e.html.Node=n}(tinymce),function(e){var t=e.html.Node;e.html.DomParser=function(n,o){function i(n){var i,a,s,d,c,l,u,f,p,m,h,g,v,y;for(g=e.makeMap("tr,td,th,tbody,thead,tfoot,table"),h=o.getNonEmptyElements(),i=0;i<n.length;i++)if(a=n[i],a.parent){for(d=[a],s=a.parent;s&&!o.isValidChild(s.name,a.name)&&!g[s.name];s=s.parent)d.push(s);if(s&&d.length>1){for(d.reverse(),c=l=r.filterNode(d[0].clone()),p=0;p<d.length-1;p++){for(o.isValidChild(l.name,d[p].name)?(u=r.filterNode(d[p].clone()),l.append(u)):u=l,f=d[p].firstChild;f&&f!=d[p+1];)y=f.next,u.append(f),f=y;l=u}c.isEmpty(h)?s.insert(a,d[0],!0):(s.insert(c,d[0],!0),s.insert(a,c)),s=d[0],(s.isEmpty(h)||s.firstChild===s.lastChild&&"br"===s.firstChild.name)&&s.empty().remove()}else if(a.parent){if("li"===a.name){if(v=a.prev,v&&("ul"===v.name||"ul"===v.name)){v.append(a);continue}if(v=a.next,v&&("ul"===v.name||"ul"===v.name)){v.insert(a,v.firstChild,!0);continue}a.wrap(r.filterNode(new t("ul",1)));continue}o.isValidChild(a.parent.name,"div")&&o.isValidChild("div",a.name)?a.wrap(r.filterNode(new t("div",1))):"style"===a.name||"script"===a.name?a.empty().remove():a.unwrap()}}}var r=this,a={},s=[],d={},c={};n=n||{},n.validate="validate"in n?n.validate:!0,n.root_name=n.root_name||"body",r.schema=o=o||new e.html.Schema,r.filterNode=function(e){var t,n,o;n in a&&(o=d[n],o?o.push(e):d[n]=[e]),t=s.length;for(;t--;)n=s[t].name,n in e.attributes.map&&(o=c[n],o?o.push(e):c[n]=[e]);return e},r.addNodeFilter=function(t,n){e.each(e.explode(t),function(e){var t=a[e];t||(a[e]=t=[]),t.push(n)})},r.addAttributeFilter=function(t,n){e.each(e.explode(t),function(e){var t;for(t=0;t<s.length;t++)if(s[t].name===e)return void s[t].callbacks.push(n);s.push({name:e,callbacks:[n]})})},r.parse=function(r,l){function u(){for(var e=g.firstChild,t,n;e;)t=e.next,3==e.type||1==e.type&&"p"!==e.name&&!w[e.name]&&!e.attr("data-mce-type")?n?n.append(e):(n=f(P,1),g.insert(n,e),n.append(e)):n=null,e=t}function f(e,n){var o=new t(e,n),i;return e in a&&(i=d[e],i?i.push(o):d[e]=[o]),o}function p(e){var t,n,o;for(t=e.prev;t&&3===t.type;)n=t.value.replace(B,""),n.length>0?(t.value=n,t=t.prev):(o=t.prev,t.remove(),t=o)}function m(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}var h,g,v,y,b,C,_,x,k,S,E,w,N,T=[],A,B,M,R,D,L,I,P;if(l=l||{},d={},c={},w=e.extend(e.makeMap("script,style,head,html,body,title,meta,param"),o.getBlockElements()),I=o.getNonEmptyElements(),L=o.children,E=n.validate,P="forced_root_block"in l?l.forced_root_block:n.forced_root_block,D=o.getWhiteSpaceElements(),N=/^[ \t\r\n]+/,B=/[ \t\r\n]+$/,M=/[ \t\r\n]+/g,R=/^[ \t\r\n]+$/,h=new e.html.SaxParser({validate:E,self_closing_elements:m(o.getSelfClosingElements()),cdata:function(e){v.append(f("#cdata",4)).value=e},text:function(e,t){var n;A||(e=e.replace(M," "),v.lastChild&&w[v.lastChild.name]&&(e=e.replace(N,""))),0!==e.length&&(n=f("#text",3),n.raw=!!t,v.append(n).value=e)},comment:function(e){v.append(f("#comment",8)).value=e},pi:function(e,t){v.append(f(e,7)).value=t,p(v)},doctype:function(e){var t;t=v.append(f("#doctype",10)),t.value=e,p(v)},start:function(e,t,n){var i,r,a,d,l,u,m,h;if(a=E?o.getElementRule(e):{}){for(i=f(a.outputName||e,1),i.attributes=t,i.shortEnded=n,v.append(i),h=L[v.name],h&&L[i.name]&&!h[i.name]&&T.push(i),r=s.length;r--;)l=s[r].name,l in t.map&&(k=c[l],k?k.push(i):c[l]=[i]);w[e]&&p(i),n||(v=i),!A&&D[e]&&(A=!0)}},end:function(e){var n,i,r,a,s;if(i=E?o.getElementRule(e):{}){if(w[e]){if(!A){if(n=v.firstChild,n&&3===n.type)for(r=n.value.replace(N,""),r.length>0?(n.value=r,n=n.next):(a=n.next,n.remove(),n=a);n&&3===n.type;)r=n.value,a=n.next,(0===r.length||R.test(r))&&(n.remove(),n=a),n=a;if(n=v.lastChild,n&&3===n.type)for(r=n.value.replace(B,""),r.length>0?(n.value=r,n=n.prev):(a=n.prev,n.remove(),n=a);n&&3===n.type;)r=n.value,a=n.prev,(0===r.length||R.test(r))&&(n.remove(),n=a),n=a}n=v.prev,n&&3===n.type&&(r=n.value.replace(N,""),r.length>0?n.value=r:n.remove())}if(A&&D[e]&&(A=!1),(i.removeEmpty||i.paddEmpty)&&v.isEmpty(I))if(i.paddEmpty)v.empty().append(new t("#text","3")).value=" ";else if(!v.attributes.map.name&&!v.attributes.map.id)return s=v.parent,v.empty().remove(),void(v=s);v=v.parent}}},o),g=v=new t(l.context||n.root_name,11),h.parse(r),E&&T.length&&(l.context?l.invalid=!0:i(T)),P&&"body"==g.name&&u(),!l.invalid){for(S in d){for(k=a[S],y=d[S],_=y.length;_--;)y[_].parent||y.splice(_,1);for(b=0,C=k.length;C>b;b++)k[b](y,S,l)}for(b=0,C=s.length;C>b;b++)if(k=s[b],k.name in c){for(y=c[k.name],_=y.length;_--;)y[_].parent||y.splice(_,1);for(_=0,x=k.callbacks.length;x>_;_++)k.callbacks[_](y,k.name,l)}}return g},n.remove_trailing_brs&&r.addNodeFilter("br",function(t,n){var i,r=t.length,a,s=e.extend({},o.getBlockElements()),d=o.getNonEmptyElements(),c,l,u,f;for(s.body=1,i=0;r>i;i++)if(a=t[i],c=a.parent,s[a.parent.name]&&a===c.lastChild){for(u=a.prev;u;){if(f=u.name,"span"!==f||"bookmark"!==u.attr("data-mce-type")){if("br"!==f)break;if("br"===f){a=null;break}}u=u.prev}a&&(a.remove(),c.isEmpty(d)&&(elementRule=o.getElementRule(c.name),elementRule&&(elementRule.removeEmpty?c.remove():elementRule.paddEmpty&&(c.empty().append(new e.html.Node("#text",3)).value=" "))))}else{for(l=a;c.firstChild===l&&c.lastChild===l&&(l=c,!s[c.name]);)c=c.parent;l===c&&(textNode=new e.html.Node("#text",3),textNode.value=" ",a.replace(textNode))}}),n.allow_html_in_named_anchor||r.addAttributeFilter("id,name",function(e,t){for(var n=e.length,o,i,r,a;n--;)if(a=e[n],"a"===a.name&&a.firstChild&&!a.attr("href")){r=a.parent,o=a.lastChild;do i=o.prev,r.insert(o,a),o=i;while(o)}})}}(tinymce),tinymce.html.Writer=function(e){var t=[],n,o,i,r,a;return e=e||{},n=e.indent,o=tinymce.makeMap(e.indent_before||""),i=tinymce.makeMap(e.indent_after||""),r=tinymce.html.Entities.getEncodeFunc(e.entity_encoding||"raw",e.entities),a="html"==e.element_format,{start:function(e,s,d){var c,l,u,f;if(n&&o[e]&&t.length>0&&(f=t[t.length-1],f.length>0&&"\n"!==f&&t.push("\n")),t.push("<",e),s)for(c=0,l=s.length;l>c;c++)u=s[c],t.push(" ",u.name,'="',r(u.value,!0),'"');!d||a?t[t.length]=">":t[t.length]=" />",d&&n&&i[e]&&t.length>0&&(f=t[t.length-1],f.length>0&&"\n"!==f&&t.push("\n"))},end:function(e){var o;t.push("</",e,">"),n&&i[e]&&t.length>0&&(o=t[t.length-1],o.length>0&&"\n"!==o&&t.push("\n"))},text:function(e,n){e.length>0&&(t[t.length]=n?e:r(e))},cdata:function(e){t.push("<![CDATA[",e,"]]>")},comment:function(e){t.push("<!--",e,"-->")},pi:function(e,o){o?t.push("<?",e," ",o,"?>"):t.push("<?",e,"?>"),n&&t.push("\n")},doctype:function(e){t.push("<!DOCTYPE",e,">",n?"\n":"")},reset:function(){t.length=0},getContent:function(){return t.join("").replace(/\n$/,"")}}},function(e){e.html.Serializer=function(t,n){var o=this,i=new e.html.Writer(t);t=t||{},t.validate="validate"in t?t.validate:!0,o.schema=n=n||new e.html.Schema,o.writer=i,o.serialize=function(e){function o(e){var t=r[e.type],s,d,c,l,u,f,p,m,h;if(t)t(e);else{if(s=e.name,d=e.shortEnded,c=e.attributes,a&&c&&c.length>1){for(f=[],f.map={},h=n.getElementRule(e.name),p=0,m=h.attributesOrder.length;m>p;p++)l=h.attributesOrder[p],l in c.map&&(u=c.map[l],f.map[l]=u,f.push({name:l,value:u}));for(p=0,m=c.length;m>p;p++)l=c[p].name,l in f.map||(u=c.map[l],f.map[l]=u,f.push({name:l,value:u}));c=f}if(i.start(e.name,c,d),!d){if(e=e.firstChild)do o(e);while(e=e.next);i.end(s)}}}var r,a;return a=t.validate,r={3:function(e,t){i.text(e.value,e.raw)},8:function(e){i.comment(e.value)},7:function(e){i.pi(e.name,e.value)},10:function(e){i.doctype(e.value)},4:function(e){i.cdata(e.value)},11:function(e){if(e=e.firstChild)do o(e);while(e=e.next)}},i.reset(),1!=e.type||t.inner?r[11](e):o(e),i.getContent()}}}(tinymce),tinymce.dom={},function(e,t){function n(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function o(e,t,n,o){e.removeEventListener?e.removeEventListener(t,n,o||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function i(e,t){function n(){return!1}function o(){return!0}var i,r=t||{};for(i in e)"layerX"!==i&&"layerY"!==i&&(r[i]=e[i]);return r.target||(r.target=r.srcElement||document),r.preventDefault=function(){r.isDefaultPrevented=o,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},r.stopPropagation=function(){r.isPropagationStopped=o,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=o,r.stopPropagation()},r.isDefaultPrevented||(r.isDefaultPrevented=n,r.isPropagationStopped=n,r.isImmediatePropagationStopped=n),r}function r(e,t,i){function r(){i.domLoaded||(i.domLoaded=!0,t(d))}var a=e.document,d={type:"ready"};s?n(e,"DOMContentLoaded",r):(n(a,"readystatechange",function(){"complete"===a.readyState&&(o(a,"readystatechange",arguments.callee),r())}),a.documentElement.doScroll&&e===e.top&&!function(){try{a.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}r()}()),n(e,"load",r)}function a(e){function a(e,t){var n,o,i,r;if(n=c[t][e.type])for(o=0,i=n.length;i>o;o++)if(r=n[o],r&&r.func.call(r.scope,e)===!1&&e.preventDefault(),e.isImmediatePropagationStopped())return}var d=this,c={},l,u,f,p,m;p="onmouseenter"in document.documentElement,f="onfocusin"in document.documentElement,m={mouseenter:"mouseover",mouseleave:"mouseout"},l=1,d.domLoaded=!1,d.events=c,d.bind=function(o,u,h,g){function v(e){a(i(e||E.event),y)}var y,b,C,_,x,k,S,E=window;if(o&&3!==o.nodeType&&8!==o.nodeType){for(o[t]?(y=o[t],c[y]||(c[y]={})):(y=l++,o[t]=y,c[y]={}),g=g||o,u=u.split(" "),C=u.length;C--;)_=u[C],k=v,x=S=!1,"DOMContentLoaded"===_&&(_="ready"),!d.domLoaded&&"complete"!=o.readyState||"ready"!==_?(p||(x=m[_],x&&(k=function(e){var t,n;if(t=e.currentTarget,n=e.relatedTarget,n&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||(e=i(e||E.event),e.type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,a(e,y))})),f||"focusin"!==_&&"focusout"!==_||(S=!0,x="focusin"===_?"focus":"blur",k=function(e){e=i(e||E.event),e.type="focus"===e.type?"focusin":"focusout",a(e,y)}),b=c[y][_],b?b.push({func:h,scope:g}):(c[y][_]=b=[{func:h,scope:g}],b.fakeName=x,b.capture=S,b.nativeHandler=k,s||(b.proxyHandler=e(y)),"ready"===_?r(o,k,d):n(o,x||_,s?k:b.proxyHandler,S))):(d.domLoaded=!0,h.call(g,i({type:_})));return o=b=0,h}},d.unbind=function(e,n,i){var r,a,l,u,f,p;if(!e||3===e.nodeType||8===e.nodeType)return d;if(r=e[t]){if(p=c[r],n){for(n=n.split(" "),l=n.length;l--;)if(f=n[l],a=p[f]){if(i)for(u=a.length;u--;)a[u].func===i&&a.splice(u,1);i&&0!==a.length||(delete p[f],o(e,a.fakeName||f,s?a.nativeHandler:a.proxyHandler,a.capture))}}else{for(f in p)a=p[f],o(e,a.fakeName||f,s?a.nativeHandler:a.proxyHandler,a.capture);p={}}for(f in p)return d;delete c[r];try{delete e[t]}catch(m){e[t]=null}}return d},d.fire=function(e,n,o){var r,s;if(!e||3===e.nodeType||8===e.nodeType)return d;s=i(null,o),s.type=n;do r=e[t],r&&a(s,r),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow;while(e&&!s.isPropagationStopped());return d},d.clean=function(e){var n,o,i=d.unbind;if(!e||3===e.nodeType||8===e.nodeType)return d;if(e[t]&&i(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(i(e),o=e.getElementsByTagName("*"),n=o.length;n--;)e=o[n],e[t]&&i(e);return d},d.callNativeHandler=function(e,t){c&&c[e][t.type].nativeHandler(t)},d.destory=function(){c={}},d.add=function(e,t,n,o){"string"==typeof e&&(e=document.getElementById(e));{if(!(e&&e instanceof Array))return"init"===t&&(t="ready"),d.bind(e,t instanceof Array?t.join(" "):t,n,o);for(var i=e.length;i--;)d.add(e[i],t,n,o)}},d.remove=function(e,t,n,o){if(!e)return d;if("string"==typeof e&&(e=document.getElementById(e)),e instanceof Array){for(var i=e.length;i--;)d.remove(e[i],t,n,o);return d}return d.unbind(e,t instanceof Array?t.join(" "):t,n)},d.clear=function(e){return"string"==typeof e&&(e=document.getElementById(e)),d.clean(e)},d.cancel=function(e){return e&&(d.prevent(e),d.stop(e)),!1},d.prevent=function(e){return e.preventDefault||(e=i(e)),e.preventDefault(),!1},d.stop=function(e){return e.stopPropagation||(e=i(e)),e.stopPropagation(),!1}}var s=!!document.addEventListener;e.EventUtils=a,e.Event=new a(function(e){return function(t){tinymce.dom.Event.callNativeHandler(e,t)}}),e.Event.bind(window,"ready",function(){}),e=0}(tinymce.dom,"data-mce-expando"),tinymce.dom.TreeWalker=function(e,t){function n(e,n,o,i){var r,a;if(e){if(!i&&e[n])return e[n];if(e!=t){if(r=e[o])return r;for(a=e.parentNode;a&&a!=t;a=a.parentNode)if(r=a[o])return r}}}var o=e;this.current=function(){return o},this.next=function(e){return o=n(o,"firstChild","nextSibling",e)},this.prev=function(e){return o=n(o,"lastChild","previousSibling",e)}},function(e){var t=e.each,n=e.is,o=e.isWebKit,i=e.isIE,r=e.html.Entities,a=/^([a-z0-9],?)+$/i,s=/^[ \t\r\n]*$/;e.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(t,n){var o=this,i,r,a;if(o.doc=t,o.win=window,o.files={},o.cssFlicker=!1,o.counter=0,o.stdMode=!e.isIE||t.documentMode>=8,o.boxModel=!e.isIE||"CSS1Compat"==t.compatMode||o.stdMode,o.hasOuterHTML="outerHTML"in t.createElement("a"),o.settings=n=e.extend({keep_values:!1,hex_colors:1},n),o.schema=n.schema,o.styles=new e.html.Styles({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),e.isIE6)try{t.execCommand("BackgroundImageCache",!1,!0)}catch(s){o.cssFlicker=!0}o.fixDoc(t),o.events=n.ownEvents?new e.dom.EventUtils(n.proxy):e.dom.Event,e.addUnload(o.destroy,o),a=n.schema?n.schema.getBlockElements():{},o.isBlock=function(e){var t=e.nodeType;return t?!(1!==t||!a[e.nodeName]):!!a[e]}},fixDoc:function(e){var t=this.settings,n;if(i&&t.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(n in t.schema.getCustomElements())e.createElement(n)}},clone:function(e,n){var o=this,r,a;return!i||1!==e.nodeType||n?e.cloneNode(n):(a=o.doc,n?r.firstChild:(r=a.createElement(e.nodeName),t(o.getAttribs(e),function(t){o.setAttrib(r,t.nodeName,o.getAttrib(e,t.nodeName))}),r))},getRoot:function(){var e=this,t=e.settings;return t&&e.get(t.root_element)||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n=this,o;return e=n.get(e),t=n.getPos(e),o=n.getSize(e),{x:t.x,y:t.y,w:o.w,h:o.h}},getSize:function(e){var t=this,n,o;return e=t.get(e),n=t.getStyle(e,"width"),o=t.getStyle(e,"height"),-1===n.indexOf("px")&&(n=0),-1===o.indexOf("px")&&(o=0),{w:parseInt(n,10)||e.offsetWidth||e.clientWidth,h:parseInt(o,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,t,o,i){var r=this,a,s=r.settings,d=[];for(e=r.get(e),i=void 0===i,s.strict_root&&(o=o||r.getRoot()),n(t,"string")&&(a=t,t="*"===t?function(e){return 1==e.nodeType}:function(e){return r.is(e,a)});e&&e!=o&&e.nodeType&&9!==e.nodeType;){if(!t||t(e)){if(!i)return e;d.push(e)}e=e.parentNode}return i?d:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,e=this.doc.getElementById(e),e&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},add:function(e,t,o,i,r){var a=this;return this.run(e,function(e){var s,d;return s=n(t,"string")?a.doc.createElement(t):t,a.setAttribs(s,o),i&&(i.nodeType?s.appendChild(i):a.setHTML(s,i)),r?s:e.appendChild(s)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var o="",i=this,r;o+="<"+e;for(r in t)t.hasOwnProperty(r)&&(o+=" "+r+'="'+i.encode(t[r])+'"');return"undefined"!=typeof n?o+">"+n+"</"+e+">":o+" />"},remove:function(t,n){return this.run(t,function(t){var o,i=t.parentNode;if(!i)return null;if(n)for(;o=t.firstChild;)!e.isIE||3!==o.nodeType||o.nodeValue?i.insertBefore(o,t):t.removeChild(o);return i.removeChild(t)})},setStyle:function(t,n,o){var r=this;return r.run(t,function(a){var s,d;switch(s=a.style,n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),r.pixelStyles.test(n)&&(e.is(o,"number")||/^[\-0-9\.]+$/.test(o))&&(o+="px"),n){case"opacity":i&&(s.filter=""===o?"":"alpha(opacity="+100*o+")",t.currentStyle&&t.currentStyle.hasLayout||(s.display="inline-block")),s[n]=s["-moz-opacity"]=s["-khtml-opacity"]=o||"";break;case"float":i?s.styleFloat=o:s.cssFloat=o;break;default:s[n]=o||""}r.settings.update_styles&&r.setAttrib(a,"data-mce-style")})},getStyle:function(e,t,n){if(e=this.get(e)){if(this.doc.defaultView&&n){t=t.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(e,null).getPropertyValue(t)}catch(o){return null}}return t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==t&&(t=i?"styleFloat":"cssFloat"),e.currentStyle&&n?e.currentStyle[t]:e.style?e.style[t]:void 0}},setStyles:function(e,n){var o=this,i=o.settings,r;r=i.update_styles,i.update_styles=0,t(n,function(t,n){o.setStyle(e,n,t)}),i.update_styles=r,i.update_styles&&o.setAttrib(e,i.cssText)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,o,i){var r=this;if(e&&o)return r.settings.strict&&(o=o.toLowerCase()),this.run(e,function(e){var a=r.settings,s=e.getAttribute(o);if(null!==i)switch(o){case"style":if(!n(i,"string"))return void t(i,function(t,n){r.setStyle(e,n,t)});a.keep_values&&(i&&!r._isRes(i)?e.setAttribute("data-mce-style",i,2):e.removeAttribute("data-mce-style",2)),e.style.cssText=i;break;case"class":e.className=i||"";break;case"src":case"href":a.keep_values&&(a.url_converter&&(i=a.url_converter.call(a.url_converter_scope||r,i,o,e)),r.setAttrib(e,"data-mce-"+o,i,2));break;case"shape":e.setAttribute("data-mce-style",i)}if(n(i)&&null!==i&&0!==i.length?e.setAttribute(o,""+i,2):e.removeAttribute(o,2),tinyMCE.activeEditor&&s!=i){var d=tinyMCE.activeEditor;d.onSetAttrib.dispatch(d,e,o,i)}})},setAttribs:function(e,n){var o=this;return this.run(e,function(e){t(n,function(t,n){o.setAttrib(e,n,t)})})},getAttrib:function(t,r,a){var s,d=this,c;if(t=d.get(t),!t||1!==t.nodeType)return a===c?!1:a;if(n(a)||(a=""),/^(src|href|style|coords|shape)$/.test(r)&&(s=t.getAttribute("data-mce-"+r)))return s;
if(i&&d.props[r]&&(s=t[d.props[r]],s=s&&s.nodeValue?s.nodeValue:s),s||(s=t.getAttribute(r,2)),/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(r))return t[d.props[r]]===!0&&""===s?r:s?r:"";if("FORM"===t.nodeName&&t.getAttributeNode(r))return t.getAttributeNode(r).nodeValue;if("style"===r&&(s=s||t.style.cssText,s&&(s=d.serializeStyle(d.parseStyle(s),t.nodeName),d.settings.keep_values&&!d._isRes(s)&&t.setAttribute("data-mce-style",s))),o&&"class"===r&&s&&(s=s.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),i)switch(r){case"rowspan":case"colspan":1===s&&(s="");break;case"size":("+0"===s||20===s||0===s)&&(s="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===s&&(s="");break;case"hspace":-1===s&&(s="");break;case"maxlength":case"tabindex":(32768===s||2147483647===s||"32768"===s)&&(s="");break;case"multiple":case"compact":case"noshade":case"nowrap":return 65535===s?r:a;case"shape":s=s.toLowerCase();break;default:0===r.indexOf("on")&&s&&(s=e._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+s))}return s!==c&&null!==s&&""!==s?""+s:a},getPos:function(e,t){var n=this,o=0,i=0,r,a=n.doc,s;if(e=n.get(e),t=t||a.body,e){if(e.getBoundingClientRect)return e=e.getBoundingClientRect(),r=n.boxModel?a.documentElement:a.body,o=e.left+(a.documentElement.scrollLeft||a.body.scrollLeft)-r.clientTop,i=e.top+(a.documentElement.scrollTop||a.body.scrollTop)-r.clientLeft,{x:o,y:i};for(s=e;s&&s!=t&&s.nodeType;)o+=s.offsetLeft||0,i+=s.offsetTop||0,s=s.offsetParent;for(s=e.parentNode;s&&s!=t&&s.nodeType;)o-=s.scrollLeft||0,i-=s.scrollTop||0,s=s.parentNode}return{x:o,y:i}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t=this.doc,n;styleElm=t.getElementById("mceDefaultStyles"),styleElm||(styleElm=t.createElement("style"),styleElm.id="mceDefaultStyles",styleElm.type="text/css",n=t.getElementsByTagName("head")[0],n.firstChild?n.insertBefore(styleElm,n.firstChild):n.appendChild(styleElm)),styleElm.styleSheet?styleElm.styleSheet.cssText+=e:styleElm.appendChild(t.createTextNode(e))},loadCSS:function(n){var o=this,r=o.doc,a;n||(n=""),a=r.getElementsByTagName("head")[0],t(n.split(","),function(t){var n;o.files[t]||(o.files[t]=!0,n=o.create("link",{rel:"stylesheet",href:e._addVer(t)}),i&&r.documentMode&&r.recalc&&(n.onload=function(){r.recalc&&r.recalc(),n.onload=null}),a.appendChild(n))})},addClass:function(e,t){return this.run(e,function(e){var n;return t?this.hasClass(e,t)?e.className:(n=this.removeClass(e,t),e.className=(""!=n?n+" ":"")+t):0})},removeClass:function(t,n){var o=this,i;return o.run(t,function(t){var r;return o.hasClass(t,n)?(i||(i=new RegExp("(^|\\s+)"+n+"(\\s+|$)","g")),r=t.className.replace(i," "),r=e.trim(" "!=r?r:""),t.className=r,r||(t.removeAttribute("class"),t.removeAttribute("className")),r):t.className})},hasClass:function(e,t){return e=this.get(e),e&&t?-1!==(" "+e.className+" ").indexOf(" "+t+" "):!1},show:function(e){return this.setStyle(e,"display","block")},hide:function(e){return this.setStyle(e,"display","none")},isHidden:function(e){return e=this.get(e),!e||"none"==e.style.display||"none"==this.getStyle(e,"display")},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(n,o){var r=this;return r.run(n,function(n){if(i){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br />"+o,n.removeChild(n.firstChild)}catch(a){var s=r.create("div");s.innerHTML="<br />"+o,t(e.grep(s.childNodes),function(e,t){t&&n.canHaveHTML&&n.appendChild(e)})}}else n.innerHTML=o;return o})},getOuterHTML:function(e){var t,n=this;return(e=n.get(e))?1===e.nodeType&&n.hasOuterHTML?e.outerHTML:(t=(e.ownerDocument||n.doc).createElement("body"),t.appendChild(e.cloneNode(!0)),t.innerHTML):null},setOuterHTML:function(e,t,n){function o(e,t,n){var o,i;for(i=n.createElement("body"),i.innerHTML=t,o=i.lastChild;o;)r.insertAfter(o.cloneNode(!0),e),o=o.previousSibling;r.remove(e)}var r=this;return this.run(e,function(e){if(e=r.get(e),1==e.nodeType)if(n=n||e.ownerDocument||r.doc,i)try{i&&1==e.nodeType?e.outerHTML=t:o(e,t,n)}catch(a){o(e,t,n)}else o(e,t,n)})},decode:r.decode,encode:r.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,o;return n=t.parentNode,o=t.nextSibling,o?n.insertBefore(e,o):n.appendChild(e),e})},replace:function(o,i,r){var a=this;return n(i,"array")&&(o=o.cloneNode(!0)),a.run(i,function(n){return r&&t(e.grep(n.childNodes),function(e){o.appendChild(e)}),n.parentNode.replaceChild(o,n)})},rename:function(e,n){var o=this,i;return e.nodeName!=n.toUpperCase()&&(i=o.create(n),t(o.getAttribs(e),function(t){o.setAttrib(i,t.nodeName,o.getAttrib(e,t.nodeName))}),o.replace(i,e,1)),i||e},findCommonAncestor:function(e,t){for(var n=e,o;n;){for(o=t;o&&n!=o;)o=o.parentNode;if(n==o)break;n=n.parentNode}return!n&&e.ownerDocument?e.ownerDocument.documentElement:n},toHex:function(e){function t(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}var n=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(e);return n?e="#"+t(n[1])+t(n[2])+t(n[3]):e},getClasses:function(){function n(o){t(o.imports,function(e){n(e)}),t(o.cssRules||o.rules,function(o){switch(o.type||1){case 1:o.selectorText&&t(o.selectorText.split(","),function(t){t=t.replace(/^\s*|\s*$|^\s\./g,""),!/\.mce/.test(t)&&/\.[\w\-]+$/.test(t)&&(d=t,t=e._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",t),(!s||(t=s(t,d)))&&(a[t]||(i.push({"class":t}),a[t]=1)))});break;case 3:n(o.styleSheet)}})}var o=this,i=[],r,a={},s=o.settings.class_filter,d;if(o.classes)return o.classes;try{t(o.doc.styleSheets,n)}catch(c){}return i.length>0&&(o.classes=i),i},run:function(e,n,o){var i=this,r;return i.doc&&"string"==typeof e&&(e=i.get(e)),e?(o=o||this,e.nodeType||!e.length&&0!==e.length?n.call(o,e):(r=[],t(e,function(e,t){e&&("string"==typeof e&&(e=i.doc.getElementById(e)),r.push(n.call(o,e,t)))}),r)):!1},getAttribs:function(e){var t;return e=this.get(e),e?i?(t=[],"OBJECT"==e.nodeName?e.attributes:("OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"}),e.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t)):e.attributes:[]},isEmpty:function(t,n){var o=this,i,r,a,d,c,l=0;if(t=t.firstChild){d=new e.dom.TreeWalker(t,t.parentNode),n=n||o.schema?o.schema.getNonEmptyElements():null;do{if(a=t.nodeType,1===a){if(t.getAttribute("data-mce-bogus"))continue;if(c=t.nodeName.toLowerCase(),n&&n[c]){if("br"===c){l++;continue}return!1}for(r=o.getAttribs(t),i=t.attributes.length;i--;)if(c=t.attributes[i].nodeName,"name"===c||"data-mce-bookmark"===c)return!1}if(8==a)return!1;if(3===a&&!s.test(t.nodeValue))return!1}while(t=d.next())}return 1>=l},destroy:function(t){var n=this;n.win=n.doc=n.root=n.events=n.frag=null,t||e.removeUnload(n.destroy)},createRng:function(){var t=this.doc;return t.createRange?t.createRange():new e.dom.Range(this)},nodeIndex:function(e,t){var n=0,o,i,r;if(e)for(o=e.nodeType,e=e.previousSibling,i=e;e;e=e.previousSibling)r=e.nodeType,(!t||3!=r||r!=o&&e.nodeValue.length)&&(n++,o=r);return n},split:function(t,n,o){function i(t){function n(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}var o,a=t.childNodes,s=t.nodeType;if(1!=s||"bookmark"!=t.getAttribute("data-mce-type")){for(o=a.length-1;o>=0;o--)i(a[o]);if(9!=s){if(3==s&&t.nodeValue.length>0){var d=e.trim(t.nodeValue).length;if(!r.isBlock(t.parentNode)||d>0||0===d&&n(t))return}else if(1==s&&(a=t.childNodes,1==a.length&&a[0]&&1==a[0].nodeType&&"bookmark"==a[0].getAttribute("data-mce-type")&&t.parentNode.insertBefore(a[0],t),a.length||/^(br|hr|input|img)$/i.test(t.nodeName)))return;r.remove(t)}return t}}var r=this,a=r.createRng(),s,d,c;return t&&n?(a.setStart(t.parentNode,r.nodeIndex(t)),a.setEnd(n.parentNode,r.nodeIndex(n)),s=a.extractContents(),a=r.createRng(),a.setStart(n.parentNode,r.nodeIndex(n)+1),a.setEnd(t.parentNode,r.nodeIndex(t)+1),d=a.extractContents(),c=t.parentNode,c.insertBefore(i(s),t),o?c.replaceChild(o,n):c.insertBefore(n,t),c.insertBefore(i(d),t),r.remove(t),o||n):void 0},bind:function(e,t,n,o){return this.events.add(e,t,n,o||this)},unbind:function(e,t,n){return this.events.remove(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return 1!=e.nodeType?null:(t=e.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null)},_findSib:function(e,t,o){var i=this,r=t;if(e)for(n(r,"string")&&(r=function(e){return i.is(e,t)}),e=e[o];e;e=e[o])if(r(e))return e;return null},_isRes:function(e){return/^(top|left|bottom|right|width|height)/i.test(e)||/;\s*(top|left|bottom|right|width|height)/i.test(e)}}),e.DOM=new e.dom.DOMUtils(document,{process_html:0})}(tinymce),function(e){function t(e){function n(){return L.createDocumentFragment()}function o(e,t){x(H,e,t)}function i(e,t){x(F,e,t)}function r(e){o(e.parentNode,j(e))}function a(e){o(e.parentNode,j(e)+1)}function s(e){i(e.parentNode,j(e))}function d(e){i(e.parentNode,j(e)+1)}function c(e){e?(D[z]=D[V],D[q]=D[U]):(D[V]=D[z],D[U]=D[q]),D.collapsed=H}function l(e){r(e),d(e)}function u(e){o(e,0),i(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function f(e,t){var n=D[V],o=D[U],i=D[z],r=D[q],a=t.startContainer,s=t.startOffset,d=t.endContainer,c=t.endOffset;return 0===e?_(n,o,a,s):1===e?_(i,r,a,s):2===e?_(i,r,d,c):3===e?_(n,o,d,c):void 0}function p(){k(O)}function m(){return k(I)}function h(){return k(P)}function g(t){var n=this[V],o=this[U],i,r;3!==n.nodeType&&4!==n.nodeType||!n.nodeValue?(n.childNodes.length>0&&(r=n.childNodes[o]),r?n.insertBefore(t,r):n.appendChild(t)):o?o>=n.nodeValue.length?e.insertAfter(t,n):(i=n.splitText(o),n.parentNode.insertBefore(t,i)):n.parentNode.insertBefore(t,n)}function v(e){var t=D.extractContents();D.insertNode(e),e.appendChild(t),D.selectNode(e)}function y(){return K(new t(e),{startContainer:D[V],startOffset:D[U],endContainer:D[z],endOffset:D[q],collapsed:D.collapsed,commonAncestorContainer:D.commonAncestorContainer})}function b(e,t){var n;if(3==e.nodeType)return e;if(0>t)return e;for(n=e.firstChild;n&&t>0;)--t,n=n.nextSibling;return n?n:e}function C(){return D[V]==D[z]&&D[U]==D[q]}function _(t,n,o,i){var r,a,s,d,c,l;if(t==o)return n==i?0:i>n?-1:1;for(r=o;r&&r.parentNode!=t;)r=r.parentNode;if(r){for(a=0,s=t.firstChild;s!=r&&n>a;)a++,s=s.nextSibling;return a>=n?-1:1}for(r=t;r&&r.parentNode!=o;)r=r.parentNode;if(r){for(a=0,s=o.firstChild;s!=r&&i>a;)a++,s=s.nextSibling;return i>a?-1:1}for(d=e.findCommonAncestor(t,o),c=t;c&&c.parentNode!=d;)c=c.parentNode;for(c||(c=d),l=o;l&&l.parentNode!=d;)l=l.parentNode;if(l||(l=d),c==l)return 0;for(s=d.firstChild;s;){if(s==c)return-1;if(s==l)return 1;s=s.nextSibling}}function x(t,n,o){var i,r;for(t?(D[V]=n,D[U]=o):(D[z]=n,D[q]=o),i=D[z];i.parentNode;)i=i.parentNode;for(r=D[V];r.parentNode;)r=r.parentNode;r==i?_(D[V],D[U],D[z],D[q])>0&&D.collapse(t):D.collapse(t),D.collapsed=C(),D.commonAncestorContainer=e.findCommonAncestor(D[V],D[z])}function k(e){var t,n=0,o=0,i,r,a,s,d,c;if(D[V]==D[z])return S(e);for(t=D[z],i=t.parentNode;i;t=i,i=i.parentNode){if(i==D[V])return E(t,e);++n}for(t=D[V],i=t.parentNode;i;t=i,i=i.parentNode){if(i==D[z])return w(t,e);++o}for(r=o-n,a=D[V];r>0;)a=a.parentNode,r--;for(s=D[z];0>r;)s=s.parentNode,r++;for(d=a.parentNode,c=s.parentNode;d!=c;d=d.parentNode,c=c.parentNode)a=d,s=c;return N(a,s,e)}function S(e){var t,o,i,r,a,s,d,c,l;if(e!=O&&(t=n()),D[U]==D[q])return t;if(3==D[V].nodeType){if(o=D[V].nodeValue,i=o.substring(D[U],D[q]),e!=P&&(r=D[V],c=D[U],l=D[q]-D[U],0===c&&l>=r.nodeValue.length-1?r.parentNode.removeChild(r):r.deleteData(c,l),D.collapse(H)),e==O)return;return i.length>0&&t.appendChild(L.createTextNode(i)),t}for(r=b(D[V],D[U]),a=D[q]-D[U];r&&a>0;)s=r.nextSibling,d=M(r,e),t&&t.appendChild(d),--a,r=s;return e!=P&&D.collapse(H),t}function E(e,t){var o,i,r,a,s,d;if(t!=O&&(o=n()),i=T(e,t),o&&o.appendChild(i),r=j(e),a=r-D[U],0>=a)return t!=P&&(D.setEndBefore(e),D.collapse(F)),o;for(i=e.previousSibling;a>0;)s=i.previousSibling,d=M(i,t),o&&o.insertBefore(d,o.firstChild),--a,i=s;return t!=P&&(D.setEndBefore(e),D.collapse(F)),o}function w(e,t){var o,i,r,a,s,d;for(t!=O&&(o=n()),r=A(e,t),o&&o.appendChild(r),i=j(e),++i,a=D[q]-i,r=e.nextSibling;r&&a>0;)s=r.nextSibling,d=M(r,t),o&&o.appendChild(d),--a,r=s;return t!=P&&(D.setStartAfter(e),D.collapse(H)),o}function N(e,t,o){var i,r,a,s,d,c,l,u;for(o!=O&&(r=n()),i=A(e,o),r&&r.appendChild(i),a=e.parentNode,s=j(e),d=j(t),++s,c=d-s,l=e.nextSibling;c>0;)u=l.nextSibling,i=M(l,o),r&&r.appendChild(i),l=u,--c;return i=T(t,o),r&&r.appendChild(i),o!=P&&(D.setStartAfter(e),D.collapse(H)),r}function T(e,t){var n=b(D[z],D[q]-1),o,i,r,a,s,d=n!=D[z];if(n==e)return B(n,d,F,t);for(o=n.parentNode,i=B(o,F,F,t);o;){for(;n;)r=n.previousSibling,a=B(n,d,F,t),t!=O&&i.insertBefore(a,i.firstChild),d=H,n=r;if(o==e)return i;n=o.previousSibling,o=o.parentNode,s=B(o,F,F,t),t!=O&&s.appendChild(i),i=s}}function A(e,t){var n=b(D[V],D[U]),o=n!=D[V],i,r,a,s,d;if(n==e)return B(n,o,H,t);for(i=n.parentNode,r=B(i,F,H,t);i;){for(;n;)a=n.nextSibling,s=B(n,o,H,t),t!=O&&r.appendChild(s),o=H,n=a;if(i==e)return r;n=i.nextSibling,i=i.parentNode,d=B(i,F,H,t),t!=O&&d.appendChild(r),r=d}}function B(t,n,o,i){var r,a,s,d,c;if(n)return M(t,i);if(3==t.nodeType){if(r=t.nodeValue,o?(d=D[U],a=r.substring(d),s=r.substring(0,d)):(d=D[q],a=r.substring(0,d),s=r.substring(d)),i!=P&&(t.nodeValue=s),i==O)return;return c=e.clone(t,F),c.nodeValue=a,c}if(i!=O)return e.clone(t,F)}function M(t,n){return n!=O?n==P?e.clone(t,H):t:void t.parentNode.removeChild(t)}function R(){return e.create("body",null,h()).outerText}var D=this,L=e.doc,I=0,P=1,O=2,H=!0,F=!1,U="startOffset",V="startContainer",z="endContainer",q="endOffset",K=tinymce.extend,j=e.nodeIndex;return K(D,{startContainer:L,startOffset:0,endContainer:L,endOffset:0,collapsed:H,commonAncestorContainer:L,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:o,setEnd:i,setStartBefore:r,setStartAfter:a,setEndBefore:s,setEndAfter:d,collapse:c,selectNode:l,selectNodeContents:u,compareBoundaryPoints:f,deleteContents:p,extractContents:m,cloneContents:h,insertNode:g,surroundContents:v,cloneRange:y,toStringIE:R}),D}e.Range=t,t.prototype.toString=function(){return this.toStringIE()}}(tinymce.dom),function(){function e(e){function t(t,n){var o,i=0,r,a,s,d,c,l,u=-1,f;if(o=t.duplicate(),o.collapse(n),f=o.parentElement(),f.ownerDocument===e.dom.doc){for(;"false"===f.contentEditable;)f=f.parentNode;if(!f.hasChildNodes())return{node:f,inside:1};for(s=f.children,r=s.length-1;r>=i;)if(l=Math.floor((i+r)/2),d=s[l],o.moveToElementText(d),u=o.compareEndPoints(n?"StartToStart":"EndToEnd",t),u>0)r=l-1;else{if(!(0>u))return{node:d};i=l+1}if(0>u)for(d?o.collapse(!1):(o.moveToElementText(f),o.collapse(!0),d=f,a=!0),c=0;0!==o.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==o.move("character",1)&&f==o.parentElement();)c++;else for(o.collapse(!0),c=0;0!==o.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==o.move("character",-1)&&f==o.parentElement();)c++;return{node:d,position:u,offset:c,inside:a}}}function n(){function n(e){var n=t(r,e),o,i,s=0,d,c,l;if(o=n.node,i=n.offset,n.inside&&!o.hasChildNodes())return void a[e?"setStart":"setEnd"](o,0);if(i===c)return void a[e?"setStartBefore":"setEndAfter"](o);if(n.position<0){if(d=n.inside?o.firstChild:o.nextSibling,!d)return void a[e?"setStartAfter":"setEndAfter"](o);if(!i)return void(3==d.nodeType?a[e?"setStart":"setEnd"](d,0):a[e?"setStartBefore":"setEndBefore"](d));for(;d;){if(l=d.nodeValue,s+=l.length,s>=i){o=d,s-=i,s=l.length-s;break}d=d.nextSibling}}else{if(d=o.previousSibling,!d)return a[e?"setStartBefore":"setEndBefore"](o);if(!i)return void(3==o.nodeType?a[e?"setStart":"setEnd"](d,o.nodeValue.length):a[e?"setStartAfter":"setEndAfter"](d));for(;d;){if(s+=d.nodeValue.length,s>=i){o=d,s-=i;break}d=d.previousSibling}}a[e?"setStart":"setEnd"](o,s)}var r=e.getRng(),a=i.createRng(),s,d,c,l,u,f;if(s=r.item?r.item(0):r.parentElement(),s.ownerDocument!=i.doc)return a;if(d=e.isCollapsed(),r.item)return a.setStart(s.parentNode,i.nodeIndex(s)),a.setEnd(a.startContainer,a.startOffset+1),a;try{n(!0),d||n()}catch(p){if(-2147024809!=p.number)throw p;u=o.getBookmark(2),c=r.duplicate(),c.collapse(!0),s=c.parentElement(),d||(c=r.duplicate(),c.collapse(!1),l=c.parentElement(),l.innerHTML=l.innerHTML),s.innerHTML=s.innerHTML,o.moveToBookmark(u),r=e.getRng(),n(!0),d||n()}return a}var o=this,i=e.dom,r=!0,a=!1;this.getBookmark=function(n){function o(e){var t,n,o,r,a=[];for(t=e.parentNode,n=i.getRoot().parentNode;t!=n&&9!==t.nodeType;){for(o=t.children,r=o.length;r--;)if(e===o[r]){a.push(r);break}e=t,t=t.parentNode}return a}function r(e){var n;return n=t(a,e),n?{position:n.position,offset:n.offset,indexes:o(n.node),inside:n.inside}:void 0}var a=e.getRng(),s,d,c={};return 2===n&&(a.item?c.start={ctrl:!0,indexes:o(a.item(0))}:(c.start=r(!0),e.isCollapsed()||(c.end=r()))),c},this.moveToBookmark=function(e){function t(e){var t,n,o,r;for(t=i.getRoot(),n=e.length-1;n>=0;n--)r=t.children,o=e[n],o<=r.length-1&&(t=r[o]);return t}function n(n){var i=e[n?"start":"end"],a,s,d;i&&(a=i.position>0,s=r.createTextRange(),s.moveToElementText(t(i.indexes)),offset=i.offset,offset!==d?(s.collapse(i.inside||a),s.moveStart("character",a?-offset:offset)):s.collapse(n),o.setEndPoint(n?"StartToStart":"EndToStart",s),n&&o.collapse(!0))}var o,r=i.doc.body;e.start&&(e.start.ctrl?(o=r.createControlRange(),o.addElement(t(e.start.indexes)),o.select()):(o=r.createTextRange(),n(!0),n(),o.select()))},this.addRange=function(t){function n(e){var t,n,r,u,m;r=i.create("a"),t=e?s:c,n=e?d:l,u=o.duplicate(),(t==f||t==f.documentElement)&&(t=p,n=0),3==t.nodeType?(t.parentNode.insertBefore(r,t),u.moveToElementText(r),u.moveStart("character",n),i.remove(r),o.setEndPoint(e?"StartToStart":"EndToEnd",u)):(m=t.childNodes,m.length?(n>=m.length?i.insertAfter(r,m[m.length-1]):t.insertBefore(r,m[n]),u.moveToElementText(r)):t.canHaveHTML&&(t.innerHTML="<span>\ufeff</span>",r=t.firstChild,u.moveToElementText(r),u.collapse(a)),o.setEndPoint(e?"StartToStart":"EndToEnd",u),i.remove(r))}var o,r,s,d,c,l,u,f=e.dom.doc,p=f.body,m,h;if(s=t.startContainer,d=t.startOffset,c=t.endContainer,l=t.endOffset,o=p.createTextRange(),s==c&&1==s.nodeType){if(d==l&&!s.hasChildNodes()){if(s.canHaveHTML)return u=s.previousSibling,u&&!u.hasChildNodes()&&i.isBlock(u)?u.innerHTML="\ufeff":u=null,s.innerHTML="<span>\ufeff</span><span>\ufeff</span>",o.moveToElementText(s.lastChild),o.select(),i.doc.selection.clear(),s.innerHTML="",void(u&&(u.innerHTML=""));d=i.nodeIndex(s),s=s.parentNode}if(d==l-1)try{if(h=s.childNodes[d],r=p.createControlRange(),r.addElement(h),r.select(),m=e.getRng(),m.item&&h===m.item(0))return}catch(g){}}n(!0),n(),o.select()},this.getRangeAt=n}tinymce.dom.TridentSelection=e}(),function(e){e.dom.Element=function(t,n){var o=this,i,r;o.settings=n=n||{},o.id=t,o.dom=i=n.dom||e.DOM,e.isIE||(r=i.get(o.id)),e.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(e){o[e]=function(){var n=[t],r;for(r=0;r<arguments.length;r++)n.push(arguments[r]);return n=i[e].apply(i,n),o.update(e),n}}),e.extend(o,{on:function(t,n,i){return e.dom.Event.add(o.id,t,n,i)},getXY:function(){return{x:parseInt(o.getStyle("left")),y:parseInt(o.getStyle("top"))}},getSize:function(){var e=i.get(o.id);return{w:parseInt(o.getStyle("width")||e.clientWidth),h:parseInt(o.getStyle("height")||e.clientHeight)}},moveTo:function(e,t){o.setStyles({left:e,top:t})},moveBy:function(e,t){var n=o.getXY();o.moveTo(n.x+e,n.y+t)},resizeTo:function(e,t){o.setStyles({width:e,height:t})},resizeBy:function(e,t){var n=o.getSize();o.resizeTo(n.w+e,n.h+t)},update:function(t){var r;if(e.isIE6&&n.blocker){if(t=t||"",0===t.indexOf("get")||0===t.indexOf("has")||0===t.indexOf("is"))return;if("remove"==t)return void i.remove(o.blocker);o.blocker?r=i.get(o.blocker):(o.blocker=i.uniqueId(),r=i.add(n.container||i.getRoot(),"iframe",{id:o.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),i.setStyle(r,"opacity",0)),i.setStyles(r,{left:o.getStyle("left",1),top:o.getStyle("top",1),width:o.getStyle("width",1),height:o.getStyle("height",1),display:o.getStyle("display",1),zIndex:parseInt(o.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(e){function t(e){return e.replace(/[\n\r]+/g,"")}var n=e.is,o=e.isIE,i=e.each,r=e.dom.TreeWalker;e.create("tinymce.dom.Selection",{Selection:function(t,n,o,r){var a=this;a.dom=t,a.win=n,a.serializer=o,a.editor=r,i(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(t){a[t]=new e.util.Dispatcher(a)}),a.win.getSelection||(a.tridentSel=new e.dom.TridentSelection(a)),e.isIE&&t.boxModel&&this._fixIESelection(),e.addUnload(a.destroy,a)},setCursorLocation:function(e,t){var n=this,o=n.dom.createRng();o.setStart(e,t),o.setEnd(e,t),n.setRng(o),n.collapse(!1)},getContent:function(e){var t=this,o=t.getRng(),i=t.dom.create("body"),r=t.getSel(),a,s,d;return e=e||{},a=s="",e.get=!0,e.format=e.format||"html",e.forced_root_block="",t.onBeforeGetContent.dispatch(t,e),"text"==e.format?t.isCollapsed()?"":o.text||(r.toString?r.toString():""):(o.cloneContents?(d=o.cloneContents(),d&&i.appendChild(d)):n(o.item)||n(o.htmlText)?(i.innerHTML="<br>"+(o.item?o.item(0).outerHTML:o.htmlText),i.removeChild(i.firstChild)):i.innerHTML=o.toString(),/^\s/.test(i.innerHTML)&&(a=" "),/\s+$/.test(i.innerHTML)&&(s=" "),e.getInner=!0,e.content=t.isCollapsed()?"":a+t.serializer.serialize(i,e)+s,t.onGetContent.dispatch(t,e),e.content)},setContent:function(e,t){var n=this,o=n.getRng(),i,r=n.win.document,a,s;if(t=t||{format:"html"},t.set=!0,e=t.content=e,t.no_events||n.onBeforeSetContent.dispatch(n,t),e=t.content,o.insertNode){e+='<span id="__caret">_</span>',o.startContainer==r&&o.endContainer==r?r.body.innerHTML=e:(o.deleteContents(),0===r.body.childNodes.length?r.body.innerHTML=e:o.createContextualFragment?o.insertNode(o.createContextualFragment(e)):(a=r.createDocumentFragment(),s=r.createElement("div"),a.appendChild(s),s.outerHTML=e,o.insertNode(a))),i=n.dom.get("__caret"),o=r.createRange(),o.setStartBefore(i),o.setEndBefore(i),n.setRng(o),n.dom.remove("__caret");try{n.setRng(o)}catch(d){}}else o.item&&(r.execCommand("Delete",!1,null),o=n.getRng()),/^\s+/.test(e)?(o.pasteHTML('<span id="__mce_tmp">_</span>'+e),n.dom.remove("__mce_tmp")):o.pasteHTML(e);t.no_events||n.onSetContent.dispatch(n,t)},getStart:function(){var e=this,t=e.getRng(),n,o,i,r;if(t.duplicate||t.item){if(t.item)return t.item(0);for(i=t.duplicate(),i.collapse(1),n=i.parentElement(),n.ownerDocument!==e.dom.doc&&(n=e.dom.getRoot()),o=r=t.parentElement();r=r.parentNode;)if(r==n){n=o;break}return n}return n=t.startContainer,1==n.nodeType&&n.hasChildNodes()&&(n=n.childNodes[Math.min(n.childNodes.length-1,t.startOffset)]),n&&3==n.nodeType?n.parentNode:n},getEnd:function(){var e=this,t=e.getRng(),n,o;return t.duplicate||t.item?t.item?t.item(0):(t=t.duplicate(),t.collapse(0),n=t.parentElement(),n.ownerDocument!==e.dom.doc&&(n=e.dom.getRoot()),n&&"BODY"==n.nodeName?n.lastChild||n:n):(n=t.endContainer,o=t.endOffset,1==n.nodeType&&n.hasChildNodes()&&(n=n.childNodes[o>0?o-1:o]),n&&3==n.nodeType?n.parentNode:n)},getBookmark:function(e,t){function n(e,t){var n=0;return i(s.select(e),function(e,o){e==t&&(n=o)}),n}function o(e){function t(t){var n,o,i,r=t?"start":"end";n=e[r+"Container"],o=e[r+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&(i=n.childNodes,n=i[Math.min(t?o:o-1,i.length-1)],n&&(o=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,o)))}return t(!0),t(),e}function r(){function e(e,n){var i=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"],s=[],d,c,l=0;if(3==i.nodeType){if(t)for(d=i.previousSibling;d&&3==d.nodeType;d=d.previousSibling)r+=d.nodeValue.length;s.push(r)}else c=i.childNodes,r>=c.length&&c.length&&(l=1,r=Math.max(0,c.length-1)),s.push(a.dom.nodeIndex(c[r],t)+l);for(;i&&i!=o;i=i.parentNode)s.push(a.dom.nodeIndex(i,t));return s}var n=a.getRng(!0),o=s.getRoot(),i={};return i.start=e(n,!0),a.isCollapsed()||(i.end=e(n)),i}var a=this,s=a.dom,d,c,l,u,f,p,m,h="\ufeff",g;if(2==e)return a.tridentSel?a.tridentSel.getBookmark(e):r();if(e)return{rng:a.getRng()};if(d=a.getRng(),l=s.uniqueId(),u=tinyMCE.activeEditor.selection.isCollapsed(),g="overflow:hidden;line-height:0px",d.duplicate||d.item){if(d.item)return p=d.item(0),f=p.nodeName,{name:f,index:n(f,p)};c=d.duplicate();try{d.collapse(),d.pasteHTML('<span data-mce-type="bookmark" id="'+l+'_start" style="'+g+'">'+h+"</span>"),u||(c.collapse(!1),d.moveToElementText(c.parentElement()),0===d.compareEndPoints("StartToEnd",c)&&c.move("character",-1),c.pasteHTML('<span data-mce-type="bookmark" id="'+l+'_end" style="'+g+'">'+h+"</span>"))}catch(v){return null}}else{if(p=a.getNode(),f=p.nodeName,"IMG"==f)return{name:f,index:n(f,p)};c=o(d.cloneRange()),u||(c.collapse(!1),c.insertNode(s.create("span",{"data-mce-type":"bookmark",id:l+"_end",style:g},h))),d=o(d),d.collapse(!0),d.insertNode(s.create("span",{"data-mce-type":"bookmark",id:l+"_start",style:g},h))}return a.moveToBookmark({id:l,keep:1}),{id:l}},moveToBookmark:function(t){function n(e){var n=t[e?"start":"end"],o,i,r,a;if(n){for(r=n[0],i=f,o=n.length-1;o>=1;o--){if(a=i.childNodes,n[o]>a.length-1)return;i=a[n[o]]}3===i.nodeType&&(r=Math.min(n[0],i.nodeValue.length)),1===i.nodeType&&(r=Math.min(n[0],i.childNodes.length)),e?u.setStart(i,r):u.setEnd(i,r)}return!0}function r(n){var o=d.get(t.id+"_"+n),r,a,s,c,l=t.keep;if(o&&(r=o.parentNode,"start"==n?(l?(r=o.firstChild,a=1):a=d.nodeIndex(o),p=m=r,h=g=a):(l?(r=o.firstChild,a=1):a=d.nodeIndex(o),m=r,g=a),!l)){for(c=o.previousSibling,s=o.nextSibling,i(e.grep(o.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});o=d.get(t.id+"_"+n);)d.remove(o,1);c&&s&&c.nodeType==s.nodeType&&3==c.nodeType&&!e.isOpera&&(a=c.nodeValue.length,c.appendData(s.nodeValue),d.remove(s),"start"==n?(p=m=c,h=g=a):(m=c,g=a))}}function a(e){return!d.isBlock(e)||e.innerHTML||o||(e.innerHTML='<br data-mce-bogus="1" />'),e}var s=this,d=s.dom,c,l,u,f,p,m,h,g;if(t)if(t.start){if(u=d.createRng(),f=d.getRoot(),s.tridentSel)return s.tridentSel.moveToBookmark(t);n(!0)&&n()&&s.setRng(u)}else t.id?(r("start"),r("end"),p&&(u=d.createRng(),u.setStart(a(p),h),u.setEnd(a(m),g),s.setRng(u))):t.name?s.select(d.select(t.name)[t.index]):t.rng&&s.setRng(t.rng)},select:function(t,n){function o(t,n){var o=new r(t,t);do{if(3==t.nodeType&&0!==e.trim(t.nodeValue).length)return void(n?s.setStart(t,0):s.setEnd(t,t.nodeValue.length));if("BR"==t.nodeName)return void(n?s.setStartBefore(t):s.setEndBefore(t))}while(t=n?o.next():o.prev())}var i=this,a=i.dom,s=a.createRng(),d;return t&&(d=a.nodeIndex(t),s.setStart(t.parentNode,d),s.setEnd(t.parentNode,d+1),n&&(o(t,1),o(t)),i.setRng(s)),t},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!t||t.item?!1:t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed},collapse:function(e){var t=this,n=t.getRng(),o;n.item&&(o=n.item(0),n=t.win.document.body.createTextRange(),n.moveToElementText(o)),n.collapse(!!e),t.setRng(n)},getSel:function(){var e=this,t=this.win;return t.getSelection?t.getSelection():t.document.selection},getRng:function(t){var n=this,o,i,r,a=n.win.document;if(t&&n.tridentSel)return n.tridentSel.getRangeAt(0);try{(o=n.getSel())&&(i=o.rangeCount>0?o.getRangeAt(0):o.createRange?o.createRange():a.createRange())}catch(s){}return e.isIE&&i&&i.setStart&&a.selection.createRange().item&&(r=a.selection.createRange().item(0),i=a.createRange(),i.setStartBefore(r),i.setEndAfter(r)),i||(i=a.createRange?a.createRange():a.body.createTextRange()),i.setStart&&9===i.startContainer.nodeType&&i.collapsed&&(r=n.dom.getRoot(),i.setStart(r,0),i.setEnd(r,0)),n.selectedRange&&n.explicitRange&&(0===i.compareBoundaryPoints(i.START_TO_START,n.selectedRange)&&0===i.compareBoundaryPoints(i.END_TO_END,n.selectedRange)?i=n.explicitRange:(n.selectedRange=null,n.explicitRange=null)),i},setRng:function(e,t){var n,o=this;if(o.tridentSel){if(e.cloneRange)try{return void o.tridentSel.addRange(e)}catch(i){}try{e.select()}catch(i){}}else if(n=o.getSel()){o.explicitRange=e;try{n.removeAllRanges()}catch(i){}n.addRange(e),t===!1&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),o.selectedRange=n.rangeCount>0?n.getRangeAt(0):null}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}var t=this,n=t.getRng(),o=t.getSel(),i,r=n.startContainer,a=n.endContainer;return n?n.setStart?(i=n.commonAncestorContainer,!n.collapsed&&(n.startContainer==n.endContainer&&n.endOffset-n.startOffset<2&&n.startContainer.hasChildNodes()&&(i=n.startContainer.childNodes[n.startOffset]),3===r.nodeType&&3===a.nodeType&&(r=r.length===n.startOffset?e(r.nextSibling,!0):r.parentNode,a=0===n.endOffset?e(a.previousSibling,!1):a.parentNode,r&&r===a))?r:i&&3==i.nodeType?i.parentNode:i):n.item?n.item(0):n.parentElement():t.dom.getRoot()},getSelectedBlocks:function(e,t){var n=this,o=n.dom,i,a,s,d=[];if(i=o.getParent(e||n.getStart(),o.isBlock),a=o.getParent(t||n.getEnd(),o.isBlock),i&&d.push(i),i&&a&&i!=a){s=i;for(var c=new r(i,o.getRoot());(s=c.next())&&s!=a;)o.isBlock(s)&&d.push(s)}return a&&i!=a&&d.push(a),d},isForward:function(){var e=this.dom,t=this.getSel(),n,o;return t&&null!=t.anchorNode&&null!=t.focusNode?(n=e.createRng(),n.setStart(t.anchorNode,t.anchorOffset),n.collapse(!0),o=e.createRng(),o.setStart(t.focusNode,t.focusOffset),o.collapse(!0),n.compareBoundaryPoints(n.START_TO_START,o)<=0):!0},normalize:function(){function t(e){function t(e,t){for(var n=new r(e,u.getParent(e.parentNode,u.isBlock)||f);e=n[t?"prev":"next"]();)if("BR"===e.nodeName)return!0}function s(e,t){var n,o;for(t=t||d,n=new r(t,u.getParent(t.parentNode,u.isBlock)||f);p=n[e?"prev":"next"]();){if(3===p.nodeType&&p.nodeValue.length>0)return d=p,c=e?p.nodeValue.length:0,void(i=!0);if(u.isBlock(p)||m[p.nodeName.toLowerCase()])return;o=p}a&&o&&(d=o,i=!0,c=0)}var d,c,l,u=n.dom,f=u.getRoot(),p,m,h;if(d=o[(e?"start":"end")+"Container"],c=o[(e?"start":"end")+"Offset"],m=u.schema.getNonEmptyElements(),9===d.nodeType&&(d=u.getRoot(),c=0),d===f){if(e&&(p=d.childNodes[c>0?c-1:0],p&&(h=p.nodeName.toLowerCase(),m[p.nodeName]||"TABLE"==p.nodeName)))return;if(d.hasChildNodes()&&(d=d.childNodes[Math.min(!e&&c>0?c-1:c,d.childNodes.length-1)],c=0,d.hasChildNodes()&&!/TABLE/.test(d.nodeName))){p=d,l=new r(d,f);do{if(3===p.nodeType&&p.nodeValue.length>0){c=e?0:p.nodeValue.length,d=p,i=!0;break}if(m[p.nodeName.toLowerCase()]){c=u.nodeIndex(p),d=p.parentNode,"IMG"!=p.nodeName||e||c++,i=!0;break}}while(p=e?l.next():l.prev())}}a&&(3===d.nodeType&&0===c&&s(!0),1===d.nodeType&&(p=d.childNodes[c],!p||"BR"!==p.nodeName||t(p)||t(p,!0)||s(!0,d.childNodes[c]))),e&&!a&&3===d.nodeType&&c===d.nodeValue.length&&s(!1),i&&o["set"+(e?"Start":"End")](d,c)}var n=this,o,i,a,s,d;e.isIE||(o=n.getRng(),a=o.collapsed,t(!0),a||t(),i&&(a&&o.collapse(!0),n.setRng(o,n.isForward())))},selectorChanged:function(e,t){var n=this,o;return n.selectorChangedData||(n.selectorChangedData={},o={},n.editor.onNodeChange.addToTop(function(e,t,r){var a=n.dom,s=a.getParents(r,null,a.getRoot()),d={};i(n.selectorChangedData,function(e,t){i(s,function(n){return a.is(n,t)?(o[t]||(i(e,function(e){e(!0,{node:n,selector:t,parents:s})}),o[t]=e),d[t]=e,!1):void 0})}),i(o,function(e,t){d[t]||(delete o[t],i(e,function(e){e(!1,{node:r,selector:t,parents:s})}))})})),n.selectorChangedData[e]||(n.selectorChangedData[e]=[]),n.selectorChangedData[e].push(t),n},destroy:function(t){var n=this;
n.win=null,t||e.removeUnload(n.destroy)},_fixIESelection:function(){function e(e,t){var n=r.createTextRange();try{n.moveToPoint(e,t)}catch(o){n=null}return n}function t(t){var o;t.button?(o=e(t.x,t.y),o&&(o.compareEndPoints("StartToStart",s)>0?o.setEndPoint("StartToStart",s):o.setEndPoint("EndToEnd",s),o.select())):n()}function n(){var e=i.selection.createRange();s&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&s.select(),o.unbind(i,"mouseup",n),o.unbind(i,"mousemove",t),s=a=0}var o=this.dom,i=o.doc,r=i.body,a,s,d;i.documentElement.unselectable=!0,o.bind(i,["mousedown","contextmenu"],function(r){if("HTML"===r.target.nodeName){if(a&&n(),d=i.documentElement,d.scrollHeight>d.clientHeight)return;a=1,s=e(r.x,r.y),s&&(o.bind(i,"mouseup",n),o.bind(i,"mousemove",t),o.win.focus(),s.select())}})}})}(tinymce),function(e){e.dom.Serializer=function(t,n,o){var i,r,a=e.isIE,s=e.each,d;return t.apply_source_formatting||(t.indent=!1),n=n||e.DOM,o=o||new e.html.Schema(t),t.entity_encoding=t.entity_encoding||"named",t.remove_trailing_brs="remove_trailing_brs"in t?t.remove_trailing_brs:!0,i=new e.util.Dispatcher(self),r=new e.util.Dispatcher(self),d=new e.html.DomParser(t,o),d.addAttributeFilter("src,href,style",function(e,o){for(var i=e.length,r,a,s="data-mce-"+o,d=t.url_converter,c=t.url_converter_scope,l;i--;)r=e[i],a=r.attributes.map[s],a!==l?(r.attr(o,a.length>0?a:null),r.attr(s,null)):(a=r.attributes.map[o],"style"===o?a=n.serializeStyle(n.parseStyle(a),r.name):d&&(a=d.call(c,a,o,r.name)),r.attr(o,a.length>0?a:null))}),d.addAttributeFilter("class",function(e,t){for(var n=e.length,o,i;n--;)o=e[n],i=o.attr("class").replace(/(?:^|\s)mce(Item\w+|Selected)(?!\S)/g,""),o.attr("class",i.length>0?i:null)}),d.addAttributeFilter("data-mce-type",function(e,t,n){for(var o=e.length,i;o--;)i=e[o],"bookmark"!==i.attributes.map["data-mce-type"]||n.cleanup||i.remove()}),d.addAttributeFilter("data-mce-expando",function(e,t,n){for(var o=e.length;o--;)e[o].attr(t,null)}),d.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var o=e.length,i,r;o--;)i=e[o],r=i.firstChild?i.firstChild.value:"","script"===t?(i.attr("type",(i.attr("type")||"text/javascript").replace(/^mce\-/,"")),r.length>0&&(i.firstChild.value="// <![CDATA[\n"+n(r)+"\n// ]]>")):r.length>0&&(i.firstChild.value="<!--\n"+n(r)+"\n-->")}),d.addNodeFilter("#comment",function(e,t){for(var n=e.length,o;n--;)o=e[n],0===o.value.indexOf("[CDATA[")?(o.name="#cdata",o.type=4,o.value=o.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===o.value.indexOf("mce:protected ")&&(o.name="#text",o.type=3,o.raw=!0,o.value=unescape(o.value).substr(14))}),d.addNodeFilter("xml:namespace,input",function(e,t){for(var n=e.length,o;n--;)o=e[n],7===o.type?o.remove():1===o.type&&("input"!==t||"type"in o.attributes.map||o.attr("type","text"))}),t.fix_list_elements&&d.addNodeFilter("ul,ol",function(e,t){for(var n=e.length,o,i;n--;)o=e[n],i=o.parent,("ul"===i.name||"ol"===i.name)&&o.prev&&"li"===o.prev.name&&o.prev.append(o)}),d.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:o,addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,onPreProcess:i,onPostProcess:r,serialize:function(c,l){var u,f,p,m,h;return a&&n.select("script,style,select,map").length>0?(h=c.innerHTML,c=c.cloneNode(!1),n.setHTML(c,h)):c=c.cloneNode(!0),u=c.ownerDocument.implementation,u.createHTMLDocument&&(f=u.createHTMLDocument(""),s("BODY"==c.nodeName?c.childNodes:[c],function(e){f.body.appendChild(f.importNode(e,!0))}),c="BODY"!=c.nodeName?f.body.firstChild:f.body,p=n.doc,n.doc=f),l=l||{},l.format=l.format||"html",l.no_events||(l.node=c,i.dispatch(self,l)),m=new e.html.Serializer(t,o),l.content=m.serialize(d.parse(e.trim(l.getInner?c.innerHTML:n.getOuterHTML(c)),l)),l.cleanup||(l.content=l.content.replace(/\uFEFF/g,"")),l.no_events||r.dispatch(self,l),p&&(n.doc=p),l.node=null,l.content},addRules:function(e){o.addValidElements(e)},setRules:function(e){o.setValidElements(e)}}}}(tinymce),function(e){e.dom.ScriptLoader=function(t){function n(t,n){function o(){a.remove(l),s&&(s.onreadystatechange=s.onload=s=null),n()}function i(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+t)}var r=this,a=e.DOM,s,d,c,l;return l=a.uniqueId(),e.isIE6&&(d=new e.util.URI(t),c=location,d.host==c.hostname&&d.port==c.port&&d.protocol+":"==c.protocol&&"file"!=d.protocol.toLowerCase())?void e.util.XHR.send({url:e._addVer(d.getURI()),success:function(e){var t=a.create("script",{type:"text/javascript"});t.text=e,document.getElementsByTagName("head")[0].appendChild(t),a.remove(t),o()},error:i}):(s=document.createElement("script"),s.id=l,s.type="text/javascript",s.src=e._addVer(t),e.isIE||(s.onload=o),s.onerror=i,e.isOpera||(s.onreadystatechange=function(){var e=s.readyState;("complete"==e||"loaded"==e)&&o()}),void(document.getElementsByTagName("head")[0]||document.body).appendChild(s))}var o=0,i=1,r=2,a={},s=[],d={},c=[],l=0,u;this.isDone=function(e){return a[e]==r},this.markDone=function(e){a[e]=r},this.add=this.load=function(e,t,n){var i,r=a[e];r==u&&(s.push(e),a[e]=o),t&&(d[e]||(d[e]=[]),d[e].push({func:t,scope:n||this}))},this.loadQueue=function(e,t){this.loadScripts(s,e,t)},this.loadScripts=function(t,o,s){function f(t){e.each(d[t],function(e){e.func.call(e.scope)}),d[t]=u}var p;c.push({func:o,scope:s||this}),(p=function(){var o=e.grep(t);t.length=0,e.each(o,function(e){return a[e]==r?void f(e):void(a[e]!=i&&(a[e]=i,l++,n(e,function(){a[e]=r,l--,f(e),p()})))}),l||(e.each(c,function(e){e.func.call(e.scope)}),c.length=0)})()}},e.ScriptLoader=new e.dom.ScriptLoader}(tinymce),function(e){e.dom.RangeUtils=function(t){var n="\ufeff";this.walk=function(n,o){function i(e){var t;return t=e[0],3===t.nodeType&&t===d&&c>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===u&&e.length>0&&t===l&&3===t.nodeType&&e.splice(e.length-1,1),e}function r(e,t,n){for(var o=[];e&&e!=n;e=e[t])o.push(e);return o}function a(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function s(e,t,n){var a=n?"nextSibling":"previousSibling";for(h=e,g=h.parentNode;h&&h!=t;h=g)g=h.parentNode,v=r(h==e?h:h[a],a),v.length&&(n||v.reverse(),o(i(v)))}var d=n.startContainer,c=n.startOffset,l=n.endContainer,u=n.endOffset,f,p,m,h,g,v,y;if(y=t.select("td.mceSelected,th.mceSelected"),y.length>0)return void e.each(y,function(e){o([e])});if(1==d.nodeType&&d.hasChildNodes()&&(d=d.childNodes[c]),1==l.nodeType&&l.hasChildNodes()&&(l=l.childNodes[Math.min(u-1,l.childNodes.length-1)]),d==l)return o(i([d]));for(f=t.findCommonAncestor(d,l),h=d;h;h=h.parentNode){if(h===l)return s(d,f,!0);if(h===f)break}for(h=l;h;h=h.parentNode){if(h===d)return s(l,f);if(h===f)break}p=a(d,f)||d,m=a(l,f)||l,s(d,p,!0),v=r(p==d?p:p.nextSibling,"nextSibling",m==l?m.nextSibling:m),v.length&&o(i(v)),s(l,m)},this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,o=e.startOffset,i=e.endContainer,r=e.endOffset;return n==i&&3==n.nodeType?o>0&&o<n.nodeValue.length&&(i=t(n,o),n=i.previousSibling,r>o?(r-=o,n=i=t(i,r).previousSibling,r=i.nodeValue.length,o=0):r=0):(3==n.nodeType&&o>0&&o<n.nodeValue.length&&(n=t(n,o),o=0),3==i.nodeType&&r>0&&r<i.nodeValue.length&&(i=t(i,r).previousSibling,r=i.nodeValue.length)),{startContainer:n,startOffset:o,endContainer:i,endOffset:r}}},e.dom.RangeUtils.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1}}(tinymce),function(e){var t=e.dom.Event,n=e.each;e.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(o,i){var r=this,a=o.root,s=o.items,d=o.enableUpDown,c=o.enableLeftRight||!o.enableUpDown,l=o.excludeFromTabOrder,u,f,p,m,h;i=i||e.DOM,u=function(e){h=e.target.id},f=function(e){i.setAttrib(e.target.id,"tabindex","-1")},m=function(e){var t=i.get(h);i.setAttrib(t,"tabindex","0"),t.focus()},r.focus=function(){i.get(h).focus()},r.destroy=function(){n(s,function(e){var t=i.get(e.id);i.unbind(t,"focus",u),i.unbind(t,"blur",f)});var e=i.get(a);i.unbind(e,"focus",m),i.unbind(e,"keydown",p),s=i=a=r.focus=u=f=p=m=null,r.destroy=function(){}},r.moveFocus=function(e,a){var d=-1,c=r.controls,l;h&&(n(s,function(e,t){return e.id===h?(d=t,!1):void 0}),d+=e,0>d?d=s.length-1:d>=s.length&&(d=0),l=s[d],i.setAttrib(h,"tabindex","-1"),i.setAttrib(l.id,"tabindex","0"),i.get(l.id).focus(),o.actOnFocus&&o.onAction(l.id),a&&t.cancel(a))},p=function(e){var n=37,i=39,a=38,s=40,l=27,u=14,f=13,p=32;switch(e.keyCode){case n:c&&r.moveFocus(-1);break;case i:c&&r.moveFocus(1);break;case a:d&&r.moveFocus(-1);break;case s:d&&r.moveFocus(1);break;case l:o.onCancel&&(o.onCancel(),t.cancel(e));break;case u:case f:case p:o.onAction&&(o.onAction(h),t.cancel(e))}},n(s,function(e,t){var n,o;e.id||(e.id=i.uniqueId("_mce_item_")),o=i.get(e.id),l?(i.bind(o,"blur",f),n="-1"):n=0===t?"0":"-1",o.setAttribute("tabindex",n),i.bind(o,"focus",u)}),s[0]&&(h=s[0].id),i.setAttrib(a,"tabindex","-1");var g=i.get(a);i.bind(g,"focus",m),i.bind(g,"keydown",p)}})}(tinymce),function(e){var t=e.DOM,n=e.is;e.create("tinymce.ui.Control",{Control:function(t,n,o){this.id=t,this.settings=n=n||{},this.rendered=!1,this.onRender=new e.util.Dispatcher(this),this.classPrefix="",this.scope=n.scope||this,this.disabled=0,this.active=0,this.editor=o},setAriaProperty:function(e,n){var o=t.get(this.id+"_aria")||t.get(this.id);o&&t.setAttrib(o,"aria-"+e,!!n)},focus:function(){t.get(this.id).focus()},setDisabled:function(e){e!=this.disabled&&(this.setAriaProperty("disabled",e),this.setState("Disabled",e),this.setState("Enabled",!e),this.disabled=e)},isDisabled:function(){return this.disabled},setActive:function(e){e!=this.active&&(this.setState("Active",e),this.active=e,this.setAriaProperty("pressed",e))},isActive:function(){return this.active},setState:function(e,n){var o=t.get(this.id);e=this.classPrefix+e,n?t.addClass(o,e):t.removeClass(o,e)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(e){t.setHTML(e,this.renderHTML())},postRender:function(){var e=this,t;n(e.disabled)&&(t=e.disabled,e.disabled=-1,e.setDisabled(t)),n(e.active)&&(t=e.active,e.active=-1,e.setActive(t))},remove:function(){t.remove(this.id),this.destroy()},destroy:function(){e.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(e,t,n){this.parent(e,t,n),this.controls=[],this.lookup={}},add:function(e){return this.lookup[e.id]=e,this.controls.push(e),e},get:function(e){return this.lookup[e]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(e,t){this.parent(e,t),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}}),function(e){var t=e.is,n=e.DOM,o=e.each,i=e.walk;e.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(e,t){this.parent(e,t),this.classPrefix="mceMenuItem"},setSelected:function(e){this.setState("Selected",e),this.setAriaProperty("checked",!!e),this.selected=e},isSelected:function(){return this.selected},postRender:function(){var e=this;e.parent(),t(e.selected)&&e.setSelected(e.selected)}})}(tinymce),function(e){var t=e.is,n=e.DOM,o=e.each,i=e.walk;e.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(t,n){var o=this;o.parent(t,n),o.items={},o.collapsed=!1,o.menuCount=0,o.onAddItem=new e.util.Dispatcher(this)},expand:function(e){var t=this;e&&i(t,function(e){e.expand&&e.expand()},"items",t),t.collapsed=!1},collapse:function(e){var t=this;e&&i(t,function(e){e.collapse&&e.collapse()},"items",t),t.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(t){return t.settings||(t=new e.ui.MenuItem(t.id||n.uniqueId(),t)),this.onAddItem.dispatch(this,t),this.items[t.id]=t},addSeparator:function(){return this.add({separator:!0})},addMenu:function(e){return e.collapse||(e=this.createMenu(e)),this.menuCount++,this.add(e)},hasMenus:function(){return 0!==this.menuCount},remove:function(e){delete this.items[e.id]},removeAll:function(){var e=this;i(e,function(e){e.removeAll?e.removeAll():e.remove(),e.destroy()},"items",e),e.items={}},createMenu:function(t){var o=new e.ui.Menu(t.id||n.uniqueId(),t);return o.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),o}})}(tinymce),function(e){var t=e.is,n=e.DOM,o=e.each,i=e.dom.Event,r=e.dom.Element;e.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(o,i){i=i||{},i.container=i.container||n.doc.body,i.offset_x=i.offset_x||0,i.offset_y=i.offset_y||0,i.vp_offset_x=i.vp_offset_x||0,i.vp_offset_y=i.vp_offset_y||0,t(i.icons)&&!i.icons&&(i["class"]+=" mceNoIcons"),this.parent(o,i),this.onShowMenu=new e.util.Dispatcher(this),this.onHideMenu=new e.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(t){var o=this,i=o.settings,r;return t.container=t.container||i.container,t.parent=o,t.constrain=t.constrain||i.constrain,t["class"]=t["class"]||i["class"],t.vp_offset_x=t.vp_offset_x||i.vp_offset_x,t.vp_offset_y=t.vp_offset_y||i.vp_offset_y,t.keyboard_focus=i.keyboard_focus,r=new e.ui.DropMenu(t.id||n.uniqueId(),t),r.onAddItem.add(o.onAddItem.dispatch,o.onAddItem),r},focus:function(){var e=this;e.keyboardNav&&e.keyboardNav.focus()},update:function(){var e=this,t=e.settings,o=n.get("menu_"+e.id+"_tbl"),i=n.get("menu_"+e.id+"_co"),r,a;r=t.max_width?Math.min(o.offsetWidth,t.max_width):o.offsetWidth,a=t.max_height?Math.min(o.offsetHeight,t.max_height):o.offsetHeight,n.boxModel?e.element.setStyles({width:r,height:a}):e.element.setStyles({width:r+2,height:a+2}),t.max_width&&n.setStyle(i,"width",r),t.max_height&&(n.setStyle(i,"height",a),o.clientHeight<t.max_height&&n.setStyle(i,"overflow","hidden"))},showMenu:function(t,a,s){var d=this,c=d.settings,l,u=n.getViewPort(),f,p,m,h,g=2,v,y,b=d.classPrefix;d.collapse(1),d.isMenuVisible||(d.rendered?l=n.get("menu_"+d.id):(l=n.add(d.settings.container,d.renderNode()),o(d.items,function(e){e.postRender()}),d.element=new r("menu_"+d.id,{blocker:1,container:c.container})),e.isOpera||n.setStyles(l,{left:-65535,top:-65535}),n.show(l),d.update(),t+=c.offset_x||0,a+=c.offset_y||0,u.w-=4,u.h-=4,c.constrain&&(f=l.clientWidth-g,p=l.clientHeight-g,m=u.x+u.w,h=u.y+u.h,t+c.vp_offset_x+f>m&&(t=s?s-f:Math.max(0,m-c.vp_offset_x-f)),a+c.vp_offset_y+p>h&&(a=Math.max(0,h-c.vp_offset_y-p))),n.setStyles(l,{left:t,top:a}),d.element.update(),d.isMenuVisible=1,d.mouseClickFunc=i.add(l,"click",function(e){var t;if(e=e.target,e&&(e=n.getParent(e,"tr"))&&!n.hasClass(e,b+"ItemSub")){if(t=d.items[e.id],t.isDisabled())return;for(v=d;v;)v.hideMenu&&v.hideMenu(),v=v.settings.parent;return t.settings.onclick&&t.settings.onclick(e),!1}}),d.hasMenus()&&(d.mouseOverFunc=i.add(l,"mouseover",function(e){var t,o,i;if(e=e.target,e&&(e=n.getParent(e,"tr"))){if(t=d.items[e.id],d.lastMenu&&d.lastMenu.collapse(1),t.isDisabled())return;e&&n.hasClass(e,b+"ItemSub")&&(o=n.getRect(e),t.showMenu(o.x+o.w-g,o.y-g,o.x),d.lastMenu=t,n.addClass(n.get(t.id).firstChild,b+"ItemActive"))}})),i.add(l,"keydown",d._keyHandler,d),d.onShowMenu.dispatch(d),c.keyboard_focus&&d._setupKeyboardNav())},hideMenu:function(e){var t=this,o=n.get("menu_"+t.id),r;t.isMenuVisible&&(t.keyboardNav&&t.keyboardNav.destroy(),i.remove(o,"mouseover",t.mouseOverFunc),i.remove(o,"click",t.mouseClickFunc),i.remove(o,"keydown",t._keyHandler),n.hide(o),t.isMenuVisible=0,e||t.collapse(1),t.element&&t.element.hide(),(r=n.get(t.id))&&n.removeClass(r.firstChild,t.classPrefix+"ItemActive"),t.onHideMenu.dispatch(t))},add:function(e){var t=this,o;return e=t.parent(e),t.isRendered&&(o=n.get("menu_"+t.id))&&t._add(n.select("tbody",o)[0],e),e},collapse:function(e){this.parent(e),this.hideMenu(1)},remove:function(e){return n.remove(e.id),this.destroy(),this.parent(e)},destroy:function(){var e=this,t=n.get("menu_"+e.id);e.keyboardNav&&e.keyboardNav.destroy(),i.remove(t,"mouseover",e.mouseOverFunc),i.remove(n.select("a",t),"focus",e.mouseOverFunc),i.remove(t,"click",e.mouseClickFunc),i.remove(t,"keydown",e._keyHandler),e.element&&e.element.remove(),n.remove(t)},renderNode:function(){var e=this,t=e.settings,i,a,s,d;return d=n.create("div",{role:"listbox",id:"menu_"+e.id,"class":t["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),e.settings.parent&&n.setAttrib(d,"aria-parent","menu_"+e.settings.parent.id),s=n.add(d,"div",{role:"presentation",id:"menu_"+e.id+"_co","class":e.classPrefix+(t["class"]?" "+t["class"]:"")}),e.element=new r("menu_"+e.id,{blocker:1,container:t.container}),t.menu_line&&n.add(s,"span",{"class":e.classPrefix+"Line"}),i=n.add(s,"table",{role:"presentation",id:"menu_"+e.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),a=n.add(i,"tbody"),o(e.items,function(t){e._add(a,t)}),e.rendered=!0,d},_setupKeyboardNav:function(){var t,o,i=this;t=n.get("menu_"+i.id),o=n.select("a[role=option]","menu_"+i.id),o.splice(0,0,t),i.keyboardNav=new e.ui.KeyboardNavigation({root:"menu_"+i.id,items:o,onCancel:function(){i.hideMenu()},enableUpDown:!0}),t.focus()},_keyHandler:function(e){var t=this,n;switch(e.keyCode){case 37:t.settings.parent&&(t.hideMenu(),t.settings.parent.focus(),i.cancel(e));break;case 39:t.mouseOverFunc&&t.mouseOverFunc(e)}},_add:function(e,t){var o,i=t.settings,r,a,s,d=this.classPrefix,c;return i.separator?(a=n.add(e,"tr",{id:t.id,"class":d+"ItemSeparator"}),n.add(a,"td",{"class":d+"ItemSeparator"}),void((o=a.previousSibling)&&n.addClass(o,"mceLast"))):(o=a=n.add(e,"tr",{id:t.id,"class":d+"Item "+d+"ItemEnabled"}),o=s=n.add(o,i.titleItem?"th":"td"),o=r=n.add(o,"a",{id:t.id+"_aria",role:i.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),i.parent&&(n.setAttrib(r,"aria-haspopup","true"),n.setAttrib(r,"aria-owns","menu_"+t.id)),n.addClass(s,i["class"]),c=n.add(o,"span",{"class":"mceIcon"+(i.icon?" mce_"+i.icon:"")}),i.icon_src&&n.add(c,"img",{src:i.icon_src}),o=n.add(o,i.element||"span",{"class":"mceText",title:t.settings.title},t.settings.title),t.settings.style&&("function"==typeof t.settings.style&&(t.settings.style=t.settings.style()),n.setAttrib(o,"style",t.settings.style)),1==e.childNodes.length&&n.addClass(a,"mceFirst"),(o=a.previousSibling)&&n.hasClass(o,d+"ItemSeparator")&&n.addClass(a,"mceFirst"),t.collapse&&n.addClass(a,d+"ItemSub"),(o=a.previousSibling)&&n.removeClass(o,"mceLast"),void n.addClass(a,"mceLast"))}})}(tinymce),function(e){var t=e.DOM;e.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,t,n){this.parent(e,t,n),this.classPrefix="mceButton"},renderHTML:function(){var e=this.classPrefix,n=this.settings,o,i;return i=t.encode(n.label||""),o='<a role="button" id="'+this.id+'" href="javascript:;" class="'+e+" "+e+"Enabled "+n["class"]+(i?" "+e+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+t.encode(n.title)+'">',o+=!n.image||this.editor&&this.editor.forcedHighContrastMode?'<span class="mceIcon '+n["class"]+'"></span>'+(i?'<span class="'+e+'Label">'+i+"</span>":""):'<span class="mceIcon '+n["class"]+'"><img class="mceIcon" src="'+n.image+'" alt="'+t.encode(n.title)+'" /></span>'+(i?'<span class="'+e+'Label">'+i+"</span>":""),o+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+n.title+"</span>",o+="</a>"},postRender:function(){var t=this,n=t.settings,o;e.isIE&&t.editor&&e.dom.Event.add(t.id,"mousedown",function(e){var n=t.editor.selection.getNode().nodeName;o="IMG"===n?t.editor.selection.getBookmark():null}),e.dom.Event.add(t.id,"click",function(i){return t.isDisabled()?void 0:(e.isIE&&t.editor&&null!==o&&t.editor.selection.moveToBookmark(o),n.onclick.call(n.scope,i))}),e.dom.Event.add(t.id,"keyup",function(o){return t.isDisabled()||o.keyCode!=e.VK.SPACEBAR?void 0:n.onclick.call(n.scope,o)})}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,o=e.each,i=e.util.Dispatcher,r;e.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(t,n,o){var r=this;r.parent(t,n,o),r.items=[],r.onChange=new i(r),r.onPostRender=new i(r),r.onAdd=new i(r),r.onRenderMenu=new e.util.Dispatcher(this),r.classPrefix="mceListBox",r.marked={}},select:function(e){var t=this,n,i;return t.marked={},e==r?t.selectByIndex(-1):(i=e&&"function"==typeof e?e:function(t){return t==e},void(e!=t.selectedValue&&(o(t.items,function(e,o){return i(e.value)?(n=1,t.selectByIndex(o),!1):void 0}),n||t.selectByIndex(-1))))},selectByIndex:function(e){var n=this,o,i,r;n.marked={},e!=n.selectedIndex&&(o=t.get(n.id+"_text"),r=t.get(n.id+"_voiceDesc"),i=n.items[e],i?(n.selectedValue=i.value,n.selectedIndex=e,t.setHTML(o,t.encode(i.title)),t.setHTML(r,n.settings.title+" - "+i.title),t.removeClass(o,"mceTitle"),t.setAttrib(n.id,"aria-valuenow",i.title)):(t.setHTML(o,t.encode(n.settings.title)),t.setHTML(r,t.encode(n.settings.title)),t.addClass(o,"mceTitle"),n.selectedValue=n.selectedIndex=null,t.setAttrib(n.id,"aria-valuenow",n.settings.title)),o=0)},mark:function(e){this.marked[e]=!0},add:function(t,n,o){var i=this;o=o||{},o=e.extend(o,{title:t,value:n}),i.items.push(o),i.onAdd.dispatch(i,o)},getLength:function(){return this.items.length},renderHTML:function(){var e="",n=this,o=n.settings,i=n.classPrefix;return e='<span role="listbox" aria-haspopup="true" aria-labelledby="'+n.id+'_voiceDesc" aria-describedby="'+n.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+n.id+'" cellpadding="0" cellspacing="0" class="'+i+" "+i+"Enabled"+(o["class"]?" "+o["class"]:"")+'"><tbody><tr>',e+="<td>"+t.createHTML("span",{id:n.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},n.settings.title),e+=t.createHTML("a",{id:n.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},t.encode(n.settings.title))+"</td>",e+="<td>"+t.createHTML("a",{id:n.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>",e+="</tr></tbody></table></span>"},showMenu:function(){var i=this,r,a=t.get(this.id),s;if(!i.isDisabled()&&0!==i.items.length){if(i.menu&&i.menu.isMenuVisible)return i.hideMenu();i.isMenuRendered||(i.renderMenu(),i.isMenuRendered=!0),r=t.getPos(a),s=i.menu,s.settings.offset_x=r.x,s.settings.offset_y=r.y,s.settings.keyboard_focus=!e.isOpera,o(i.items,function(e){s.items[e.id]&&s.items[e.id].setSelected(0)}),o(i.items,function(e){s.items[e.id]&&i.marked[e.value]&&s.items[e.id].setSelected(1),e.value===i.selectedValue&&s.items[e.id].setSelected(1)}),s.showMenu(0,a.clientHeight),n.add(t.doc,"mousedown",i.hideMenu,i),t.addClass(i.id,i.classPrefix+"Selected")}},hideMenu:function(e){var o=this;if(o.menu&&o.menu.isMenuVisible){if(t.removeClass(o.id,o.classPrefix+"Selected"),e&&"mousedown"==e.type&&(e.target.id==o.id+"_text"||e.target.id==o.id+"_open"))return;e&&t.getParent(e.target,".mceMenu")||(t.removeClass(o.id,o.classPrefix+"Selected"),n.remove(t.doc,"mousedown",o.hideMenu,o),o.menu.hideMenu())}},renderMenu:function(){var e=this,n;n=e.settings.control_manager.createDropMenu(e.id+"_menu",{menu_line:1,"class":e.classPrefix+"Menu mceNoIcons",max_width:250,max_height:150}),n.onHideMenu.add(function(){e.hideMenu(),e.focus()}),n.add({title:e.settings.title,"class":"mceMenuItemTitle",onclick:function(){e.settings.onselect("")!==!1&&e.select("")}}),o(e.items,function(o){o.value===r?n.add({title:o.title,role:"option","class":"mceMenuItemTitle",onclick:function(){e.settings.onselect("")!==!1&&e.select("")}}):(o.id=t.uniqueId(),o.role="option",o.onclick=function(){e.settings.onselect(o.value)!==!1&&e.select(o.value)},n.add(o))}),e.onRenderMenu.dispatch(e,n),e.menu=n},postRender:function(){var o=this,i=o.classPrefix;n.add(o.id,"click",o.showMenu,o),n.add(o.id,"keydown",function(e){32==e.keyCode&&(o.showMenu(e),n.cancel(e))}),n.add(o.id,"focus",function(){o._focused||(o.keyDownHandler=n.add(o.id,"keydown",function(e){40==e.keyCode&&(o.showMenu(),n.cancel(e))}),o.keyPressHandler=n.add(o.id,"keypress",function(e){var t;13==e.keyCode&&(t=o.selectedValue,o.selectedValue=null,n.cancel(e),o.settings.onselect(t))})),o._focused=1}),n.add(o.id,"blur",function(){n.remove(o.id,"keydown",o.keyDownHandler),n.remove(o.id,"keypress",o.keyPressHandler),o._focused=0}),(e.isIE6||!t.boxModel)&&(n.add(o.id,"mouseover",function(){t.hasClass(o.id,i+"Disabled")||t.addClass(o.id,i+"Hover")}),n.add(o.id,"mouseout",function(){t.hasClass(o.id,i+"Disabled")||t.removeClass(o.id,i+"Hover")})),o.onPostRender.dispatch(o,t.get(o.id))},destroy:function(){this.parent(),n.clear(this.id+"_text"),n.clear(this.id+"_open")}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,o=e.each,i=e.util.Dispatcher,r;e.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(e,t){this.parent(e,t),this.classPrefix="mceNativeListBox"},setDisabled:function(e){t.get(this.id).disabled=e,this.setAriaProperty("disabled",e)},isDisabled:function(){return t.get(this.id).disabled},select:function(e){var t=this,n,i;return e==r?t.selectByIndex(-1):(i=e&&"function"==typeof e?e:function(t){return t==e},void(e!=t.selectedValue&&(o(t.items,function(e,o){return i(e.value)?(n=1,t.selectByIndex(o),!1):void 0}),n||t.selectByIndex(-1))))},selectByIndex:function(e){t.get(this.id).selectedIndex=e+1,this.selectedValue=this.items[e]?this.items[e].value:null},add:function(e,n,o){var i,r=this;o=o||{},o.value=n,r.isRendered()&&t.add(t.get(this.id),"option",o,e),i={title:e,value:n,attribs:o},r.items.push(i),r.onAdd.dispatch(r,i)},getLength:function(){return this.items.length},renderHTML:function(){var e,n=this;return e=t.createHTML("option",{value:""},"-- "+n.settings.title+" --"),o(n.items,function(n){e+=t.createHTML("option",{value:n.value},n.title)}),e=t.createHTML("select",{id:n.id,"class":"mceNativeListBox","aria-labelledby":n.id+"_aria"},e),e+=t.createHTML("span",{id:n.id+"_aria",style:"display: none"},n.settings.title)},postRender:function(){function o(e){var t=i.items[e.target.selectedIndex-1];t&&(t=t.value)&&(i.onChange.dispatch(i,t),i.settings.onselect&&i.settings.onselect(t))}var i=this,r,a=!0;i.rendered=!0,n.add(i.id,"change",o),n.add(i.id,"keydown",function(t){var s;return n.remove(i.id,"change",r),a=!1,s=n.add(i.id,"blur",function(){a||(a=!0,n.add(i.id,"change",o),n.remove(i.id,"blur",s))}),!e.isWebKit||37!=t.keyCode&&39!=t.keyCode?13==t.keyCode||32==t.keyCode?(o(t),n.cancel(t)):void 0:n.prevent(t)}),i.onPostRender.dispatch(i,t.get(i.id))}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,o=e.each;e.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(n,o,i){this.parent(n,o,i),this.onRenderMenu=new e.util.Dispatcher(this),o.menu_container=o.menu_container||t.doc.body},showMenu:function(){var e=this,o,i,r=t.get(e.id),a;if(!e.isDisabled()){if(e.isMenuRendered||(e.renderMenu(),e.isMenuRendered=!0),e.isMenuVisible)return e.hideMenu();o=t.getPos(e.settings.menu_container),i=t.getPos(r),a=e.menu,a.settings.offset_x=i.x,a.settings.offset_y=i.y,a.settings.vp_offset_x=i.x,a.settings.vp_offset_y=i.y,a.settings.keyboard_focus=e._focused,a.showMenu(0,r.firstChild.clientHeight),n.add(t.doc,"mousedown",e.hideMenu,e),e.setState("Selected",1),e.isMenuVisible=1}},renderMenu:function(){var e=this,t;t=e.settings.control_manager.createDropMenu(e.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:e.settings.icons}),t.onHideMenu.add(function(){e.hideMenu(),e.focus()}),e.onRenderMenu.dispatch(e,t),e.menu=t},hideMenu:function(e){var o=this;e&&"mousedown"==e.type&&t.getParent(e.target,function(e){return e.id===o.id||e.id===o.id+"_open"})||(e&&t.getParent(e.target,".mceMenu")||(o.setState("Selected",0),n.remove(t.doc,"mousedown",o.hideMenu,o),o.menu&&o.menu.hideMenu()),o.isMenuVisible=0)},postRender:function(){var e=this,t=e.settings;n.add(e.id,"click",function(){e.isDisabled()||(t.onclick&&t.onclick(e.value),e.showMenu())})}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,o=e.each;e.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(e,t,n){this.parent(e,t,n),this.classPrefix="mceSplitButton"},renderHTML:function(){var e,n=this,o=n.settings,i;return e="<tbody><tr>",i=o.image?t.createHTML("img ",{src:o.image,role:"presentation","class":"mceAction "+o["class"]}):t.createHTML("span",{"class":"mceAction "+o["class"]},""),i+=t.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:n.id+"_voice",style:"display:none;"},o.title),e+="<td >"+t.createHTML("a",{role:"button",id:n.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+o["class"],onclick:"return false;",onmousedown:"return false;",title:o.title},i)+"</td>",i=t.createHTML("span",{"class":"mceOpen "+o["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>'),e+="<td >"+t.createHTML("a",{role:"button",id:n.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+o["class"],onclick:"return false;",onmousedown:"return false;",title:o.title},i)+"</td>",e+="</tr></tbody>",e=t.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+o["class"],cellpadding:"0",cellspacing:"0",title:o.title},e),t.createHTML("div",{id:n.id,role:"button",tabindex:"0","aria-labelledby":n.id+"_voice","aria-haspopup":"true"},e)},postRender:function(){var o=this,i=o.settings,r;i.onclick&&(r=function(e){o.isDisabled()||(i.onclick(o.value),n.cancel(e))},n.add(o.id+"_action","click",r),n.add(o.id,["click","keydown"],function(e){var t=32,i=14,a=13,s=38,d=40;32!==e.keyCode&&13!==e.keyCode&&14!==e.keyCode||e.altKey||e.ctrlKey||e.metaKey?("click"===e.type||e.keyCode===d)&&(o.showMenu(),n.cancel(e)):(r(),n.cancel(e))})),n.add(o.id+"_open","click",function(e){o.showMenu(),n.cancel(e)}),n.add([o.id,o.id+"_open"],"focus",function(){o._focused=1}),n.add([o.id,o.id+"_open"],"blur",function(){o._focused=0}),(e.isIE6||!t.boxModel)&&(n.add(o.id,"mouseover",function(){t.hasClass(o.id,"mceSplitButtonDisabled")||t.addClass(o.id,"mceSplitButtonHover")}),n.add(o.id,"mouseout",function(){t.hasClass(o.id,"mceSplitButtonDisabled")||t.removeClass(o.id,"mceSplitButtonHover")}))},destroy:function(){this.parent(),n.clear(this.id+"_action"),n.clear(this.id+"_open"),n.clear(this.id)}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,o=e.is,i=e.each;e.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(t,n,o){var i=this;i.parent(t,n,o),i.settings=n=e.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},i.settings),i.onShowMenu=new e.util.Dispatcher(i),i.onHideMenu=new e.util.Dispatcher(i),i.value=n.default_color},showMenu:function(){var o=this,i,r,a,s;if(!o.isDisabled()){if(o.isMenuRendered||(o.renderMenu(),o.isMenuRendered=!0),o.isMenuVisible)return o.hideMenu();a=t.get(o.id),t.show(o.id+"_menu"),t.addClass(a,"mceSplitButtonSelected"),s=t.getPos(a),t.setStyles(o.id+"_menu",{left:s.x,top:s.y+a.firstChild.clientHeight,zIndex:2e5}),a=0,n.add(t.doc,"mousedown",o.hideMenu,o),o.onShowMenu.dispatch(o),o._focused&&(o._keyHandler=n.add(o.id+"_menu","keydown",function(e){27==e.keyCode&&o.hideMenu()}),t.select("a",o.id+"_menu")[0].focus()),o.keyboardNav=new e.ui.KeyboardNavigation({root:o.id+"_menu",items:t.select("a",o.id+"_menu"),onCancel:function(){o.hideMenu(),o.focus()}}),o.keyboardNav.focus(),
o.isMenuVisible=1}},hideMenu:function(e){var o=this;if(o.isMenuVisible){if(e&&"mousedown"==e.type&&t.getParent(e.target,function(e){return e.id===o.id+"_open"}))return;e&&t.getParent(e.target,".mceSplitButtonMenu")||(t.removeClass(o.id,"mceSplitButtonSelected"),n.remove(t.doc,"mousedown",o.hideMenu,o),n.remove(o.id+"_menu","keydown",o._keyHandler),t.hide(o.id+"_menu")),o.isMenuVisible=0,o.onHideMenu.dispatch(),o.keyboardNav.destroy()}},renderMenu:function(){var r=this,a,s=0,d=r.settings,c,l,u,f,p;return f=t.add(d.menu_container,"div",{role:"listbox",id:r.id+"_menu","class":d.menu_class+" "+d["class"],style:"position:absolute;left:0;top:-1000px;"}),a=t.add(f,"div",{"class":d["class"]+" mceSplitButtonMenu"}),t.add(a,"span",{"class":"mceMenuLine"}),c=t.add(a,"table",{role:"presentation","class":"mceColorSplitMenu"}),l=t.add(c,"tbody"),s=0,i(o(d.colors,"array")?d.colors:d.colors.split(","),function(n){n=n.replace(/^#/,""),s--||(u=t.add(l,"tr"),s=d.grid_width-1),c=t.add(u,"td");var o={href:"javascript:;",style:{backgroundColor:"#"+n},title:r.editor.getLang("colors."+n,n),"data-mce-color":"#"+n};e.isIE||(o.role="option"),c=t.add(c,"a",o),r.editor.forcedHighContrastMode&&(c=t.add(c,"canvas",{width:16,height:16,"aria-hidden":"true"}),c.getContext&&(p=c.getContext("2d"))?(p.fillStyle="#"+n,p.fillRect(0,0,16,16)):t.remove(c))}),d.more_colors_func&&(c=t.add(l,"tr"),c=t.add(c,"td",{colspan:d.grid_width,"class":"mceMoreColors"}),c=t.add(c,"a",{role:"option",id:r.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},d.more_colors_title),n.add(c,"click",function(e){return d.more_colors_func.call(d.more_colors_scope||this),n.cancel(e)})),t.addClass(a,"mceColorSplitMenu"),n.add(r.id+"_menu","mousedown",function(e){return n.cancel(e)}),n.add(r.id+"_menu","click",function(e){var n;return e=t.getParent(e.target,"a",l),e&&"a"==e.nodeName.toLowerCase()&&(n=e.getAttribute("data-mce-color"))&&r.setColor(n),!1}),f},setColor:function(e){this.displayColor(e),this.hideMenu(),this.settings.onselect(e)},displayColor:function(e){var n=this;t.setStyle(n.id+"_preview","backgroundColor",e),n.value=e},postRender:function(){var e=this,n=e.id;e.parent(),t.add(n+"_action","div",{id:n+"_preview","class":"mceColorPreview"}),t.setStyle(e.id+"_preview","backgroundColor",e.value)},destroy:function(){var e=this;e.parent(),n.clear(e.id+"_menu"),n.clear(e.id+"_more"),t.remove(e.id+"_menu"),e.keyboardNav&&e.keyboardNav.destroy()}})}(tinymce),function(e){var t=e.DOM,n=e.each,o=e.dom.Event;e.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var n=this,o=[],i=n.controls,r=e.each,a=n.settings;return o.push('<div id="'+n.id+'" role="group" aria-labelledby="'+n.id+'_voice">'),o.push("<span role='application'>"),o.push('<span id="'+n.id+'_voice" class="mceVoiceLabel" style="display:none;">'+t.encode(a.name)+"</span>"),r(i,function(e){o.push(e.renderHTML())}),o.push("</span>"),o.push("</div>"),o.join("")},focus:function(){var e=this;t.get(e.id).focus()},postRender:function(){var o=this,i=[];n(o.controls,function(e){n(e.controls,function(e){e.id&&i.push(e)})}),o.keyNav=new e.ui.KeyboardNavigation({root:o.id,items:i,onCancel:function(){e.isWebKit&&t.get(o.editor.id+"_ifr").focus(),o.editor.focus()},excludeFromTabOrder:!o.settings.tab_focus_toolbar})},destroy:function(){var e=this;e.parent(),e.keyNav.destroy(),o.clear(e.id)}})}(tinymce),function(e){var t=e.DOM,n=e.each;e.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var e=this,n="",o,i,r=e.settings,a,s,d,c;for(c=e.controls,a=0;a<c.length;a++)i=c[a],s=c[a-1],d=c[a+1],0===a&&(o="mceToolbarStart",i.Button?o+=" mceToolbarStartButton":i.SplitButton?o+=" mceToolbarStartSplitButton":i.ListBox&&(o+=" mceToolbarStartListBox"),n+=t.createHTML("td",{"class":o},t.createHTML("span",null,"<!-- IE -->"))),s&&i.ListBox&&(s.Button||s.SplitButton)&&(n+=t.createHTML("td",{"class":"mceToolbarEnd"},t.createHTML("span",null,"<!-- IE -->"))),n+=t.stdMode?'<td style="position: relative">'+i.renderHTML()+"</td>":"<td>"+i.renderHTML()+"</td>",d&&i.ListBox&&(d.Button||d.SplitButton)&&(n+=t.createHTML("td",{"class":"mceToolbarStart"},t.createHTML("span",null,"<!-- IE -->")));return o="mceToolbarEnd",i.Button?o+=" mceToolbarEndButton":i.SplitButton?o+=" mceToolbarEndSplitButton":i.ListBox&&(o+=" mceToolbarEndListBox"),n+=t.createHTML("td",{"class":o},t.createHTML("span",null,"<!-- IE -->")),t.createHTML("table",{id:e.id,"class":"mceToolbar"+(r["class"]?" "+r["class"]:""),cellpadding:"0",cellspacing:"0",align:e.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+n+"</tr></tbody>")}})}(tinymce),function(e){var t=e.util.Dispatcher,n=e.each;e.create("tinymce.AddOnManager",{AddOnManager:function(){var e=this;e.items=[],e.urls={},e.lookup={},e.onAdd=new t(e)},get:function(e){return this.lookup[e]?this.lookup[e].instance:void 0},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t){var n=e.settings;n&&n.language&&n.language_load!==!1&&e.ScriptLoader.add(this.urls[t]+"/langs/"+n.language+".js")},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},this.onAdd.dispatch(this,e,t),t},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var o=this.urls[t];e.each(n,function(t){e.ScriptLoader.add(o+"/"+t)})},load:function(t,n,o,i){function r(){var r=a.dependencies(t);e.each(r,function(e){var t=a.createUrl(n,e);a.load(t.resource,t,void 0,void 0)}),o&&(i?o.call(i):o.call(e.ScriptLoader))}var a=this,s=n;a.urls[t]||("object"==typeof n&&(s=n.prefix+n.resource+n.suffix),0!==s.indexOf("/")&&-1==s.indexOf("://")&&(s=e.baseURL+"/"+s),a.urls[t]=s.substring(0,s.lastIndexOf("/")),a.lookup[t]?r():e.ScriptLoader.add(s,r,i))}}),e.PluginManager=new e.AddOnManager,e.ThemeManager=new e.AddOnManager}(tinymce),function(e){var t=e.each,n=e.extend,o=e.DOM,i=e.dom.Event,r=e.ThemeManager,a=e.PluginManager,s=e.explode,d=e.util.Dispatcher,c,l=0;e.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e.documentBaseURL)||(e.documentBaseURL+="/"),e.baseURL=new e.util.URI(e.documentBaseURL).toAbsolute(e.baseURL),e.baseURI=new e.util.URI(e.baseURL),e.onBeforeUnload=new d(e),i.add(window,"beforeunload",function(t){e.onBeforeUnload.dispatch(e,t)}),e.onAddEditor=new d(e),e.onRemoveEditor=new d(e),e.EditorManager=n(e,{editors:[],i18n:{},activeEditor:null,init:function(n){function r(e){var t=e.id;return t||(t=e.name,t=t&&!o.get(t)?e.name:o.uniqueId(),e.setAttribute("id",t)),t}function a(t,n,o){var i=t[n];if(i)return e.is(i,"string")&&(o=i.replace(/\.\w+$/,""),o=o?e.resolve(o):0,i=e.resolve(i)),i.apply(o||this,Array.prototype.slice.call(arguments,2))}function d(e,t){return t.constructor===RegExp?t.test(e.className):o.hasClass(e,t)}var c=this,u,f=e.ScriptLoader,p,m=[],h;c.settings=n,i.bind(window,"ready",function(){var i,c;switch(a(n,"onpageload"),n.mode){case"exact":i=n.elements||"",i.length>0&&t(s(i),function(i){o.get(i)?(h=new e.Editor(i,n),m.push(h),h.render(1)):t(document.forms,function(r){t(r.elements,function(t){t.name===i&&(i="mce_editor_"+l++,o.setAttrib(t,"id",i),h=new e.Editor(i,n),m.push(h),h.render(1))})})});break;case"textareas":case"specific_textareas":t(o.select("textarea"),function(t){n.editor_deselector&&d(t,n.editor_deselector)||(!n.editor_selector||d(t,n.editor_selector))&&(h=new e.Editor(r(t),n),m.push(h),h.render(1))});break;default:n.types?t(n.types,function(i){t(o.select(i.selector),function(t){var o=new e.Editor(r(t),e.extend({},n,i));m.push(o),o.render(1)})}):n.selector&&t(o.select(n.selector),function(t){var o=new e.Editor(r(t),n);m.push(o),o.render(1)})}n.oninit&&(i=c=0,t(m,function(e){c++,e.initialized?i++:e.onInit.add(function(){i++,i==c&&a(n,"oninit")}),i==c&&a(n,"oninit")}))})},get:function(e){return e===c?this.editors:this.editors[e]},getInstanceById:function(e){return this.get(e)},add:function(t){var n=this,o=n.editors;return o[t.id]=t,o.push(t),n._setActive(t),n.onAddEditor.dispatch(n,t),e.adapter&&e.adapter.patchEditor(t),t},remove:function(e){var t=this,n,o=t.editors;if(!o[e.id])return null;for(delete o[e.id],n=0;n<o.length;n++)if(o[n]==e){o.splice(n,1);break}return t.activeEditor==e&&t._setActive(o[0]),e.destroy(),t.onRemoveEditor.dispatch(t,e),e},execCommand:function(t,n,o){function i(){a.destroy(),s.detachEvent("onunload",i),s=s.tinyMCE=s.tinymce=null}var r=this,a=r.get(o),s;switch(t){case"mceFocus":return a.focus(),!0;case"mceAddEditor":case"mceAddControl":return r.get(o)||new e.Editor(o,r.settings).render(),!0;case"mceAddFrameControl":return s=o.window,s.tinyMCE=tinyMCE,s.tinymce=e,e.DOM.doc=s.document,e.DOM.win=s,a=new e.Editor(o.element_id,o),a.render(),e.isIE&&s.attachEvent("onunload",i),o.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return a&&a.remove(),!0;case"mceToggleEditor":return a?(a.isHidden()?a.show():a.hide(),!0):(r.execCommand("mceAddControl",0,o),!0)}return r.activeEditor?r.activeEditor.execCommand(t,n,o):!1},execInstanceCommand:function(e,t,n,o){var i=this.get(e);return i?i.execCommand(t,n,o):!1},triggerSave:function(){t(this.editors,function(e){e.save()})},addI18n:function(n,o){var i,r=this.i18n;e.is(n,"string")?t(o,function(e,t){r[n+"."+t]=e}):t(n,function(e,n){t(e,function(e,o){t(e,function(e,t){"common"===o?r[n+"."+t]=e:r[n+"."+o+"."+t]=e})})})},_setActive:function(e){this.selectedInstance=this.activeEditor=e}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,o=e.extend,i=e.each,r=e.isGecko,a=e.isIE,s=e.isWebKit,d=e.is,c=e.ThemeManager,l=e.PluginManager,u=e.explode;e.create("tinymce.Editor",{Editor:function(t,n){var i=this,r=!0;i.settings=n=o({id:t,language:"en",theme:"advanced",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:e.documentBaseURL,add_form_submit_trigger:r,submit_patch:r,add_unload_trigger:r,convert_urls:r,relative_urls:r,remove_script_host:r,table_inline_editing:!1,object_resizing:r,accessibility_focus:r,doctype:e.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual:r,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:r,directionality:"ltr",forced_root_block:"p",hidden_input:r,padd_empty_editor:r,render_ui:r,indentation:"30px",fix_table_elements:r,inline_styles:r,convert_fonts_to_spans:r,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:r,entity_encoding:"named",url_converter:i.convertURL,url_converter_scope:i,ie7_compat:r},n),i.id=i.editorId=t,i.isNotDirty=!1,i.plugins={},i.documentBaseURI=new e.util.URI(n.document_base_url||e.documentBaseURL,{base_uri:tinyMCE.baseURI}),i.baseURI=e.baseURI,i.contentCSS=[],i.contentStyles=[],i.setupEvents(),i.execCommands={},i.queryStateCommands={},i.queryValueCommands={},i.execCallback("setup",i)},render:function(o){function r(){s.language&&s.language_load!==!1&&f.add(e.baseURL+"/langs/"+s.language+".js"),s.theme&&"function"!=typeof s.theme&&"-"!=s.theme.charAt(0)&&!c.urls[s.theme]&&c.load(s.theme,"themes/"+s.theme+"/editor_template"+e.suffix+".js"),i(u(s.plugins),function(t){if(t&&!l.urls[t])if("-"==t.charAt(0)){t=t.substr(1,t.length);var n=l.dependencies(t);i(n,function(t){var n={prefix:"plugins/",resource:t,suffix:"/editor_plugin"+e.suffix+".js"};t=l.createUrl(n,t),l.load(t.resource,t)})}else{if("safari"==t)return;l.load(t,{prefix:"plugins/",resource:t,suffix:"/editor_plugin"+e.suffix+".js"})}}),f.loadQueue(function(){a.removed||a.init()})}var a=this,s=a.settings,d=a.id,f=e.ScriptLoader;return n.domLoaded?(tinyMCE.settings=s,void(a.getElement()&&(!e.isIDevice||e.isIOS5)&&(!/TEXTAREA|INPUT/i.test(a.getElement().nodeName)&&s.hidden_input&&t.getParent(d,"form")&&t.insertAfter(t.create("input",{type:"hidden",name:d}),d),s.content_editable||(a.orgVisibility=a.getElement().style.visibility,a.getElement().style.visibility="hidden"),e.WindowManager&&(a.windowManager=new e.WindowManager(a)),"xml"==s.encoding&&a.onGetContent.add(function(e,n){n.save&&(n.content=t.encode(n.content))}),s.add_form_submit_trigger&&a.onSubmit.addToTop(function(){a.initialized&&(a.save(),a.isNotDirty=1)}),s.add_unload_trigger&&(a._beforeUnload=tinyMCE.onBeforeUnload.add(function(){!a.initialized||a.destroyed||a.isHidden()||a.save({format:"raw",no_events:!0})})),e.addUnload(a.destroy,a),s.submit_patch&&a.onBeforeRenderUI.add(function(){var t=a.getElement().form;t&&(t._mceOldSubmit||(t.submit.nodeType||t.submit.length||(a.formElement=t,t._mceOldSubmit=t.submit,t.submit=function(){return e.triggerSave(),a.isNotDirty=1,a.formElement._mceOldSubmit(a.formElement)}),t=null))}),r()))):void n.add(window,"ready",function(){a.render()})},init:function(){function n(t){var o=l.get(t),a=l.urls[t]||e.documentBaseURL.replace(/\/$/,""),s;o&&-1===e.inArray(x,t)&&(i(l.dependencies(t),function(e){n(e)}),s=new o(r,a),r.plugins[t]=s,s.init&&(s.init(r,a),x.push(t)))}var o,r=this,s=r.settings,d,f,p,m=r.getElement(),h,g,v,y,b,C,_,x=[];if(e.add(r),s.aria_label=s.aria_label||t.getAttrib(m,"aria-label",r.getLang("aria.rich_text_area")),s.theme&&("function"!=typeof s.theme?(s.theme=s.theme.replace(/-/,""),h=c.get(s.theme),r.theme=new h,r.theme.init&&r.theme.init(r,c.urls[s.theme]||e.documentBaseURL.replace(/\/$/,""))):r.theme=s.theme),i(u(s.plugins.replace(/\-/g,"")),n),s.popup_css!==!1&&(s.popup_css?s.popup_css=r.documentBaseURI.toAbsolute(s.popup_css):s.popup_css=r.baseURI.toAbsolute("themes/"+s.theme+"/skins/"+s.skin+"/dialog.css")),s.popup_css_add&&(s.popup_css+=","+r.documentBaseURI.toAbsolute(s.popup_css_add)),r.controlManager=new e.ControlManager(r),r.onBeforeRenderUI.dispatch(r,r.controlManager),s.render_ui&&r.theme&&(r.orgDisplay=m.style.display,"function"!=typeof s.theme?(d=s.width||m.style.width||m.offsetWidth,f=s.height||m.style.height||m.offsetHeight,p=s.min_height||100,C=/^[0-9\.]+(|px)$/i,C.test(""+d)&&(d=Math.max(parseInt(d,10)+(h.deltaWidth||0),100)),C.test(""+f)&&(f=Math.max(parseInt(f,10)+(h.deltaHeight||0),p)),h=r.theme.renderUI({targetNode:m,width:d,height:f,deltaWidth:s.delta_width,deltaHeight:s.delta_height}),t.setStyles(h.sizeContainer||h.editorContainer,{width:d,height:f}),f=(h.iframeHeight||f)+("number"==typeof f?h.deltaHeight||0:""),p>f&&(f=p)):(h=s.theme(r,m),h.editorContainer.nodeType&&(h.editorContainer=h.editorContainer.id=h.editorContainer.id||r.id+"_parent"),h.iframeContainer.nodeType&&(h.iframeContainer=h.iframeContainer.id=h.iframeContainer.id||r.id+"_iframecontainer"),f=h.iframeHeight||m.offsetHeight,a&&r.onInit.add(function(e){e.dom.bind(e.getBody(),"beforedeactivate keydown",function(){e.lastIERng=e.selection.getRng()})})),r.editorContainer=h.editorContainer),s.content_css&&i(u(s.content_css),function(e){r.contentCSS.push(r.documentBaseURI.toAbsolute(e))}),s.content_style&&r.contentStyles.push(s.content_style),s.content_editable)return m=o=h=null,r.initContentBody();for(document.domain&&location.hostname!=document.domain&&(e.relaxedDomain=document.domain),r.iframeHTML=s.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',s.document_base_url!=e.documentBaseURL&&(r.iframeHTML+='<base href="'+r.documentBaseURI.getURI()+'" />'),s.ie7_compat?r.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />':r.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />',r.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',_=0;_<r.contentCSS.length;_++)r.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+r.contentCSS[_]+'" />';r.contentCSS=[],y=s.body_id||"tinymce",-1!=y.indexOf("=")&&(y=r.getParam("body_id","","hash"),y=y[r.id]||y),b=s.body_class||"",-1!=b.indexOf("=")&&(b=r.getParam("body_class","","hash"),b=b[r.id]||""),r.iframeHTML+='</head><body id="'+y+'" class="mceContentBody '+b+'" onload="window.parent.tinyMCE.get(\''+r.id+"').onLoad.dispatch();\"><br></body></html>",e.relaxedDomain&&(a||e.isOpera&&parseFloat(opera.version())<11)&&(v='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+r.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody();})()'),o=t.add(h.iframeContainer,"iframe",{id:r.id+"_ifr",src:v||'javascript:""',frameBorder:"0",allowTransparency:"true",title:s.aria_label,style:{width:"100%",height:f,display:"block"}}),r.contentAreaContainer=h.iframeContainer,h.editorContainer&&(t.get(h.editorContainer).style.display=r.orgDisplay),m.style.visibility=r.orgVisibility,t.get(r.id).style.display="none",t.setAttrib(r.id,"aria-hidden",!0),e.relaxedDomain&&v||r.initContentBody(),m=o=h=null},initContentBody:function(){var n=this,o=n.settings,r=t.get(n.id),s=n.getDoc(),d,c,l;a&&e.relaxedDomain||o.content_editable||(s.open(),s.write(n.iframeHTML),s.close(),e.relaxedDomain&&(s.domain=e.relaxedDomain)),o.content_editable&&(t.addClass(r,"mceContentBody"),n.contentDocument=s=o.content_document||document,n.contentWindow=o.content_window||window,n.bodyElement=r,o.content_document=o.content_window=null),c=n.getBody(),c.disabled=!0,o.readonly||(c.contentEditable=n.getParam("content_editable_state",!0)),c.disabled=!1,n.schema=new e.html.Schema(o),n.dom=new e.dom.DOMUtils(s,{keep_values:!0,url_converter:n.convertURL,url_converter_scope:n,hex_colors:o.force_hex_style_colors,class_filter:o.class_filter,update_styles:!0,root_element:o.content_editable?n.id:null,schema:n.schema}),n.parser=new e.html.DomParser(o,n.schema),n.parser.addAttributeFilter("src,href,style",function(e,t){for(var o=e.length,i,r=n.dom,a,s;o--;)i=e[o],a=i.attr(t),s="data-mce-"+t,i.attributes.map[s]||("style"===t?i.attr(s,r.serializeStyle(r.parseStyle(a),i.name)):i.attr(s,n.convertURL(a,t,i.name)))}),n.parser.addNodeFilter("script",function(e,t){for(var n=e.length,o;n--;)o=e[n],o.attr("type","mce-"+(o.attr("type")||"text/javascript"))}),n.parser.addNodeFilter("#cdata",function(e,t){for(var n=e.length,o;n--;)o=e[n],o.type=8,o.name="#comment",o.value="[CDATA["+o.value+"]]"}),n.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t,o){for(var i=t.length,r,a=n.schema.getNonEmptyElements();i--;)r=t[i],r.isEmpty(a)&&(r.empty().append(new e.html.Node("br",1)).shortEnded=!0)}),n.serializer=new e.dom.Serializer(o,n.dom,n.schema),n.selection=new e.dom.Selection(n.dom,n.getWin(),n.serializer,n),n.formatter=new e.Formatter(n),n.undoManager=new e.UndoManager(n),n.forceBlocks=new e.ForceBlocks(n),n.enterKey=new e.EnterKey(n),n.editorCommands=new e.EditorCommands(n),n.onExecCommand.add(function(e,t){/^(FontName|FontSize)$/.test(t)||n.nodeChanged()}),n.serializer.onPreProcess.add(function(e,t){return n.onPreProcess.dispatch(n,t,e)}),n.serializer.onPostProcess.add(function(e,t){return n.onPostProcess.dispatch(n,t,e)}),n.onPreInit.dispatch(n),o.browser_spellcheck||o.gecko_spellcheck||(s.body.spellcheck=!1),o.readonly||n.bindNativeEvents(),n.controlManager.onPostRender.dispatch(n,n.controlManager),n.onPostRender.dispatch(n),n.quirks=e.util.Quirks(n),o.directionality&&(c.dir=o.directionality),o.nowrap&&(c.style.whiteSpace="nowrap"),o.protect&&n.onBeforeSetContent.add(function(e,t){i(o.protect,function(e){t.content=t.content.replace(e,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),n.onSetContent.add(function(){n.addVisual(n.getBody())}),o.padd_empty_editor&&n.onPostProcess.add(function(e,t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),n.load({initial:!0,format:"html"}),n.startContent=n.getContent({format:"raw"}),n.initialized=!0,n.onInit.dispatch(n),n.execCallback("setupcontent_callback",n.id,c,s),n.execCallback("init_instance_callback",n),n.focus(!0),n.nodeChanged({initial:!0}),n.contentStyles.length>0&&(l="",i(n.contentStyles,function(e){l+=e+"\r\n"}),n.dom.addStyle(l)),i(n.contentCSS,function(e){n.dom.loadCSS(e)}),o.auto_focus&&setTimeout(function(){var t=e.get(o.auto_focus);t.selection.select(t.getBody(),1),t.selection.collapse(1),t.getBody().focus(),t.getWin().focus()},100),r=s=c=null},focus:function(t){var n,o=this,i=o.selection,r=o.settings.content_editable,a,s,d=o.getDoc(),c;t||(o.lastIERng&&i.setRng(o.lastIERng),a=i.getRng(),a.item&&(s=a.item(0)),o._refreshContentEditable(),r||o.getWin().focus(),(e.isGecko||r)&&(c=o.getBody(),c.setActive?c.setActive():c.focus(),r&&i.normalize()),s&&s.ownerDocument==d&&(a=d.body.createControlRange(),a.addElement(s),a.select())),e.activeEditor!=o&&(null!=(n=e.activeEditor)&&n.onDeactivate.dispatch(n,o),o.onActivate.dispatch(o,n)),e._setActive(o)},execCallback:function(t){var n=this,o=n.settings[t],i;if(o)return n.callbackLookup&&(i=n.callbackLookup[t])&&(o=i.func,i=i.scope),d(o,"string")&&(i=o.replace(/\.\w+$/,""),i=i?e.resolve(i):0,o=e.resolve(o),n.callbackLookup=n.callbackLookup||{},n.callbackLookup[t]={func:o,scope:i}),o.apply(i||n,Array.prototype.slice.call(arguments,1))},translate:function(t){var n=this.settings.language||"en",o=e.i18n;return t?o[n+"."+t]||t.replace(/\{\#([^\}]+)\}/g,function(e,t){return o[n+"."+t]||"{#"+t+"}"}):""},getLang:function(t,n){return e.i18n[(this.settings.language||"en")+"."+t]||(d(n)?n:"{#"+t+"}")},getParam:function(t,n,o){var r=e.trim,a=d(this.settings[t])?this.settings[t]:n,s;return"hash"===o?(s={},d(a,"string")?i(a.indexOf("=")>0?a.split(/[;,](?![^=;,]*(?:[;,]|$))/):a.split(","),function(e){e=e.split("="),e.length>1?s[r(e[0])]=r(e[1]):s[r(e[0])]=r(e)}):s=a,s):a},nodeChanged:function(e){var t=this,n=t.selection,o;t.initialized&&(e=e||{},o=n.getStart()||t.getBody(),o=a&&o.ownerDocument!=t.getDoc()?t.getBody():o,e.parents=[],t.dom.getParent(o,function(t){return"BODY"==t.nodeName?!0:void e.parents.push(t)}),t.onNodeChange.dispatch(t,e?e.controlManager||t.controlManager:t.controlManager,o,n.isCollapsed(),e))},addButton:function(e,t){var n=this;n.buttons=n.buttons||{},n.buttons[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,o){var r=this,a;return r.settings.custom_shortcuts===!1?!1:(r.shortcuts=r.shortcuts||{},d(n,"string")&&(a=n,n=function(){r.execCommand(a,!1,null)}),d(n,"object")&&(a=n,n=function(){r.execCommand(a[0],a[1],a[2])}),i(u(e),function(e){var a={func:n,scope:o||this,desc:r.translate(t),alt:!1,ctrl:!1,shift:!1};i(u(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":a[e]=!0;break;default:a.charCode=e.charCodeAt(0),a.keyCode=e.toUpperCase().charCodeAt(0)}}),r.shortcuts[(a.ctrl?"ctrl":"")+","+(a.alt?"alt":"")+","+(a.shift?"shift":"")+","+a.keyCode]=a}),!0)},execCommand:function(e,t,n,r){var a=this,s=0,d,c;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(e)||r&&r.skip_focus||a.focus(),r=o({},r),a.onBeforeExecCommand.dispatch(a,e,t,n,r),r.terminate?!1:a.execCallback("execcommand_callback",a.id,a.selection.getNode(),e,t,n)?(a.onExecCommand.dispatch(a,e,t,n,r),!0):(d=a.execCommands[e])&&(c=d.func.call(d.scope,t,n),c!==!0)?(a.onExecCommand.dispatch(a,e,t,n,r),c):(i(a.plugins,function(o){return o.execCommand&&o.execCommand(e,t,n)?(a.onExecCommand.dispatch(a,e,t,n,r),s=1,!1):void 0}),s?!0:a.theme&&a.theme.execCommand&&a.theme.execCommand(e,t,n)?(a.onExecCommand.dispatch(a,e,t,n,r),!0):a.editorCommands.execCommand(e,t,n)?(a.onExecCommand.dispatch(a,e,t,n,r),!0):(a.getDoc().execCommand(e,t,n),void a.onExecCommand.dispatch(a,e,t,n,r)))},queryCommandState:function(e){var t=this,n,o;if(!t._isHidden()){if((n=t.queryStateCommands[e])&&(o=n.func.call(n.scope),o!==!0))return o;if(n=t.editorCommands.queryCommandState(e),-1!==n)return n;try{return this.getDoc().queryCommandState(e)}catch(i){}}},queryCommandValue:function(e){var t=this,n,o;if(!t._isHidden()){if((n=t.queryValueCommands[e])&&(o=n.func.call(n.scope),o!==!0))return o;if(n=t.editorCommands.queryCommandValue(e),d(n))return n;try{return this.getDoc().queryCommandValue(e)}catch(i){}}},show:function(){var e=this;t.show(e.getContainer()),t.hide(e.id),e.load()},hide:function(){var e=this,n=e.getDoc();a&&n&&n.execCommand("SelectAll"),e.save(),t.hide(e.getContainer()),t.setStyle(e.id,"display",e.orgDisplay)},isHidden:function(){return!t.isHidden(this.id)},setProgressState:function(e,t,n){return this.onSetProgressState.dispatch(this,e,t,n),e},load:function(e){var t=this,n=t.getElement(),o;return n?(e=e||{},e.load=!0,o=t.setContent(d(n.value)?n.value:n.innerHTML,e),e.element=n,e.no_events||t.onLoadContent.dispatch(t,e),e.element=n=null,o):void 0},save:function(e){var n=this,o=n.getElement(),r,a;if(o&&n.initialized)return e=e||{},e.save=!0,e.element=o,r=e.content=n.getContent(e),e.no_events||n.onSaveContent.dispatch(n,e),r=e.content,/TEXTAREA|INPUT/i.test(o.nodeName)?o.value=r:(o.innerHTML=r,(a=t.getParent(n.id,"form"))&&i(a.elements,function(e){return e.name==n.id?(e.value=r,!1):void 0})),e.element=o=null,r},setContent:function(t,n){var o=this,i,r=o.getBody(),a;return n=n||{},n.format=n.format||"html",n.set=!0,n.content=t,n.no_events||o.onBeforeSetContent.dispatch(o,n),t=n.content,e.isIE||0!==t.length&&!/^\s+$/.test(t)?("raw"!==n.format&&(t=new e.html.Serializer({},o.schema).serialize(o.parser.parse(t))),n.content=e.trim(t),o.dom.setHTML(r,n.content),n.no_events||o.onSetContent.dispatch(o,n),o.settings.content_editable&&document.activeElement!==o.getBody()||o.selection.normalize(),n.content):(a=o.settings.forced_root_block,t=a?"<"+a+'><br data-mce-bogus="1"></'+a+">":'<br data-mce-bogus="1">',r.innerHTML=t,o.selection.select(r,!0),void o.selection.collapse(!0))},getContent:function(t){var n=this,o,i=n.getBody();return t=t||{},t.format=t.format||"html",t.get=!0,t.getInner=!0,t.no_events||n.onBeforeGetContent.dispatch(n,t),o="raw"==t.format?i.innerHTML:"text"==t.format?i.innerText||i.textContent:n.serializer.serialize(i,t),"text"!=t.format?t.content=e.trim(o):t.content=o,t.no_events||n.onGetContent.dispatch(n,t),t.content},isDirty:function(){var t=this;return e.trim(t.startContent)!=e.trim(t.getContent({format:"raw",no_events:1}))&&!t.isNotDirty},getContainer:function(){var e=this;return e.container||(e.container=t.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return t.get(this.settings.content_element||this.id)},getWin:function(){var e=this,n;return e.contentWindow||(n=t.get(e.id+"_ifr"),n&&(e.contentWindow=n.contentWindow)),e.contentWindow},getDoc:function(){var e=this,t;return e.contentDocument||(t=e.getWin(),t&&(e.contentDocument=t.document)),e.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var o=this,i=o.settings;return i.urlconverter_callback?o.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")?e:i.relative_urls?o.documentBaseURI.toRelative(e):e=o.documentBaseURI.toAbsolute(e,i.remove_script_host)},addVisual:function(e){var t=this,n=t.settings,o=t.dom,r;e=e||t.getBody(),d(t.hasVisual)||(t.hasVisual=n.visual),i(o.select("table,a",e),function(e){var i;switch(e.nodeName){case"TABLE":return r=n.visual_table_class||"mceItemTable",i=o.getAttrib(e,"border"),void(i&&"0"!=i||(t.hasVisual?o.addClass(e,r):o.removeClass(e,r)));case"A":return void(o.getAttrib(e,"href",!1)||(i=o.getAttrib(e,"name")||e.id,r="mceItemAnchor",i&&(t.hasVisual?o.addClass(e,r):o.removeClass(e,r))))}}),t.onVisualAid.dispatch(t,e,t.hasVisual)},remove:function(){var o=this,i=o.getContainer();o.removed||(o.removed=1,o.hide(),o.settings.content_editable||(n.unbind(o.getWin()),n.unbind(o.getDoc())),n.unbind(o.getBody()),n.clear(i),o.execCallback("remove_instance_callback",o),o.onRemove.dispatch(o),o.onExecCommand.listeners=[],e.remove(o),t.remove(i))},destroy:function(t){var o=this;o.destroyed||(r&&(n.unbind(o.getDoc()),n.unbind(o.getWin()),n.unbind(o.getBody())),t||(e.removeUnload(o.destroy),tinyMCE.onBeforeUnload.remove(o._beforeUnload),o.theme&&o.theme.destroy&&o.theme.destroy(),o.controlManager.destroy(),o.selection.destroy(),o.dom.destroy()),o.formElement&&(o.formElement.submit=o.formElement._mceOldSubmit,o.formElement._mceOldSubmit=null),o.contentAreaContainer=o.formElement=o.container=o.settings.content_element=o.bodyElement=o.contentDocument=o.contentWindow=null,o.selection&&(o.selection=o.selection.win=o.selection.dom=o.selection.dom.doc=null),o.destroyed=1)},_refreshContentEditable:function(){var e=this,t,n;e._isHidden()&&(t=e.getBody(),n=t.parentNode,n.removeChild(t),n.appendChild(t),t.focus())},_isHidden:function(){var e;return r?(e=this.selection.getSel(),!e||!e.rangeCount||0===e.rangeCount):0}})}(tinymce),function(e){var t=e.each;e.Editor.prototype.setupEvents=function(){var n=this,o=n.settings;t(["onPreInit","onBeforeRenderUI","onPostRender","onLoad","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState","onSetAttrib"],function(t){n[t]=new e.util.Dispatcher(n)}),o.cleanup_callback&&(n.onBeforeSetContent.add(function(e,t){t.content=e.execCallback("cleanup_callback","insert_to_editor",t.content,t)}),n.onPreProcess.add(function(e,t){t.set&&e.execCallback("cleanup_callback","insert_to_editor_dom",t.node,t),t.get&&e.execCallback("cleanup_callback","get_from_editor_dom",t.node,t)}),n.onPostProcess.add(function(e,t){t.set&&(t.content=e.execCallback("cleanup_callback","insert_to_editor",t.content,t)),t.get&&(t.content=e.execCallback("cleanup_callback","get_from_editor",t.content,t))})),o.save_callback&&n.onGetContent.add(function(e,t){t.save&&(t.content=e.execCallback("save_callback",e.id,t.content,e.getBody()))}),o.handle_event_callback&&n.onEvent.add(function(e,t,o){n.execCallback("handle_event_callback",t,e,o)===!1&&(t.preventDefault(),t.stopPropagation())}),o.handle_node_change_callback&&n.onNodeChange.add(function(e,t,n){e.execCallback("handle_node_change_callback",e.id,n,-1,-1,!0,e.selection.isCollapsed())}),o.save_callback&&n.onSaveContent.add(function(e,t){var n=e.execCallback("save_callback",e.id,t.content,e.getBody());n&&(t.content=n)}),o.onchange_callback&&n.onChange.add(function(e,t){e.execCallback("onchange_callback",e,t)})},e.Editor.prototype.bindNativeEvents=function(){function n(e,t){var n=e.type;a.removed||a.onEvent.dispatch(a,e,t)!==!1&&a[l[e.fakeType||e.type]].dispatch(a,e,t)}function o(e){a.focus(!0)}function i(t,n){65==n.keyCode&&e.VK.metaKeyPressed(n)||a.selection.normalize(),a.nodeChanged()}function r(n,o){(n.altKey||n.ctrlKey||n.metaKey)&&t(a.shortcuts,function(t){var i=e.isMac?n.metaKey:n.ctrlKey;if(t.ctrl==i&&t.alt==n.altKey&&t.shift==n.shiftKey)return n.keyCode==t.keyCode||n.charCode&&n.charCode==t.charCode?(n.preventDefault(),o&&t.func.call(t.scope),!0):void 0})}var a=this,s,d=a.settings,c=a.dom,l;l={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"},t(l,function(t,o){var i=d.content_editable?a.getBody():a.getDoc();switch(o){case"contextmenu":c.bind(i,o,n);break;case"paste":c.bind(a.getBody(),o,n);break;case"submit":case"reset":c.bind(a.getElement().form||e.DOM.getParent(a.id,"form"),o,n);break;default:c.bind(i,o,n)}}),c.bind(d.content_editable?a.getBody():e.isGecko?a.getDoc():a.getWin(),"focus",function(e){
a.focus(!0)}),d.content_editable&&e.isOpera&&(c.bind(a.getBody(),"click",o),c.bind(a.getBody(),"keydown",o)),a.onMouseUp.add(i),a.onKeyUp.add(function(t,n){var o=n.keyCode;(o>=33&&36>=o||o>=37&&40>=o||13==o||45==o||46==o||8==o||e.isMac&&(91==o||93==o)||n.ctrlKey)&&i(t,n)}),a.onReset.add(function(){a.setContent(a.startContent,{format:"raw"})}),a.onKeyUp.add(function(e,t){r(t)}),a.onKeyPress.add(function(e,t){r(t)}),a.onKeyDown.add(function(e,t){r(t,!0)}),e.isOpera&&a.onClick.add(function(e,t){t.preventDefault()})}}(tinymce),function(e){var t=e.each,n,o=!0,i=!1;e.EditorCommands=function(r){function a(e,t,n){var r;return e=e.toLowerCase(),(r=v.exec[e])?(r(e,t,n),o):i}function s(e){var t;return e=e.toLowerCase(),(t=v.state[e])?t(e):-1}function d(e){var t;return e=e.toLowerCase(),(t=v.value[e])?t(e):i}function c(e,n){n=n||"exec",t(e,function(e,o){t(o.toLowerCase().split(","),function(t){v[n][t]=e})})}function l(e,t,o){return t===n&&(t=i),o===n&&(o=null),r.getDoc().execCommand(e,t,o)}function u(e){return b.match(e)}function f(e,t){b.toggle(e,t?{value:t}:n)}function p(e){C=g.getBookmark(e)}function m(){g.moveToBookmark(C)}var h=r.dom,g=r.selection,v={state:{},exec:{},value:{}},y=r.settings,b=r.formatter,C;e.extend(this,{execCommand:a,queryCommandState:s,queryCommandValue:d,addCommands:c}),c({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){r.undoManager.add()},"Cut,Copy,Paste":function(t){var n=r.getDoc(),i;try{l(t)}catch(a){i=o}(i||!n.queryCommandSupported(t))&&(e.isGecko?r.windowManager.confirm(r.getLang("clipboard_msg"),function(e){e&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):r.windowManager.alert(r.getLang("clipboard_no_support")))},unlink:function(e){g.isCollapsed()&&g.select(g.getNode()),l(e),g.collapse(i)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var n=e.substring(7);t("left,center,right,full".split(","),function(e){n!=e&&b.remove("align"+e)}),f("align"+n),a("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;l(e),t=h.getParent(g.getNode(),"ol,ul"),t&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(p(),h.split(n,t),m()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){f(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){f(e,n)},FontSize:function(t,n,o){var i,r;o>=1&&7>=o&&(r=e.explode(y.font_size_style_values),i=e.explode(y.font_size_classes),o=i?i[o-1]||o:r[o-1]||o),f(t,o)},RemoveFormat:function(e){b.remove(e)},mceBlockQuote:function(e){f("blockquote")},FormatBlock:function(e,t,n){return f(n||"p")},mceCleanup:function(){var e=g.getBookmark();r.setContent(r.getContent({cleanup:o}),{cleanup:o}),g.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var i=n||g.getNode();i!=r.getBody()&&(p(),r.dom.remove(i,o),m())},mceSelectNodeDepth:function(e,t,n){var o=0;h.getParent(g.getNode(),function(e){return 1==e.nodeType&&o++==n?(g.select(e),i):void 0},r.getBody())},mceSelectNode:function(e,t,n){g.select(n)},mceInsertContent:function(t,n,o){var i,a,s,d,c,l,u,f,p,m,v,y,b,C;if(i=r.parser,a=new e.html.Serializer({},r.schema),b='<span id="mce_marker" data-mce-type="bookmark">\ufeff</span>',l={content:o,format:"html"},g.onBeforeSetContent.dispatch(g,l),o=l.content,-1==o.indexOf("{$caret}")&&(o+="{$caret}"),o=o.replace(/\{\$caret\}/,b),g.isCollapsed()||r.getDoc().execCommand("Delete",!1,null),s=g.getNode(),l={context:s.nodeName.toLowerCase()},c=i.parse(o,l),v=c.lastChild,"mce_marker"==v.attr("id"))for(u=v,v=v.prev;v;v=v.walk(!0))if(3==v.type||!h.isBlock(v.name)){v.parent.insert(u,v,"br"===v.name);break}if(l.invalid){for(g.setContent(b),s=g.getNode(),d=r.getBody(),9==s.nodeType?s=v=d:v=s;v!==d;)s=v,v=v.parentNode;o=s==d?d.innerHTML:h.getOuterHTML(s),o=a.serialize(i.parse(o.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return a.serialize(c)}))),s==d?h.setHTML(d,o):h.setOuterHTML(s,o)}else o=a.serialize(c),v=s.firstChild,y=s.lastChild,!v||v===y&&"BR"===v.nodeName?h.setHTML(s,o):g.setContent(o);u=h.get("mce_marker"),f=h.getRect(u),p=h.getViewPort(r.getWin()),(f.y+f.h>p.y+p.h||f.y<p.y||f.x>p.x+p.w||f.x<p.x)&&(C=e.isIE?r.getDoc().documentElement:r.getBody(),C.scrollLeft=f.x,C.scrollTop=f.y-p.h+25),m=h.createRng(),v=u.previousSibling,v&&3==v.nodeType?m.setStart(v,v.nodeValue.length):(m.setStartBefore(u),m.setEndBefore(u)),h.remove(u),g.setRng(m),g.onSetContent.dispatch(g,l),r.addVisual()},mceInsertRawHTML:function(e,t,n){g.setContent("tiny_mce_marker"),r.setContent(r.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){f(n)},mceSetContent:function(e,t,n){r.setContent(n)},"Indent,Outdent":function(e){var n,o,i;n=y.indentation,o=/[a-z%]+$/i.exec(n),n=parseInt(n),s("InsertUnorderedList")||s("InsertOrderedList")?l(e):(y.forced_root_block||h.getParent(g.getNode(),h.isBlock)||b.apply("div"),t(g.getSelectedBlocks(),function(t){"outdent"==e?(i=Math.max(0,parseInt(t.style.paddingLeft||0)-n),h.setStyle(t,"paddingLeft",i?i+o:"")):h.setStyle(t,"paddingLeft",parseInt(t.style.paddingLeft||0)+n+o)}))},mceRepaint:function(){var t;if(e.isGecko)try{p(o),g.getSel()&&g.getSel().selectAllChildren(r.getBody()),g.collapse(o),m()}catch(n){}},mceToggleFormat:function(e,t,n){b.toggle(n)},InsertHorizontalRule:function(){r.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){r.hasVisual=!r.hasVisual,r.addVisual()},mceReplaceContent:function(e,t,n){r.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,g.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var o;"string"==typeof n&&(n={href:n}),o=h.getParent(g.getNode(),"a"),n.href=n.href.replace(" ","%20"),o&&n.href||b.remove("link"),n.href&&b.apply("link",n,o)},selectAll:function(){var e=h.getRoot(),t=h.createRng();g.getRng().setStart?(t.setStart(e,0),t.setEnd(e,e.childNodes.length),g.setRng(t)):l("SelectAll")}}),c({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(t){var n="align"+t.substring(7),i=g.isCollapsed()?[h.getParent(g.getNode(),h.isBlock)]:g.getSelectedBlocks(),r=e.map(i,function(e){return!!b.matchNode(e,n)});return-1!==e.inArray(r,o)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return u(e)},mceBlockQuote:function(){return u("blockquote")},Outdent:function(){var e;if(y.inline_styles){if((e=h.getParent(g.getStart(),h.isBlock))&&parseInt(e.style.paddingLeft)>0)return o;if((e=h.getParent(g.getEnd(),h.isBlock))&&parseInt(e.style.paddingLeft)>0)return o}return s("InsertUnorderedList")||s("InsertOrderedList")||!y.inline_styles&&!!h.getParent(g.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=h.getParent(g.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),c({"FontSize,FontName":function(e){var t=0,n;return(n=h.getParent(g.getNode(),"span"))&&(t="fontsize"==e?n.style.fontSize:n.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),t}},"value"),c({Undo:function(){r.undoManager.undo()},Redo:function(){r.undoManager.redo()}})}}(tinymce),function(e){var t=e.util.Dispatcher;e.UndoManager=function(n){function o(){return e.trim(n.getContent({format:"raw",no_events:1}).replace(/<span[^>]+data-mce-bogus[^>]+>[\u200B\uFEFF]+<\/span>/g,""))}function i(){r.typing=!1,r.add()}var r,a=0,s=[],d,c,l,u;return onBeforeAdd=new t(r),c=new t(r),l=new t(r),u=new t(r),c.add(function(e,t){return e.hasUndo()?n.onChange.dispatch(n,t,e):void 0}),l.add(function(e,t){return n.onUndo.dispatch(n,t,e)}),u.add(function(e,t){return n.onRedo.dispatch(n,t,e)}),n.onInit.add(function(){r.add()}),n.onBeforeExecCommand.add(function(e,t,n,o,i){"Undo"==t||"Redo"==t||"mceRepaint"==t||i&&i.skip_undo||r.beforeChange()}),n.onExecCommand.add(function(e,t,n,o,i){"Undo"==t||"Redo"==t||"mceRepaint"==t||i&&i.skip_undo||r.add()}),n.onSaveContent.add(i),n.dom.bind(n.dom.getRoot(),"dragend",i),n.dom.bind(n.getDoc(),e.isGecko?"blur":"focusout",function(e){!n.removed&&r.typing&&i()}),n.onKeyUp.add(function(e,t){var n=t.keyCode;(n>=33&&36>=n||n>=37&&40>=n||45==n||13==n||t.ctrlKey)&&i()}),n.onKeyDown.add(function(e,t){var n=t.keyCode;return n>=33&&36>=n||n>=37&&40>=n||45==n?void(r.typing&&i()):void((16>n||n>20)&&224!=n&&91!=n&&!r.typing&&(r.beforeChange(),r.typing=!0,r.add()))}),n.onMouseDown.add(function(e,t){r.typing&&i()}),n.addShortcut("ctrl+z","undo_desc","Undo"),n.addShortcut("ctrl+y","redo_desc","Redo"),r={data:s,typing:!1,onBeforeAdd:onBeforeAdd,onAdd:c,onUndo:l,onRedo:u,beforeChange:function(){d=n.selection.getBookmark(2,!0)},add:function(e){var t,i=n.settings,c;if(e=e||{},e.content=o(),r.onBeforeAdd.dispatch(r,e),c=s[a],c&&c.content==e.content)return null;if(s[a]&&(s[a].beforeBookmark=d),i.custom_undo_redo_levels&&s.length>i.custom_undo_redo_levels){for(t=0;t<s.length-1;t++)s[t]=s[t+1];s.length--,a=s.length}return e.bookmark=n.selection.getBookmark(2,!0),a<s.length-1&&(s.length=a+1),s.push(e),a=s.length-1,r.onAdd.dispatch(r,e),n.isNotDirty=0,e},undo:function(){var e,t;return r.typing&&(r.add(),r.typing=!1),a>0&&(e=s[--a],n.setContent(e.content,{format:"raw"}),n.selection.moveToBookmark(e.beforeBookmark),r.onUndo.dispatch(r,e)),e},redo:function(){var e;return a<s.length-1&&(e=s[++a],n.setContent(e.content,{format:"raw"}),n.selection.moveToBookmark(e.bookmark),r.onRedo.dispatch(r,e)),e},clear:function(){s=[],a=0,r.typing=!1},hasUndo:function(){return a>0||this.typing},hasRedo:function(){return a<s.length-1&&!this.typing}}}}(tinymce),tinymce.ForceBlocks=function(e){function t(){var t=i.getStart(),a=e.getBody(),s,d,c,l,u,f,p,m=-16777215,h,g;if(t&&1===t.nodeType&&n.forced_root_block){for(;t&&t!=a;){if(r[t.nodeName])return;t=t.parentNode}for(s=i.getRng(),s.setStart?(d=s.startContainer,c=s.startOffset,l=s.endContainer,u=s.endOffset):(s.item&&(t=s.item(0),s=e.getDoc().body.createTextRange(),s.moveToElementText(t)),g=s.parentElement().ownerDocument===e.getDoc(),tmpRng=s.duplicate(),tmpRng.collapse(!0),c=-1*tmpRng.move("character",m),tmpRng.collapsed||(tmpRng=s.duplicate(),tmpRng.collapse(!1),u=-1*tmpRng.move("character",m)-c)),t=a.firstChild;t;)if(3===t.nodeType||1==t.nodeType&&!r[t.nodeName]){if(3===t.nodeType&&0==t.nodeValue.length){p=t,t=t.nextSibling,o.remove(p);continue}f||(f=o.create(n.forced_root_block),t.parentNode.insertBefore(f,t),h=!0),p=t,t=t.nextSibling,f.appendChild(p)}else f=null,t=t.nextSibling;if(h){if(s.setStart)s.setStart(d,c),s.setEnd(l,u),i.setRng(s);else if(g)try{s=e.getDoc().body.createTextRange(),s.moveToElementText(a),s.collapse(!0),s.moveStart("character",c),u>0&&s.moveEnd("character",u),s.select()}catch(v){}e.nodeChanged()}}}var n=e.settings,o=e.dom,i=e.selection,r=e.schema.getBlockElements();n.forced_root_block&&(e.onKeyUp.add(t),e.onNodeChange.add(t))},function(e){var t=e.DOM,n=e.dom.Event,o=e.each,i=e.extend;e.create("tinymce.ControlManager",{ControlManager:function(t,n){var i=this,r;n=n||{},i.editor=t,i.controls={},i.onAdd=new e.util.Dispatcher(i),i.onPostRender=new e.util.Dispatcher(i),i.prefix=n.prefix||t.id+"_",i._cls={},i.onPostRender.add(function(){o(i.controls,function(e){e.postRender()})})},get:function(e){return this.controls[this.prefix+e]||this.controls[e]},setActive:function(e,t){var n=null;return(n=this.get(e))&&n.setActive(t),n},setDisabled:function(e,t){var n=null;return(n=this.get(e))&&n.setDisabled(t),n},add:function(e){var t=this;return e&&(t.controls[e.id]=e,t.onAdd.dispatch(e,t)),e},createControl:function(e){var t,n,i,r=this,a=r.editor,s,d;for(r.controlFactories||(r.controlFactories=[],o(a.plugins,function(e){e.createControl&&r.controlFactories.push(e)})),s=r.controlFactories,n=0,i=s.length;i>n;n++)if(t=s[n].createControl(e,r))return r.add(t);return"|"===e||"separator"===e?r.createSeparator():a.buttons&&(t=a.buttons[e])?r.createButton(e,t):r.add(t)},createDropMenu:function(t,n,o){var r=this,a=r.editor,s,d,c,l;return n=i({"class":"mceDropDown",constrain:a.settings.constrain_menus},n),n["class"]=n["class"]+" "+a.getParam("skin")+"Skin",(c=a.getParam("skin_variant"))&&(n["class"]+=" "+a.getParam("skin")+"Skin"+c.substring(0,1).toUpperCase()+c.substring(1)),n["class"]+="rtl"==a.settings.directionality?" mceRtl":"",t=r.prefix+t,l=o||r._cls.dropmenu||e.ui.DropMenu,s=r.controls[t]=new l(t,n),s.onAddItem.add(function(e,t){var n=t.settings;n.title=a.getLang(n.title,n.title),n.onclick||(n.onclick=function(e){n.cmd&&a.execCommand(n.cmd,n.ui||!1,n.value)})}),a.onRemove.add(function(){s.destroy()}),e.isIE&&(s.onShowMenu.add(function(){a.focus(),d=a.selection.getBookmark(1)}),s.onHideMenu.add(function(){d&&(a.selection.moveToBookmark(d),d=0)})),r.add(s)},createListBox:function(t,o,r){function a(t){return t.settings.use_accessible_selects&&!e.isGecko}var s=this,d=s.editor,c,l,u;return s.get(t)?null:(o.title=d.translate(o.title),o.scope=o.scope||d,o.onselect||(o.onselect=function(e){d.execCommand(o.cmd,o.ui||!1,e||o.value)}),o=i({title:o.title,"class":"mce_"+t,scope:o.scope,control_manager:s},o),t=s.prefix+t,d.settings.use_native_selects||a(d)?l=new e.ui.NativeListBox(t,o):(u=r||s._cls.listbox||e.ui.ListBox,l=new u(t,o,d)),s.controls[t]=l,e.isWebKit&&l.onPostRender.add(function(e,t){n.add(t,"mousedown",function(){d.bookmark=d.selection.getBookmark(1)}),n.add(t,"focus",function(){d.selection.moveToBookmark(d.bookmark),d.bookmark=null})}),l.hideMenu&&d.onMouseDown.add(l.hideMenu,l),s.add(l))},createButton:function(t,n,o){var r=this,a=r.editor,s,d,c;return r.get(t)?null:(n.title=a.translate(n.title),n.label=a.translate(n.label),n.scope=n.scope||a,n.onclick||n.menu_button||(n.onclick=function(){a.execCommand(n.cmd,n.ui||!1,n.value)}),n=i({title:n.title,"class":"mce_"+t,unavailable_prefix:a.getLang("unavailable",""),scope:n.scope,control_manager:r},n),t=r.prefix+t,n.menu_button?(c=o||r._cls.menubutton||e.ui.MenuButton,d=new c(t,n,a),a.onMouseDown.add(d.hideMenu,d)):(c=r._cls.button||e.ui.Button,d=new c(t,n,a)),r.add(d))},createMenuButton:function(e,t,n){return t=t||{},t.menu_button=1,this.createButton(e,t,n)},createSplitButton:function(t,n,o){var r=this,a=r.editor,s,d,c;return r.get(t)?null:(n.title=a.translate(n.title),n.scope=n.scope||a,n.onclick||(n.onclick=function(e){a.execCommand(n.cmd,n.ui||!1,e||n.value)}),n.onselect||(n.onselect=function(e){a.execCommand(n.cmd,n.ui||!1,e||n.value)}),n=i({title:n.title,"class":"mce_"+t,scope:n.scope,control_manager:r},n),t=r.prefix+t,c=o||r._cls.splitbutton||e.ui.SplitButton,d=r.add(new c(t,n,a)),a.onMouseDown.add(d.hideMenu,d),d)},createColorSplitButton:function(t,n,o){var r=this,a=r.editor,s,d,c,l;return r.get(t)?null:(n.title=a.translate(n.title),n.scope=n.scope||a,n.onclick||(n.onclick=function(t){e.isIE&&(l=a.selection.getBookmark(1)),a.execCommand(n.cmd,n.ui||!1,t||n.value)}),n.onselect||(n.onselect=function(e){a.execCommand(n.cmd,n.ui||!1,e||n.value)}),n=i({title:n.title,"class":"mce_"+t,menu_class:a.getParam("skin")+"Skin",scope:n.scope,more_colors_title:a.getLang("more_colors")},n),t=r.prefix+t,c=o||r._cls.colorsplitbutton||e.ui.ColorSplitButton,d=new c(t,n,a),a.onMouseDown.add(d.hideMenu,d),a.onRemove.add(function(){d.destroy()}),e.isIE&&(d.onShowMenu.add(function(){a.focus(),l=a.selection.getBookmark(1)}),d.onHideMenu.add(function(){l&&(a.selection.moveToBookmark(l),l=0)})),r.add(d))},createToolbar:function(t,n,o){var i,r=this,a;return t=r.prefix+t,a=o||r._cls.toolbar||e.ui.Toolbar,i=new a(t,n,r.editor),r.get(t)?null:r.add(i)},createToolbarGroup:function(t,n,o){var i,r=this,a;return t=r.prefix+t,a=o||this._cls.toolbarGroup||e.ui.ToolbarGroup,i=new a(t,n,r.editor),r.get(t)?null:r.add(i)},createSeparator:function(t){var n=t||this._cls.separator||e.ui.Separator;return new n},setControlType:function(e,t){return this._cls[e.toLowerCase()]=t},destroy:function(){o(this.controls,function(e){e.destroy()}),this.controls=null}})}(tinymce),function(e){var t=e.util.Dispatcher,n=e.each,o=e.isIE,i=e.isOpera;e.create("tinymce.WindowManager",{WindowManager:function(e){var n=this;n.editor=e,n.onOpen=new t(n),n.onClose=new t(n),n.params={},n.features={}},open:function(t,r){var a=this,s="",d,c,l="modal"==a.editor.settings.dialog_type,u,f,p,m=e.DOM.getViewPort(),h;t=t||{},r=r||{},f=i?m.w:screen.width,p=i?m.h:screen.height,t.name=t.name||"mc_"+(new Date).getTime(),t.width=parseInt(t.width||320),t.height=parseInt(t.height||240),t.resizable=!0,t.left=t.left||parseInt(f/2)-t.width/2,t.top=t.top||parseInt(p/2)-t.height/2,r.inline=!1,r.mce_width=t.width,r.mce_height=t.height,r.mce_auto_focus=t.auto_focus,l&&o&&(t.center=!0,t.help=!1,t.dialogWidth=t.width+"px",t.dialogHeight=t.height+"px",t.scroll=t.scrollbars||!1),n(t,function(t,n){e.is(t,"boolean")&&(t=t?"yes":"no"),/^(name|url)$/.test(n)||(s+=o&&l?(s?";":"")+n+":"+t:(s?",":"")+n+"="+t)}),a.features=t,a.params=r,a.onOpen.dispatch(a,t,r),h=t.url||t.file,h=e._addVer(h);try{o&&l?(u=1,window.showModalDialog(h,window,s)):u=window.open(h,t.name,s)}catch(g){}u||alert(a.editor.getLang("popup_blocked"))},close:function(e){e.close(),this.onClose.dispatch(this)},createInstance:function(t,n,o,i,r,a){var s=e.resolve(t);return new s(n,o,i,r,a)},confirm:function(e,t,n,o){o=o||window,t.call(n||this,o.confirm(this._decode(this.editor.getLang(e,e))))},alert:function(e,t,n,o){var i=this;o=o||window,o.alert(i._decode(i.editor.getLang(e,e))),t&&t.call(n||i)},resizeBy:function(e,t,n){n.resizeBy(e,t)},_decode:function(t){return e.DOM.decode(t).replace(/\\n/g,"\n")}})}(tinymce),function(e){e.Formatter=function(t){function n(e){return e instanceof Array}function o(e,t){return I.getParents(e,t,I.getRoot())}function i(e){return 1===e.nodeType&&"_mce_caret"===e.id}function r(){d({alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(e){return!0},onformat:function(e,t,n){L(n,function(t,n){I.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),L("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(e){d(e,{block:e,remove:"all"})}),d(t.settings.formats)}function a(){t.addShortcut("ctrl+b","bold_desc","Bold"),t.addShortcut("ctrl+i","italic_desc","Italic"),t.addShortcut("ctrl+u","underline_desc","Underline");for(var e=1;6>=e;e++)t.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);t.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),t.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),t.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function s(e){return e?D[e]:D}function d(e,t){e&&("string"!=typeof e?L(e,function(e,t){d(t,e)}):(t=t.length?t:[t],L(t,function(e){e.deep===Y&&(e.deep=!e.selector),e.split===Y&&(e.split=!e.selector||e.inline),e.remove===Y&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),D[e]=t))}function c(n,o,r){function a(e,t){t=t||m,e&&(t.onformat&&t.onformat(e,t,o,r),L(t.styles,function(t,n){I.setStyle(e,n,C(t,o))}),L(t.attributes,function(t,n){I.setAttrib(e,n,C(t,o))}),L(t.classes,function(t){t=C(t,o),I.hasClass(e,t)||I.addClass(e,t)}))}function d(){function e(e,t){var n=new O(t);for(r=n.current();r;r=n.prev())if(r.childNodes.length>1||r==e||"BR"==r.tagName)return r}var n=t.selection.getRng(),o=n.startContainer,i=n.endContainer;if(o!=i&&0===n.endOffset){var a=e(o,i),s=3==a.nodeType?a.length:a.childNodes.length;n.setEnd(a,s)}return n}function l(t,n,o,i,r){var a=[],s=-1,d,c=-1,l=-1,u;return L(t.childNodes,function(e,t){return"UL"===e.nodeName||"OL"===e.nodeName?(s=t,d=e,!1):void 0}),L(t.childNodes,function(e,t){"SPAN"===e.nodeName&&"bookmark"==I.getAttrib(e,"data-mce-type")&&(e.id==n.id+"_start"?c=t:e.id==n.id+"_end"&&(l=t))}),0>=s||s>c&&l>s?(L(e.grep(t.childNodes),r),0):(u=I.clone(o,j),L(e.grep(t.childNodes),function(e,t){(s>c&&s>t||c>s&&t>s)&&(a.push(e),e.parentNode.removeChild(e))}),s>c?t.insertBefore(u,d):c>s&&t.insertBefore(u,d.nextSibling),i.push(u),L(a,function(e){u.appendChild(e)}),u)}function u(t,r,s){var d=[],c,u,h=!0;c=m.inline||m.block,u=I.create(c),a(u),H.walk(t,function(t){function g(t){var b,C,_,k,S;return S=h,b=t.nodeName.toLowerCase(),C=t.parentNode.nodeName.toLowerCase(),1===t.nodeType&&X(t)&&(S=h,h="true"===X(t),k=!0),y(b,"br")?(v=0,void(m.block&&I.remove(t))):m.wrapper&&f(t,n,o)?void(v=0):h&&!k&&m.block&&!m.wrapper&&A(b)?(t=I.rename(t,c),a(t),d.push(t),void(v=0)):m.selector&&(L(p,function(e){"collapsed"in e&&e.collapsed!==x||I.is(t,e.selector)&&!i(t)&&(a(t,e),_=!0)}),!m.inline||_)?void(v=0):void(h&&!k&&F(c,b)&&F(C,c)&&(s||3!==t.nodeType||1!==t.nodeValue.length||65279!==t.nodeValue.charCodeAt(0))&&!i(t)?(v||(v=I.clone(u,j),t.parentNode.insertBefore(v,t),d.push(v)),v.appendChild(t)):"li"==b&&r?v=l(t,r,u,d,g):(v=0,L(e.grep(t.childNodes),g),k&&(h=S),v=0))}var v;L(t,g)}),m.wrap_links===!1&&L(d,function(t){function n(t){var o,i,r;if("A"===t.nodeName){for(i=I.clone(u,j),d.push(i),r=e.grep(t.childNodes),o=0;o<r.length;o++)i.appendChild(r[o]);t.appendChild(i)}L(e.grep(t.childNodes),n)}n(t)}),L(d,function(e){function t(e){var t=0;return L(e.childNodes,function(e){_(e)||N(e)||t++}),t}function r(e){var t,n;return L(e.childNodes,function(e){return 1!=e.nodeType||N(e)||i(e)?void 0:(t=e,j)}),t&&v(t,m)&&(n=I.clone(t,j),a(n),I.replace(n,e,W),I.remove(t,1)),n||e}var s;if(s=t(e),(d.length>1||!U(e))&&0===s)return void I.remove(e,1);if(m.inline||m.wrapper){if(m.exact||1!==s||(e=r(e)),L(p,function(t){L(I.select(t.inline,e),function(e){var n;if(t.wrap_links===!1){n=e.parentNode;do if("A"===n.nodeName)return;while(n=n.parentNode)}S(t,o,e,t.exact?e:null)})}),f(e.parentNode,n,o))return I.remove(e,1),e=0,W;m.merge_with_parents&&I.getParent(e.parentNode,function(t){return f(t,n,o)?(I.remove(e,1),e=0,W):void 0}),e&&m.merge_siblings!==!1&&(e=T(w(e),e),e=T(e,w(e,W)))}})}var p=s(n),m=p[0],h,g,b,x=P.isCollapsed();if(m)if(r)r.nodeType?(g=I.createRng(),g.setStartBefore(r),g.setEndAfter(r),u(k(g,p),null,!0)):u(r,null,!0);else if(x&&m.inline&&!I.select("td.mceSelected,th.mceSelected").length)M("apply",n,o);else{var E=t.selection.getNode();V||!p[0].defaultBlock||I.getParent(E,I.isBlock)||c(p[0].defaultBlock),t.selection.setRng(d()),h=P.getBookmark(),u(k(P.getRng(W),p),h),m.styles&&(m.styles.color||m.styles.textDecoration)&&(e.walk(E,Q,"childNodes"),Q(E)),P.moveToBookmark(h),R(P.getRng(W)),t.nodeChanged()}}function l(n,i,r){function a(t){var n,o,r,s,d,c;if(1===t.nodeType&&X(t)&&(d=C,C="true"===X(t),c=!0),n=e.grep(t.childNodes),C&&!c)for(o=0,r=h.length;r>o&&!S(h[o],i,t,t);o++);if(g.deep&&n.length){for(o=0,r=n.length;r>o;o++)a(n[o]);c&&(C=d)}}function d(e){var t;return L(o(e.parentNode).reverse(),function(e){var o;t||"_start"==e.id||"_end"==e.id||(o=f(e,n,i),o&&o.split!==!1&&(t=e))}),t}function c(e,t,n,o){var r,a,s,d,c,l;if(e){for(l=e.parentNode,r=t.parentNode;r&&r!=l;r=r.parentNode){for(a=I.clone(r,j),c=0;c<h.length;c++)if(S(h[c],i,a,a)){a=0;break}a&&(s&&a.appendChild(s),d||(d=a),s=a)}!o||g.mixed&&U(e)||(t=I.split(e,t)),s&&(n.parentNode.insertBefore(s,n),d.appendChild(n))}return t}function l(e){return c(d(e),e,e,!0)}function u(e){var t=I.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return N(n)&&(n=n[e?"firstChild":"lastChild"]),I.remove(t,!0),n}function m(e){var n,o,i;e=k(e,h,W),g.split&&(n=B(e,W),o=B(e),n!=o?(/^(TR|TD)$/.test(n.nodeName)&&n.firstChild&&(n=("TD"==n.nodeName?n.firstChild:n.firstChild.firstChild)||n),n=x(n,"span",{id:"_start","data-mce-type":"bookmark"}),o=x(o,"span",{id:"_end","data-mce-type":"bookmark"}),l(n),l(o),n=u(W),o=u()):n=o=l(n),e.startContainer=n.parentNode,e.startOffset=z(n),e.endContainer=o.parentNode,e.endOffset=z(o)+1),H.walk(e,function(e){L(e,function(e){a(e),1===e.nodeType&&"underline"===t.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===Z(e.parentNode)&&S({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var h=s(n),g=h[0],v,y,b,C=!0;return r?void(r.nodeType?(b=I.createRng(),b.setStartBefore(r),b.setEndAfter(r),m(b)):m(r)):void(P.isCollapsed()&&g.inline&&!I.select("td.mceSelected,th.mceSelected").length?M("remove",n,i):(v=P.getBookmark(),m(P.getRng(W)),P.moveToBookmark(v),g.inline&&p(n,i,P.getStart())&&R(P.getRng(!0)),t.nodeChanged()))}function u(e,t,n){var o=s(e);!p(e,t,n)||"toggle"in o[0]&&!o[0].toggle?c(e,t,n):l(e,t,n)}function f(e,t,n,o){function i(e,t,i){var r,a,s=t[i],d;if(t.onmatch)return t.onmatch(e,t,i);if(s)if(s.length===Y){for(r in s)if(s.hasOwnProperty(r)){if(a="attributes"===i?I.getAttrib(e,r):b(e,r),o&&!a&&!t.exact)return;if((!o||t.exact)&&!y(a,C(s[r],n)))return}}else for(d=0;d<s.length;d++)if("attributes"===i?I.getAttrib(e,s[d]):b(e,s[d]))return t;return t}var r=s(t),a,d,c;if(r&&e)for(d=0;d<r.length;d++)if(a=r[d],v(e,a)&&i(e,a,"attributes")&&i(e,a,"styles")){if(c=a.classes)for(d=0;d<c.length;d++)if(!I.hasClass(e,c[d]))return;return a}}function p(e,t,n){function o(n){return n=I.getParent(n,function(n){return!!f(n,e,t,!0)}),f(n,e,t)}var i;return n?o(n):(n=P.getNode(),o(n)?W:(i=P.getStart(),i!=n&&o(i)?W:j))}function m(e,t){var n,o=[],i={},r,a,s;return n=P.getStart(),I.getParent(n,function(n){var r,a;for(r=0;r<e.length;r++)a=e[r],!i[a]&&f(n,a,t)&&(i[a]=!0,o.push(a))},I.getRoot()),o}function h(e){var t=s(e),n,i,r,a,d;if(t)for(n=P.getStart(),i=o(n),a=t.length-1;a>=0;a--){if(d=t[a].selector,!d)return W;for(r=i.length-1;r>=0;r--)if(I.is(i[r],d))return W}return j}function g(e,n,i){var r;return G||(G={},r={},t.onNodeChange.addToTop(function(e,t,n){var i=o(n),a={};L(G,function(e,t){L(i,function(n){return f(n,t,{},e.similar)?(r[t]||(L(e,function(e){e(!0,{node:n,format:t,parents:i})}),r[t]=e),a[t]=e,!1):void 0})}),L(r,function(e,t){a[t]||(delete r[t],L(e,function(e){e(!1,{node:n,format:t,parents:i})}))})})),L(e.split(","),function(e){G[e]||(G[e]=[],G[e].similar=i),G[e].push(n)}),this}function v(e,t){return y(e,t.inline)?W:y(e,t.block)?W:t.selector?I.is(e,t.selector):void 0}function y(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function b(e,t){var n=I.getStyle(e,t);return("color"==t||"backgroundColor"==t)&&(n=I.toHex(n)),"fontWeight"==t&&700==n&&(n="bold"),""+n}function C(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function _(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function x(e,t,n){var o=I.create(t,n);return e.parentNode.insertBefore(o,e),o.appendChild(e),o}function k(e,n,i){function r(e){var t,o,i,r,a,s;if(t=o=e?h:v,a=e?"previousSibling":"nextSibling",s=I.getRoot(),3==t.nodeType&&!_(t)&&(e?g>0:b<t.nodeValue.length))return t;for(;;){if(!n[0].block_expand&&U(o))return o;for(r=o[a];r;r=r[a])if(!N(r)&&!_(r))return o;if(o.parentNode==s){t=o;break}o=o.parentNode}return t}function a(e,t){for(t===Y&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)e=e.childNodes[t],e&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function s(e){for(var t=e;t;){if(1===t.nodeType&&X(t))return"false"===X(t)?t:e;t=t.parentNode}return e}function d(e,n,o){function r(e,t){var n,r,a=e.nodeValue;return"undefined"==typeof t&&(t=o?a.length:0),o?(n=a.lastIndexOf(" ",t),r=a.lastIndexOf(" ",t),n=n>r?n:r,-1===n||i||n++):(n=a.indexOf(" ",t),r=a.indexOf(" ",t),n=-1!==n&&(-1===r||r>n)?n:r),n}var a,s,d,c;if(3===e.nodeType){if(d=r(e,n),-1!==d)return{container:e,offset:d};c=e}for(a=new O(e,I.getParent(e,U)||t.getBody());s=a[o?"prev":"next"]();)if(3===s.nodeType){if(c=s,d=r(s),-1!==d)return{container:s,offset:d}}else if(U(s))break;return c?(n=o?0:c.length,{container:c,offset:n}):void 0}function c(t,i){var r,a,s,d;for(3==t.nodeType&&0===t.nodeValue.length&&t[i]&&(t=t[i]),r=o(t),a=0;a<r.length;a++)for(s=0;s<n.length;s++)if(d=n[s],!("collapsed"in d&&d.collapsed!==e.collapsed)&&I.is(r[a],d.selector))return r[a];return t}function l(e,t,i){var r;if(n[0].wrapper||(r=I.getParent(e,n[0].block)),r||(r=I.getParent(3==e.nodeType?e.parentNode:e,U)),r&&n[0].wrapper&&(r=o(r,"ul,ol").reverse()[0]||r),!r)for(r=e;r[t]&&!U(r[t])&&(r=r[t],!y(r,"br")););return r||e}var u,f,p,m,h=e.startContainer,g=e.startOffset,v=e.endContainer,b=e.endOffset;if(1==h.nodeType&&h.hasChildNodes()&&(f=h.childNodes.length-1,h=h.childNodes[g>f?f:g],3==h.nodeType&&(g=0)),1==v.nodeType&&v.hasChildNodes()&&(f=v.childNodes.length-1,v=v.childNodes[b>f?f:b-1],3==v.nodeType&&(b=v.nodeValue.length)),h=s(h),v=s(v),(N(h.parentNode)||N(h))&&(h=N(h)?h:h.parentNode,h=h.nextSibling||h,3==h.nodeType&&(g=0)),(N(v.parentNode)||N(v))&&(v=N(v)?v:v.parentNode,v=v.previousSibling||v,3==v.nodeType&&(b=v.length)),n[0].inline&&(e.collapsed&&(m=d(h,g,!0),m&&(h=m.container,g=m.offset),m=d(v,b),m&&(v=m.container,b=m.offset)),p=a(v,b),p.node)){for(;p.node&&0===p.offset&&p.node.previousSibling;)p=a(p.node.previousSibling);p.node&&p.offset>0&&3===p.node.nodeType&&" "===p.node.nodeValue.charAt(p.offset-1)&&p.offset>1&&(v=p.node,v.splitText(p.offset-1))}return(n[0].inline||n[0].block_expand)&&(n[0].inline&&3==h.nodeType&&0!==g||(h=r(!0)),n[0].inline&&3==v.nodeType&&b!==v.nodeValue.length||(v=r())),n[0].selector&&n[0].expand!==j&&!n[0].inline&&(h=c(h,"previousSibling"),v=c(v,"nextSibling")),(n[0].block||n[0].selector)&&(h=l(h,"previousSibling"),v=l(v,"nextSibling"),n[0].block&&(U(h)||(h=r(!0)),U(v)||(v=r()))),1==h.nodeType&&(g=z(h),h=h.parentNode),1==v.nodeType&&(b=z(v)+1,v=v.parentNode),{startContainer:h,startOffset:g,endContainer:v,endOffset:b}}function S(e,t,n,o){var i,r,a;if(!v(n,e))return j;if("all"!=e.remove)for(L(e.styles,function(e,i){e=C(e,t),"number"==typeof i&&(i=e,o=0),(!o||y(b(o,i),e))&&I.setStyle(n,i,""),a=1}),a&&""==I.getAttrib(n,"style")&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),L(e.attributes,function(e,i){var r;if(e=C(e,t),"number"==typeof i&&(i=e,o=0),!o||y(I.getAttrib(o,i),e)){if("class"==i&&(e=I.getAttrib(n,i),e&&(r="",L(e.split(/\s+/),function(e){/mce\w+/.test(e)&&(r+=(r?" ":"")+e)}),r)))return void I.setAttrib(n,i,r);"class"==i&&n.removeAttribute("className"),K.test(i)&&n.removeAttribute("data-mce-"+i),n.removeAttribute(i)}}),L(e.classes,function(e){e=C(e,t),(!o||I.hasClass(o,e))&&I.removeClass(n,e)}),r=I.getAttribs(n),i=0;i<r.length;i++)if(0!==r[i].nodeName.indexOf("_"))return j;return"none"!=e.remove?(E(n,e),W):void 0}function E(t,n){function o(e,t,n){return e=w(e,t,n),!e||"BR"==e.nodeName||U(e)}var i=t.parentNode,r;n.block&&(V?i==I.getRoot()&&(n.list_block&&y(t,n.list_block)||L(e.grep(t.childNodes),function(e){
F(V,e.nodeName.toLowerCase())?r?r.appendChild(e):r=x(e,V):r=0})):U(t)&&!U(i)&&(o(t,j)||o(t.firstChild,W,1)||t.insertBefore(I.create("br"),t.firstChild),o(t,W)||o(t.lastChild,j,1)||t.appendChild(I.create("br")))),n.selector&&n.inline&&!y(n.inline,t)||I.remove(t,1)}function w(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!_(e))return e}function N(e){return e&&1==e.nodeType&&"bookmark"==e.getAttribute("data-mce-type")}function T(t,n){function o(e,t){function n(e){var t={};return L(I.getAttribs(e),function(n){var o=n.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&(t[o]=I.getAttrib(e,o))}),t}function o(e,t){var n,o;for(o in e)if(e.hasOwnProperty(o)){if(n=t[o],n===Y)return j;if(e[o]!=n)return j;delete t[o]}for(o in t)if(t.hasOwnProperty(o))return j;return W}return e.nodeName!=t.nodeName?j:o(n(e),n(t))&&o(I.parseStyle(I.getAttrib(e,"style")),I.parseStyle(I.getAttrib(t,"style")))?W:j}function i(e,t){for(a=e;a;a=a[t]){if(3==a.nodeType&&0!==a.nodeValue.length)return e;if(1==a.nodeType&&!N(a))return a}return e}var r,a,s;if(t&&n&&(t=i(t,"previousSibling"),n=i(n,"nextSibling"),o(t,n))){for(a=t.nextSibling;a&&a!=n;)s=a,a=a.nextSibling,t.appendChild(s);return I.remove(n),L(e.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n}function A(e){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(e)}function B(e,n){var o,i,r,a;return o=e[n?"startContainer":"endContainer"],i=e[n?"startOffset":"endOffset"],1==o.nodeType&&(r=o.childNodes.length-1,!n&&i&&i--,o=o.childNodes[i>r?r:i]),3===o.nodeType&&n&&i>=o.nodeValue.length&&(o=new O(o,t.getBody()).next()||o),3!==o.nodeType||n||0!==i||(o=new O(o,t.getBody()).prev()||o),o}function M(n,o,i){function r(e){var n=I.create("span",{id:v,"data-mce-bogus":!0,style:y?"color:red":""});return e&&n.appendChild(t.getDoc().createTextNode(q)),n}function a(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==q||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function d(e){for(;e;){if(e.id===v)return e;e=e.parentNode}}function u(e){var t;if(e)for(t=new O(e,e),e=t.current();e;e=t.next())if(3===e.nodeType)return e}function p(e,t){var n,o;if(e)o=P.getRng(!0),a(e)?(t!==!1&&(o.setStartBefore(e),o.setEndBefore(e)),I.remove(e)):(n=u(e),n.nodeValue.charAt(0)===q&&(n=n.deleteData(0,1)),I.remove(e,1)),P.setRng(o);else if(e=d(P.getStart()),!e)for(;e=I.get(v);)p(e,!1)}function m(){var e,t,n,a,l,f,p;e=P.getRng(!0),a=e.startOffset,f=e.startContainer,p=f.nodeValue,t=d(P.getStart()),t&&(n=u(t)),p&&a>0&&a<p.length&&/\w/.test(p.charAt(a))&&/\w/.test(p.charAt(a-1))?(l=P.getBookmark(),e.collapse(!0),e=k(e,s(o)),e=H.split(e),c(o,i,e),P.moveToBookmark(l)):(t&&n.nodeValue===q?c(o,i,t):(t=r(!0),n=t.firstChild,e.insertNode(t),a=1,c(o,i,t)),P.setCursorLocation(n,a))}function h(){var e=P.getRng(!0),t,n,a,d,c,u,p=[],m,h;for(t=e.startContainer,n=e.startOffset,c=t,3==t.nodeType&&((n!=t.nodeValue.length||t.nodeValue===q)&&(d=!0),c=c.parentNode);c;){if(f(c,o,i)){u=c;break}c.nextSibling&&(d=!0),p.push(c),c=c.parentNode}if(u)if(d)a=P.getBookmark(),e.collapse(!0),e=k(e,s(o),!0),e=H.split(e),l(o,i,e),P.moveToBookmark(a);else{for(h=r(),c=h,m=p.length-1;m>=0;m--)c.appendChild(I.clone(p[m],!1)),c=c.firstChild;c.appendChild(I.doc.createTextNode(q)),c=c.firstChild,I.insertAfter(h,u),P.setCursorLocation(c,1)}}function g(){var t,n,o;n=d(P.getStart()),n&&!I.isEmpty(n)&&e.walk(n,function(e){1!=e.nodeType||e.id===v||I.isEmpty(e)||I.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var v="_mce_caret",y=t.settings.caret_debug;self._hasCaretEvents||(t.onBeforeGetContent.addToTop(function(){var e=[],t;if(a(d(P.getStart()),e))for(t=e.length;t--;)I.setAttrib(e[t],"data-mce-bogus","1")}),e.each("onMouseUp onKeyUp".split(" "),function(e){t[e].addToTop(function(){p(),g()})}),t.onKeyDown.addToTop(function(e,t){var n=t.keyCode;(8==n||37==n||39==n)&&p(d(P.getStart())),g()}),P.onSetContent.add(g),self._hasCaretEvents=!0),"apply"==n?m():h()}function R(e){var t=e.startContainer,n=e.startOffset,o,i,r,a,s;if(3==t.nodeType&&n>=t.nodeValue.length&&(n=z(t),t=t.parentNode,o=!0),1==t.nodeType)for(a=t.childNodes,t=a[Math.min(n,a.length-1)],i=new O(t,I.getParent(t,I.isBlock)),(n>a.length-1||o)&&i.next(),r=i.current();r;r=i.next())if(3==r.nodeType&&!_(r))return s=I.create("a",null,q),r.parentNode.insertBefore(s,r),e.setStart(r,0),P.setRng(e),void I.remove(s)}var D={},L=e.each,I=t.dom,P=t.selection,O=e.dom.TreeWalker,H=new e.dom.RangeUtils(I),F=t.schema.isValidChild,U=I.isBlock,V=t.settings.forced_root_block,z=I.nodeIndex,q="\ufeff",K=/^(src|href|style)$/,j=!1,W=!0,G,Y,X=I.getContentEditable,Z=function(e){var n;return t.dom.getParent(e,function(e){return n=t.dom.getStyle(e,"text-decoration"),n&&"none"!==n}),n},Q=function(e){var n;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(n=Z(e.parentNode),t.dom.getStyle(e,"color")&&n?t.dom.setStyle(e,"text-decoration",n):t.dom.getStyle(e,"textdecoration")===n&&t.dom.setStyle(e,"text-decoration",null))};e.extend(this,{get:s,register:d,apply:c,remove:l,toggle:u,match:p,matchAll:m,matchNode:f,canApply:h,formatChanged:g}),r(),a()}}(tinymce),tinymce.onAddEditor.add(function(e,t){function n(t,n){e.each(n,function(e,n){e&&a.setStyle(t,n,e)}),a.rename(t,"span")}function o(n,o){a=n.dom,s.convert_fonts_to_spans&&e.each(a.select("font,u,strike",o.node),function(e){i[e.nodeName.toLowerCase()](t.dom,e)})}var i,r,a,s=t.settings;s.inline_styles&&(r=e.explode(s.font_size_legacy_values),i={font:function(e,t){n(t,{backgroundColor:t.style.backgroundColor,color:t.color,fontFamily:t.face,fontSize:r[parseInt(t.size,10)-1]})},u:function(e,t){n(t,{textDecoration:"underline"})},strike:function(e,t){n(t,{textDecoration:"line-through"})}},t.onPreProcess.add(o),t.onSetContent.add(o),t.onInit.add(function(){t.selection.onSetContent.add(o)}))}),function(e){var t=e.dom.TreeWalker;e.EnterKey=function(n){function o(o){function c(e){return e&&i.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==i.getContentEditable(e)}function l(t){var n;e.isIE&&i.isBlock(t)&&(n=r.getRng(),t.appendChild(i.create("span",null," ")),r.select(t),t.lastChild.outerHTML="",r.setRng(n))}function u(e){for(var t=e,n=[],o;t=t.firstChild;){if(i.isBlock(t))return;1!=t.nodeType||d[t.nodeName.toLowerCase()]||n.push(t)}for(o=n.length;o--;)t=n[o],!t.hasChildNodes()||t.firstChild==t.lastChild&&""===t.firstChild.nodeValue?i.remove(t):"A"==t.nodeName&&" "===(t.innerText||t.textContent)&&i.remove(t)}function f(e){var o,a,s,c,l,u=e,f;if(s=i.createRng(),e.hasChildNodes()){for(o=new t(e,e);a=o.current();){if(3==a.nodeType){s.setStart(a,0),s.setEnd(a,0);break}if(d[a.nodeName.toLowerCase()]){s.setStartBefore(a),s.setEndBefore(a);break}u=a,a=o.next()}a||(s.setStart(u,0),s.setEnd(u,0))}else"BR"==e.nodeName?e.nextSibling&&i.isBlock(e.nextSibling)?((!T||9>T)&&(f=i.create("br"),e.parentNode.insertBefore(f,e)),s.setStartBefore(e),s.setEndBefore(e)):(s.setStartAfter(e),s.setEndAfter(e)):(s.setStart(e,0),s.setEnd(e,0));r.setRng(s),i.remove(f),l=i.getViewPort(n.getWin()),c=i.getPos(e).y,(c<l.y||c+25>l.y+l.h)&&n.getWin().scrollTo(0,c<l.y?c:c-l.h+25)}function p(t){var n=E,o,r,s;if(o=t||"TABLE"==D?i.create(t||I):N.cloneNode(!1),s=o,a.keep_styles!==!1)do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(n.nodeName)&&(r=n.cloneNode(!1),i.setAttrib(r,"id",""),o.hasChildNodes()?(r.appendChild(o.firstChild),o.appendChild(r)):(s=r,o.appendChild(r)));while(n=n.parentNode);return e.isIE||(s.innerHTML="<br>"),o}function m(e){var n,o,i;if(3==E.nodeType&&(e?w>0:w<E.nodeValue.length))return!1;if(E.parentNode==N&&P&&!e)return!0;if(e&&1==E.nodeType&&E==N.firstChild)return!0;if("TABLE"===E.nodeName||E.previousSibling&&"TABLE"==E.previousSibling.nodeName)return P&&!e||!P&&e;for(n=new t(E,N),3==E.nodeType&&(e&&0==w?n.prev():e||w!=E.nodeValue.length||n.next());o=n.current();){if(1===o.nodeType){if(!o.getAttribute("data-mce-bogus")&&(i=o.nodeName.toLowerCase(),d[i]&&"br"!==i))return!1}else if(3===o.nodeType&&!/^[ \t\r\n]*$/.test(o.nodeValue))return!1;e?n.prev():n.next()}return!0}function h(e,t){var n,o,r,a,s,d=I||"P";if(o=i.getParent(e,i.isBlock),!o||!c(o)){if(o=o||S,!o.hasChildNodes())return n=i.create(d),o.appendChild(n),x.setStart(n,0),x.setEnd(n,0),n;for(a=e;a.parentNode!=o;)a=a.parentNode;for(;a&&!i.isBlock(a);)r=a,a=a.previousSibling;if(r){for(n=i.create(d),r.parentNode.insertBefore(n,r),a=r;a&&!i.isBlock(a);)s=a.nextSibling,n.appendChild(a),a=s;x.setStart(e,t),x.setEnd(e,t)}}return e}function g(){function e(e){for(var t=R[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===N}B=I?p(I):i.create("BR"),e(!0)&&e()?i.replace(B,R):e(!0)?R.parentNode.insertBefore(B,R):e()?(i.insertAfter(B,R),l(B)):(k=x.cloneRange(),k.setStartAfter(N),k.setEndAfter(R),M=k.extractContents(),i.insertAfter(M,R),i.insertAfter(B,R)),i.remove(N),f(B),s.add()}function v(){for(var e=new t(E,N),n;n=e.current();){if("BR"==n.nodeName)return!0;n=e.next()}}function y(){var t,n;E&&3==E.nodeType&&w>=E.nodeValue.length&&(e.isIE||v()||(t=i.create("br"),x.insertNode(t),x.setStartAfter(t),x.setEndAfter(t),n=!0)),t=i.create("br"),x.insertNode(t),e.isIE&&"PRE"==D&&(!T||8>T)&&t.parentNode.insertBefore(i.doc.createTextNode("\r"),t),n?(x.setStartBefore(t),x.setEndBefore(t)):(x.setStartAfter(t),x.setEndAfter(t)),r.setRng(x),s.add()}function b(e){do 3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)}function C(e){var t=i.getRoot(),n,o;for(n=e;n!==t&&"false"!==i.getContentEditable(n);)"true"===i.getContentEditable(n)&&(o=n),n=n.parentNode;return n!==t?o:t}function _(t){var n;e.isIE||(t.normalize(),n=t.lastChild,(!n||/^(left|right)$/gi.test(i.getStyle(n,"float",!0)))&&i.add(t,"br"))}var x=r.getRng(!0),k,S,E,w,N,T,A,B,M,R,D,L,I,P;if(!x.collapsed)return void n.execCommand("Delete");if(!o.isDefaultPrevented()&&(E=x.startContainer,w=x.startOffset,I=(a.force_p_newlines?"p":"")||a.forced_root_block,I=I?I.toUpperCase():"",T=i.doc.documentMode,A=o.shiftKey,1==E.nodeType&&E.hasChildNodes()&&(P=w>E.childNodes.length-1,E=E.childNodes[Math.min(w,E.childNodes.length-1)]||E,w=P&&3==E.nodeType?E.nodeValue.length:0),S=C(E))){if(s.beforeChange(),!i.isBlock(S)&&S!=i.getRoot())return void((!I||A)&&y());if((I&&!A||!I&&A)&&(E=h(E,w)),N=i.getParent(E,i.isBlock),R=N?i.getParent(N.parentNode,i.isBlock):null,D=N?N.nodeName.toUpperCase():"",L=R?R.nodeName.toUpperCase():"","LI"==D){if(!I&&A)return void y();if(i.isEmpty(N))return/^(UL|OL|LI)$/.test(R.parentNode.nodeName)?!1:void g()}if("PRE"==D&&a.br_in_pre!==!1){if(!A)return void y()}else if(!I&&!A&&"LI"!=D||I&&A)return void y();I=I||"P",m()?(B=/^(H[1-6]|PRE)$/.test(D)&&"HGROUP"!=L?p(I):p(),a.end_container_on_empty_block&&c(R)&&i.isEmpty(N)?B=i.split(R,N):i.insertAfter(B,N),f(B)):m(!0)?(B=N.parentNode.insertBefore(p(),N),l(B)):(k=x.cloneRange(),k.setEndAfter(N),M=k.extractContents(),b(M),B=M.firstChild,i.insertAfter(M,N),u(B),_(N),f(B)),i.setAttrib(B,"id",""),s.add()}}var i=n.dom,r=n.selection,a=n.settings,s=n.undoManager,d=n.schema.getNonEmptyElements();n.onKeyDown.add(function(e,t){13==t.keyCode&&o(t)!==!1&&t.preventDefault()})}}(tinymce);
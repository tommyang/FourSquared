var gulp=require("gulp"),concat=require("gulp-concat"),uglify=require("gulp-uglify"),karma=require("karma").server,jshint=require("gulp-jshint"),insert=require("gulp-insert"),stylish=require("jshint-stylish"),packageJson=require("./package.json"),pluginList=["stSearch","stSelectRow","stSort","stPagination","stPipe"],disFolder="./dist/",src=["smart-table.module","stTable"].concat(pluginList).map(function(s){return"src/"+s+".js"});src.push("src/bottom.txt"),src.unshift("src/top.txt"),gulp.task("plugins",function(){gulp.src(src).pipe(concat("smart-table.min.js")).pipe(uglify()).pipe(gulp.dest(disFolder))}),gulp.task("lint",function(){gulp.src(src).pipe(jshint()).pipe(jshint.reporter(stylish))}),gulp.task("karma-CI",function(s){var e=require("./test/karma.common.js");e.singleRun=!0,e.browsers=["PhantomJS"],e.basePath="./",karma.start(e,s)}),gulp.task("debug",function(){gulp.src(src).pipe(concat("smart-table.debug.js")).pipe(gulp.dest(disFolder))}),gulp.task("test",["karma-CI"]),gulp.task("build",["test","plugins","debug"],function(){var s=packageJson.version,e="/** \n* @version "+s+"\n* @license MIT\n*/\n";gulp.src(disFolder+"*.js").pipe(insert.prepend(e)).pipe(gulp.dest(disFolder))});
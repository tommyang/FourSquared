ng.module("smart-table").directive("stSort",["$parse",function(t){return{restrict:"A",require:"^stTable",link:function(e,s,r,a){function o(){i++,n=ng.isFunction(l(e))?l(e):r.stSort,i%3===0&&void 0===r.stSkipNatural?(i=0,a.tableState().sort={},a.tableState().pagination.start=0,a.pipe()):a.sortBy(n,i%2===0)}var n=r.stSort,l=t(n),i=0,c=r.stClassAscent||"st-sort-ascent",u=r.stClassDescent||"st-sort-descent",S=[c,u],f;r.stSortDefault&&(f=void 0!==e.$eval(r.stSortDefault)?e.$eval(r.stSortDefault):r.stSortDefault),s.bind("click",function v(){n&&e.$apply(o)}),f&&(i="reverse"===r.stSortDefault?1:0,o()),e.$watch(function(){return a.tableState().sort},function(t){t.predicate!==n?(i=0,s.removeClass(c).removeClass(u)):(i=t.reverse===!0?2:1,s.removeClass(S[i%2]).addClass(S[i-1]))},!0)}}}]);
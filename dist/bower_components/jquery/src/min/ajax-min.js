define(["./core","./var/document","./var/rnotwhite","./ajax/var/location","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseJSON","./ajax/parseXML","./event/trigger","./deferred"],function(e,t,r,a,o,n){function s(t){return function(a,o){"string"!=typeof a&&(o=a,a="*");var n,s=0,i=a.toLowerCase().match(r)||[];if(e.isFunction(o))for(;n=i[s++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(o)):(t[n]=t[n]||[]).push(o)}}function i(t,r,a,o){function n(c){var f;return s[c]=!0,e.each(t[c]||[],function(e,t){var c=t(r,a,o);return"string"!=typeof c||i||s[c]?i?!(f=c):void 0:(r.dataTypes.unshift(c),n(c),!1)}),f}var s={},i=t===v;return n(r.dataTypes[0])||!s["*"]&&n("*")}function c(t,r){var a,o,n=e.ajaxSettings.flatOptions||{};for(a in r)void 0!==r[a]&&((n[a]?t:o||(o={}))[a]=r[a]);return o&&e.extend(!0,t,o),t}function f(e,t,r){for(var a,o,n,s,i=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===a&&(a=e.mimeType||t.getResponseHeader("Content-Type"));if(a)for(o in i)if(i[o]&&i[o].test(a)){c.unshift(o);break}if(c[0]in r)n=c[0];else{for(o in r){if(!c[0]||e.converters[o+" "+c[0]]){n=o;break}s||(s=o)}n=n||s}return n?(n!==c[0]&&c.unshift(n),r[n]):void 0}function d(e,t,r,a){var o,n,s,i,c,f={},d=e.dataTypes.slice();if(d[1])for(s in e.converters)f[s.toLowerCase()]=e.converters[s];for(n=d.shift();n;)if(e.responseFields[n]&&(r[e.responseFields[n]]=t),!c&&a&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=n,n=d.shift())if("*"===n)n=c;else if("*"!==c&&c!==n){if(s=f[c+" "+n]||f["* "+n],!s)for(o in f)if(i=o.split(" "),i[1]===n&&(s=f[c+" "+i[0]]||f["* "+i[0]])){s===!0?s=f[o]:f[o]!==!0&&(n=i[0],d.unshift(i[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(p){return{state:"parsererror",error:s?p:"No conversion from "+c+" to "+n}}}return{state:"success",data:t}}var p=/#.*$/,u=/([?&])_=[^&]*/,l=/^(.*?):[ \t]*([^\r\n]*)$/gm,h=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,x=/^(?:GET|HEAD)$/,y=/^\/\//,m={},v={},g="*/".concat("*"),j=t.createElement("a");return j.href=a.href,e.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:a.href,type:"GET",isLocal:h.test(a.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":g,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":e.parseJSON,"text xml":e.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,r){return r?c(c(t,e.ajaxSettings),r):c(e.ajaxSettings,t)},ajaxPrefilter:s(m),ajaxTransport:s(v),ajax:function(s,c){function h(t,r,a,o){var n,s,i,c,p,u=r;2!==A&&(A=2,C&&window.clearTimeout(C),T=void 0,b=o||"",W.readyState=t>0?4:0,n=t>=200&&300>t||304===t,a&&(c=f(R,W,a)),c=d(R,c,W,n),n?(R.ifModified&&(p=W.getResponseHeader("Last-Modified"),p&&(e.lastModified[S]=p),p=W.getResponseHeader("etag"),p&&(e.etag[S]=p)),204===t||"HEAD"===R.type?u="nocontent":304===t?u="notmodified":(u=c.state,s=c.data,i=c.error,n=!i)):(i=u,(t||!u)&&(u="error",0>t&&(t=0))),W.status=t,W.statusText=(r||u)+"",n?F.resolveWith(q,[s,u,W]):F.rejectWith(q,[W,u,i]),W.statusCode(N),N=void 0,M&&D.trigger(n?"ajaxSuccess":"ajaxError",[W,R,n?s:i]),E.fireWith(q,[W,u]),M&&(D.trigger("ajaxComplete",[W,R]),--e.active||e.event.trigger("ajaxStop")))}"object"==typeof s&&(c=s,s=void 0),c=c||{};var T,S,b,w,C,H,M,L,R=e.ajaxSetup({},c),q=R.context||R,D=R.context&&(q.nodeType||q.jquery)?e(q):e.event,F=e.Deferred(),E=e.Callbacks("once memory"),N=R.statusCode||{},O={},k={},A=0,J="canceled",W={readyState:0,getResponseHeader:function(e){var t;if(2===A){if(!w)for(w={};t=l.exec(b);)w[t[1].toLowerCase()]=t[2];t=w[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===A?b:null},setRequestHeader:function(e,t){var r=e.toLowerCase();return A||(e=k[r]=k[r]||e,O[e]=t),this},overrideMimeType:function(e){return A||(R.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>A)for(t in e)N[t]=[N[t],e[t]];else W.always(e[W.status]);return this},abort:function(e){var t=e||J;return T&&T.abort(t),h(0,t),this}};if(F.promise(W).complete=E.add,W.success=W.done,W.error=W.fail,R.url=((s||R.url||a.href)+"").replace(p,"").replace(y,a.protocol+"//"),R.type=c.method||c.type||R.method||R.type,R.dataTypes=e.trim(R.dataType||"*").toLowerCase().match(r)||[""],null==R.crossDomain){H=t.createElement("a");try{H.href=R.url,H.href=H.href,R.crossDomain=j.protocol+"//"+j.host!=H.protocol+"//"+H.host}catch(X){R.crossDomain=!0}}if(R.data&&R.processData&&"string"!=typeof R.data&&(R.data=e.param(R.data,R.traditional)),i(m,R,c,W),2===A)return W;M=e.event&&R.global,M&&0===e.active++&&e.event.trigger("ajaxStart"),R.type=R.type.toUpperCase(),R.hasContent=!x.test(R.type),S=R.url,R.hasContent||(R.data&&(S=R.url+=(n.test(S)?"&":"?")+R.data,delete R.data),R.cache===!1&&(R.url=u.test(S)?S.replace(u,"$1_="+o++):S+(n.test(S)?"&":"?")+"_="+o++)),R.ifModified&&(e.lastModified[S]&&W.setRequestHeader("If-Modified-Since",e.lastModified[S]),e.etag[S]&&W.setRequestHeader("If-None-Match",e.etag[S])),(R.data&&R.hasContent&&R.contentType!==!1||c.contentType)&&W.setRequestHeader("Content-Type",R.contentType),W.setRequestHeader("Accept",R.dataTypes[0]&&R.accepts[R.dataTypes[0]]?R.accepts[R.dataTypes[0]]+("*"!==R.dataTypes[0]?", "+g+"; q=0.01":""):R.accepts["*"]);for(L in R.headers)W.setRequestHeader(L,R.headers[L]);if(R.beforeSend&&(R.beforeSend.call(q,W,R)===!1||2===A))return W.abort();J="abort";for(L in{success:1,error:1,complete:1})W[L](R[L]);if(T=i(v,R,c,W)){if(W.readyState=1,M&&D.trigger("ajaxSend",[W,R]),2===A)return W;R.async&&R.timeout>0&&(C=window.setTimeout(function(){W.abort("timeout")},R.timeout));try{A=1,T.send(O,h)}catch(X){if(!(2>A))throw X;h(-1,X)}}else h(-1,"No Transport");return W},getJSON:function(t,r,a){return e.get(t,r,a,"json")},getScript:function(t,r){return e.get(t,void 0,r,"script")}}),e.each(["get","post"],function(t,r){e[r]=function(t,a,o,n){return e.isFunction(a)&&(n=n||o,o=a,a=void 0),e.ajax(e.extend({url:t,type:r,dataType:n,data:a,success:o},e.isPlainObject(t)&&t))}}),e});